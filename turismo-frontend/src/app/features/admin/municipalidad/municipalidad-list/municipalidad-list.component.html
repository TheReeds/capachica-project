<!-- Código HTML + JavaScript de Gestión de Capachica con conexión a endpoints Laravel Sanctum -->
<!-- Requiere token de autenticación en localStorage bajo la clave 'api_token' -->

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gestión de Municipalidades</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">

  

 

 

 
</body>
</html>







  <div class="p-6 bg-white rounded-xl shadow">
  <h2 class="text-2xl font-bold mb-4 text-gray-800">Gestión de Datos de Municipalidades</h2>
 
  <div *ngIf="loading()">Cargando...</div>
  
  

  <!-- Barra superior con buscador y botón -->
  <div class="flex justify-between items-center mb-6">
    <input type="text" placeholder="Buscar..." class="border border-gray-300 rounded px-4 py-2 w-1/2">
    <button onclick="mostrarFormulario()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">
      Agregar Datos
    </button>
  </div>

  <!-- Formulario (oculto por defecto) -->
  <div id="formulario" class="hidden bg-white p-6 rounded shadow-md w-full md:w-1/2 mx-auto">
    <h2 class="text-lg font-bold mb-4">Nuevo Registro</h2>
    <form>
      <div class="mb-4">
        <label class="block text-gray-700">Nombre</label>
        <input type="text" class="w-full border border-gray-300 rounded px-3 py-2" required>
      </div>
      <div class="mb-4">
        <label class="block text-gray-700">Descripción</label>
        <textarea class="w-full border border-gray-300 rounded px-3 py-2" rows="3" required></textarea>
      </div>
      <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">
        Guardar
      </button>
    </form>
  </div>

  <script>
    function mostrarFormulario() {
      const form = document.getElementById('formulario');
      form.classList.toggle('hidden');
    }
  </script>

  <table *ngIf="!loading()" class="w-full table-auto border border-gray-200 text-sm">
    <thead class="bg-gray-100 text-gray-700 text-left">
      <tr>
        <th class="p-3 border">#</th>
        <th class="p-3 border">Nombre</th>
        <th class="p-3 border">Descripción</th>
        <th class="p-3 border">Correo</th>
        <th class="p-3 border">Redes URL</th>
        <th class="p-3 border">Red Facebook</th>
        <th class="p-3 border">Red Instagram</th>
        <th class="p-3 border">Red Youtube</th>
        <th class="p-3 border">Frase</th>
        <th class="p-3 border">Historia de Comunidades</th>
        <th class="p-3 border">Historia de Familias</th>
        <th class="p-3 border">Historia de Capachica</th>
        <th class="p-3 border">Comite de turismo</th>
        <th class="p-3 border">Misión</th>
        <th class="p-3 border">Visión</th>
        <th class="p-3 border">Valores</th>
        <th class="p-3 border">Ordenanza Municipal</th>
        <th class="p-3 border">Alianzas</th>
        <th class="p-3 border">Correo</th>
        <th class="p-3 border">Horario de Atención</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of municipalidades(); let i = index" class="hover:bg-gray-50">
        <td class="p-3 border">{{ i + 1 }}</td>
        <td class="p-3 border">{{ item.nombre }}</td>
        <td class="p-3 border">{{ item.descripcion }}</td>
        <td class="p-3 border">{{ item.correo }}</td>
        <td class="p-3 border">{{ item.red_facebook }}</td>
        <td class="p-3 border">{{ item.red_instagram }}</td>
        <td class="p-3 border">{{ item.red_youtube }}</td>
        <td class="p-3 border">{{ item.frase }}</td>
        <td class="p-3 border">{{ item.comunidades }}</td>
        <td class="p-3 border">{{ item.historiafamilias }}</td>
        <td class="p-3 border">{{ item.historiacapachica }}</td>
        <td class="p-3 border">{{ item.comite }}</td>
        <td class="p-3 border">{{ item.mision }}</td>
        <td class="p-3 border">{{ item.vision }}</td>
        <td class="p-3 border">{{ item.valores }}</td>
        <td class="p-3 border">{{ item.ordenanzamunicipal }}</td>
        <td class="p-3 border">{{ item.alianzas }}</td>
        <td class="p-3 border">{{ item.correo }}</td>
        <td class="p-3 border">{{ item.horariodeatencion }}</td>
      </tr>
    </tbody>
  </table>
