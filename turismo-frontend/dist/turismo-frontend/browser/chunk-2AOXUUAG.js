import{Nc as m,Oc as a,Pc as c,Sc as l,U as o,_ as d,p as n}from"./chunk-ETYZCZA5.js";var h=class p{http=d(c);API_URL=l.apiUrl;constructor(){}getHeaders(){return new m({Accept:"application/json","Content-Type":"application/json"})}getMisEmprendimientos(){return this.http.get(`${this.API_URL}/mis-emprendimientos`).pipe(n(s=>s.data||[]))}getEmprendimiento(s){return this.http.get(`${this.API_URL}/mis-emprendimientos/${s}`).pipe(n(r=>r.data))}updateEmprendimiento(s,r){let e=this.prepareFormData(r);return e.append("_method","PUT"),this.http.post(`${this.API_URL}/emprendedores/${s}`,e).pipe(n(i=>i.data))}getDashboard(s){return this.http.get(`${this.API_URL}/mis-emprendimientos/${s}/dashboard`).pipe(n(r=>r.data))}getCalendario(s,r,e){let i=new a;return r&&(i=i.set("fecha_inicio",r)),e&&(i=i.set("fecha_fin",e)),this.http.get(`${this.API_URL}/mis-emprendimientos/${s}/calendario`,{params:i}).pipe(n(t=>t.data))}addAdministrador(s,r){return this.http.post(`${this.API_URL}/mis-emprendimientos/${s}/administradores`,r,{headers:this.getHeaders()}).pipe(n(e=>e.data))}removeAdministrador(s,r){return this.http.delete(`${this.API_URL}/mis-emprendimientos/${s}/administradores/${r}`)}getServicios(s){return this.http.get(`${this.API_URL}/emprendedores/${s}/servicios`).pipe(n(r=>r.data||[]))}getServicio(s){return this.http.get(`${this.API_URL}/servicios/${s}`).pipe(n(r=>r.data))}createServicio(s){let r=this.prepareFormData(s);return this.http.post(`${this.API_URL}/servicios`,r).pipe(n(e=>e.data))}updateServicio(s,r){let e=this.prepareFormData(r);return e.append("_method","PUT"),this.http.post(`${this.API_URL}/servicios/${s}`,e).pipe(n(i=>i.data))}deleteServicio(s){return this.http.delete(`${this.API_URL}/servicios/${s}`)}checkDisponibilidad(s){return this.http.get(`${this.API_URL}/reserva-servicios/verificar-disponibilidad`,{params:s}).pipe(n(r=>r.data))}getReservasEmprendimiento(s,r=1){let e=new a().set("page",r.toString());return this.http.get(`${this.API_URL}/mis-emprendimientos/${s}/reservas`,{params:e}).pipe(n(i=>i.data))}getReservasPorEmprendedor(s){return this.http.get(`${this.API_URL}/reservas/emprendedor/${s}`).pipe(n(r=>r.data||[]))}getReservasPorServicio(s){return this.http.get(`${this.API_URL}/reservas/servicio/${s}`).pipe(n(r=>r.data||[]))}updateReserva(s,r){return this.http.put(`${this.API_URL}/reservas/${s}`,r,{headers:this.getHeaders()}).pipe(n(e=>e.data))}getServiciosReserva(s){return this.http.get(`${this.API_URL}/reserva-servicios/reserva/${s}`).pipe(n(r=>r.data||[]))}updateEstadoServicioReserva(s,r){return this.http.put(`${this.API_URL}/reserva-servicios/${s}/estado`,r,{headers:this.getHeaders()}).pipe(n(e=>e.data))}getCalendarioReservas(s){return this.http.get(`${this.API_URL}/reserva-servicios/calendario`,{params:s}).pipe(n(r=>r.data))}getPlanesPorEmprendedor(s,r){let e=new a;return r?.solo_activos!==void 0&&(e=e.set("solo_activos",r.solo_activos.toString())),r?.tipo_rol&&(e=e.set("tipo_rol",r.tipo_rol)),r?.page&&(e=e.set("page",r.page.toString())),this.http.get(`${this.API_URL}/emprendedores/${s}/planes`,{params:e}).pipe(n(i=>({data:i.data||[],meta:i.meta})))}getPlanEmprendedor(s,r){return this.http.get(`${this.API_URL}/emprendedores/${s}/planes/${r}`).pipe(n(e=>e.data))}getInscripcionesPlan(s,r,e){let i=new a;return e?.estado&&(i=i.set("estado",e.estado)),e?.fecha_desde&&(i=i.set("fecha_desde",e.fecha_desde)),e?.fecha_hasta&&(i=i.set("fecha_hasta",e.fecha_hasta)),this.http.get(`${this.API_URL}/emprendedores/${s}/planes/${r}/inscripciones`,{params:i}).pipe(n(t=>({data:t.data||[],meta:t.meta})))}getEstadisticasPlan(s,r){return this.http.get(`${this.API_URL}/emprendedores/${s}/planes/${r}/estadisticas`).pipe(n(e=>e.data))}confirmarInscripcion(s,r,e){return this.http.patch(`${this.API_URL}/emprendedores/${s}/planes/${r}/inscripciones/${e}/confirmar`,{},{headers:this.getHeaders()}).pipe(n(i=>i.data))}cancelarInscripcion(s,r,e){return this.http.patch(`${this.API_URL}/emprendedores/${s}/planes/${r}/inscripciones/${e}/cancelar`,{},{headers:this.getHeaders()}).pipe(n(i=>i.data))}getResumenPlanes(s){return this.http.get(`${this.API_URL}/emprendedores/${s}/planes-resumen`).pipe(n(r=>r.data))}getEmprendedoresPlan(s){return this.http.get(`${this.API_URL}/planes/${s}/emprendedores`).pipe(n(r=>({data:r.data||[],meta:r.meta})))}agregarEmprendedorPlan(s,r){return this.http.post(`${this.API_URL}/planes/${s}/emprendedores`,r,{headers:this.getHeaders()}).pipe(n(e=>e.data))}updateEmprendedorPlan(s,r,e){return this.http.put(`${this.API_URL}/planes/${s}/emprendedores/${r}`,e,{headers:this.getHeaders()}).pipe(n(i=>i.data))}removeEmprendedorPlan(s,r){return this.http.delete(`${this.API_URL}/planes/${s}/emprendedores/${r}`)}cambiarOrganizadorPrincipal(s,r){return this.http.post(`${this.API_URL}/planes/${s}/emprendedores/cambiar-organizador`,r,{headers:this.getHeaders()}).pipe(n(e=>e.data))}getEmprendedoresDisponibles(s){return this.http.get(`${this.API_URL}/planes/${s}/emprendedores/disponibles`).pipe(n(r=>r.data||[]))}prepareFormData(s){let r=new FormData;return Object.keys(s).forEach(e=>{e!=="sliders_principales"&&e!=="sliders_secundarios"&&e!=="sliders"&&e!=="deleted_sliders"&&e!=="administradores"&&e!=="servicios"&&e!=="horarios"&&e!=="categorias"&&s[e]!==null&&s[e]!==void 0&&(Array.isArray(s[e])||typeof s[e]=="object"&&!(s[e]instanceof File)?r.append(e,JSON.stringify(s[e])):r.append(e,s[e]))}),s.sliders_principales&&Array.isArray(s.sliders_principales)&&s.sliders_principales.forEach((e,i)=>{e.id&&r.append(`sliders_principales[${i}][id]`,e.id),r.append(`sliders_principales[${i}][nombre]`,e.nombre),r.append(`sliders_principales[${i}][orden]`,e.orden),r.append(`sliders_principales[${i}][es_principal]`,"true"),e.imagen instanceof File&&r.append(`sliders_principales[${i}][imagen]`,e.imagen)}),s.sliders_secundarios&&Array.isArray(s.sliders_secundarios)&&s.sliders_secundarios.forEach((e,i)=>{e.id&&r.append(`sliders_secundarios[${i}][id]`,e.id),r.append(`sliders_secundarios[${i}][nombre]`,e.nombre),r.append(`sliders_secundarios[${i}][orden]`,e.orden),r.append(`sliders_secundarios[${i}][es_principal]`,"false"),r.append(`sliders_secundarios[${i}][titulo]`,e.titulo||""),r.append(`sliders_secundarios[${i}][descripcion]`,e.descripcion||""),e.imagen instanceof File&&r.append(`sliders_secundarios[${i}][imagen]`,e.imagen)}),s.sliders&&Array.isArray(s.sliders)&&s.sliders.forEach((e,i)=>{e.id&&r.append(`sliders[${i}][id]`,e.id),r.append(`sliders[${i}][nombre]`,e.nombre),r.append(`sliders[${i}][orden]`,e.orden),e.es_principal!==void 0&&r.append(`sliders[${i}][es_principal]`,e.es_principal?"true":"false"),e.titulo!==void 0&&r.append(`sliders[${i}][titulo]`,e.titulo||""),e.descripcion!==void 0&&r.append(`sliders[${i}][descripcion]`,e.descripcion||""),e.imagen instanceof File&&r.append(`sliders[${i}][imagen]`,e.imagen)}),s.horarios&&Array.isArray(s.horarios)&&s.horarios.forEach((e,i)=>{e.id&&r.append(`horarios[${i}][id]`,e.id),r.append(`horarios[${i}][dia_semana]`,e.dia_semana),r.append(`horarios[${i}][hora_inicio]`,e.hora_inicio),r.append(`horarios[${i}][hora_fin]`,e.hora_fin),e.activo!==void 0&&r.append(`horarios[${i}][activo]`,e.activo?"true":"false")}),s.categorias&&Array.isArray(s.categorias)&&s.categorias.forEach(e=>{let i=typeof e=="object"?e.id:e;i!=null&&r.append("categorias[]",String(i))}),s.deleted_sliders&&Array.isArray(s.deleted_sliders)&&s.deleted_sliders.forEach(e=>{r.append("deleted_sliders[]",e.toString())}),r}filterReservas(s,r){let e=new a;return Object.keys(r).forEach(i=>{r[i]!==void 0&&(e=e.set(i,r[i].toString()))}),this.http.get(`${this.API_URL}/mis-emprendimientos/${s}/reservas`,{params:e}).pipe(n(i=>i.data))}searchPlanes(s,r){let e=new a().set("q",r);return this.http.get(`${this.API_URL}/emprendedores/${s}/planes`,{params:e}).pipe(n(i=>i.data||[]))}getEstadisticasConsolidadas(s,r){let e=new a().set("fecha_inicio",r.fecha_inicio).set("fecha_fin",r.fecha_fin);return this.http.get(`${this.API_URL}/mis-emprendimientos/${s}/estadisticas`,{params:e}).pipe(n(i=>i.data))}exportReservasCSV(s,r){let e=new a;return r&&Object.keys(r).forEach(i=>{r[i]!==void 0&&(e=e.set(i,r[i].toString()))}),this.http.get(`${this.API_URL}/mis-emprendimientos/${s}/reservas/export`,{params:e,responseType:"blob"})}getNotificaciones(s){return this.http.get(`${this.API_URL}/mis-emprendimientos/${s}/notificaciones`).pipe(n(r=>r.data))}handleError(s){throw console.error("Error en EmprendimientoAdminService:",s),s}static \u0275fac=function(r){return new(r||p)};static \u0275prov=o({token:p,factory:p.\u0275fac,providedIn:"root"})};export{h as a};
