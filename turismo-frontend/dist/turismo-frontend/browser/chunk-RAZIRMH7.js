import{a as Qe}from"./chunk-NVD2A2MX.js";import{a as D}from"./chunk-XKQSEP7P.js";import{a as Ye}from"./chunk-ZMYNNKPK.js";import{a as O}from"./chunk-JPXMOWFC.js";import{a as G}from"./chunk-UD255BT3.js";import{a as Ne,b as q,c as I,d as W,e as ze,h as be,i as Ue,j as Re,l as $e,o as Be,p as ke,q as Se,r as Ee,t as Oe,x as qe,y as Ce,z as We}from"./chunk-DV54EIF6.js";import{d as $,f as B,g as H}from"./chunk-ZI6AQ4XN.js";import{Ga as A,Gb as o,Hb as b,Hc as j,Ib as k,La as d,Lb as z,Mb as U,Nb as R,Nc as Ge,Pc as De,Qb as V,Rb as fe,Sc as ye,Va as P,Vb as je,_ as S,_a as _,fb as x,ga as v,ha as y,hb as C,ia as p,ib as Le,ja as g,jb as h,kb as Pe,mb as w,nb as M,ob as t,pb as i,qb as s,tb as E,ub as f,uc as ve,vb as c,wc as He,yb as Te,zb as _e}from"./chunk-T2OCC6GX.js";import{a as L,b as N}from"./chunk-4CLCTAJ7.js";var it=n=>["/admin/emprendedores/edit",n],rt=n=>["/admin/emprendedores",n,"servicios"],nt=n=>["/admin/emprendedores",n,"asignaradministrador"],ot=n=>["/admin/reservas/emprendedor",n],at=(n,r,e,a,l,m,F,T)=>({"bg-primary-50":n,"dark:bg-primary-900/40":r,"text-primary-600":e,"dark:text-primary-300":a,"text-gray-700":l,"dark:text-gray-300":m,"hover:bg-gray-50":F,"dark:hover:bg-gray-650":T}),Xe=(n,r)=>r.id;function dt(n,r){if(n&1&&(t(0,"option",26),o(1),i()),n&2){let e=r.$implicit;x("ngValue",e.id),d(),b(e.nombre)}}function lt(n,r){n&1&&(t(0,"div",31),s(1,"div",33),t(2,"span",34),o(3,"Cargando emprendedores..."),i()())}function st(n,r){n&1&&(t(0,"div",32),p(),t(1,"svg",35),s(2,"path",36),i(),g(),t(3,"h3",37),o(4,"No se encontraron emprendedores"),i(),t(5,"p",38),o(6,"Comience creando un nuevo emprendedor."),i(),t(7,"div",39)(8,"a",40),p(),t(9,"svg",41),s(10,"path",7),i(),o(11," Nuevo Emprendedor "),i()()())}function mt(n,r){if(n&1&&s(0,"img",56),n&2){let e=c().$implicit,a=c(2);_e("alt","Imagen de ",e.nombre,""),x("src",a.getEmprendedorImage(e),A)}}function ct(n,r){if(n&1&&(t(0,"div",57)(1,"span",81),o(2),i()()),n&2){let e=c().$implicit,a=c(2);d(2),b(a.getEmprendedorInitials(e))}}function pt(n,r){if(n&1&&o(0),n&2){let e=c().$implicit;k(" ",e.asociacion.nombre," ")}}function ut(n,r){n&1&&(t(0,"span",65),o(1,"Sin asociaci\xF3n"),i())}function gt(n,r){if(n&1){let e=E();t(0,"tr",51)(1,"td",53)(2,"div",54)(3,"div",55),_(4,mt,1,3,"img",56)(5,ct,3,1,"div",57),i(),t(6,"div",58)(7,"div",59),o(8),i(),t(9,"div",60),o(10),i()()()(),t(11,"td",53)(12,"div",61),o(13),i()(),t(14,"td",62)(15,"div",63),o(16),i()(),t(17,"td",64)(18,"div",61),_(19,pt,1,1)(20,ut,2,0,"span",65),i()(),t(21,"td",66)(22,"span",67),o(23),i()(),t(24,"td",68)(25,"div",69)(26,"a",70),p(),t(27,"svg",71),s(28,"path",72),i()(),g(),t(29,"a",73),p(),t(30,"svg",71),s(31,"path",74),i()(),g(),t(32,"a",75),p(),t(33,"svg",71),s(34,"path",76),i()(),g(),t(35,"a",77),p(),t(36,"svg",71),s(37,"path",78),i()(),g(),t(38,"button",79),f("click",function(){let l=v(e).$implicit,m=c(2);return y(m.deleteEmprendedor(l))}),p(),t(39,"svg",71),s(40,"path",80),i()()()()()}if(n&2){let e=r.$implicit,a=c(2);d(4),h(a.getEmprendedorImage(e)?4:5),d(4),b(e.nombre),d(2),b(e.email),d(3),b(e.tipo_servicio),d(3),b(e.ubicacion),d(3),h(e.asociacion?19:20),d(4),k(" ",e.categoria," "),d(3),x("routerLink",V(11,it,e.id)),d(3),x("routerLink",V(13,rt,e.id)),d(3),x("routerLink",V(15,nt,e.id)),d(3),x("routerLink",V(17,ot,e.id))}}function xt(n,r){if(n&1){let e=E();t(0,"button",93),f("click",function(){v(e);let l=c().$implicit,m=c(3);return y(m.goToPage(+l.label))}),o(1),i()}if(n&2){let e=c().$implicit,a=c(3);x("ngClass",je(3,at,e.active&&!a.isDarkMode(),e.active&&a.isDarkMode(),e.active&&!a.isDarkMode(),e.active&&a.isDarkMode(),!e.active&&!a.isDarkMode(),!e.active&&a.isDarkMode(),!e.active&&!a.isDarkMode(),!e.active&&a.isDarkMode()))("disabled",e.active),d(),k(" ",e.label," ")}}function ht(n,r){if(n&1&&_(0,xt,2,12,"button",92),n&2){let e=r.$implicit,a=c(3);h(e.label!=="&laquo; Previous"&&e.label!=="Next &raquo;"&&a.isValidPageNumber(e.label)?0:-1)}}function _t(n,r){if(n&1){let e=E();t(0,"div",52)(1,"div",82)(2,"div")(3,"p",83),o(4," Mostrando "),t(5,"span",84),o(6),i(),o(7," a "),t(8,"span",84),o(9),i(),o(10," de "),t(11,"span",84),o(12),i(),o(13," resultados "),i()(),t(14,"div",85)(15,"nav",86)(16,"button",87),f("click",function(){v(e);let l=c(2);return y(l.goToPage(l.currentPage-1))}),t(17,"span",88),o(18,"Anterior"),i(),p(),t(19,"svg",71),s(20,"path",89),i()(),w(21,ht,1,1,null,null,Pe),g(),t(23,"button",90),f("click",function(){v(e);let l=c(2);return y(l.goToPage(l.currentPage+1))}),t(24,"span",88),o(25,"Siguiente"),i(),p(),t(26,"svg",71),s(27,"path",91),i()()()()()()}if(n&2){let e=c(2);d(6),b(e.pagination.from||0),d(3),b(e.pagination.to||0),d(3),b(e.pagination.total),d(4),C("opacity-50",!e.pagination.prev_page_url)("cursor-not-allowed",!e.pagination.prev_page_url),x("disabled",!e.pagination.prev_page_url),d(5),M(e.pagination.links),d(2),C("opacity-50",!e.pagination.next_page_url)("cursor-not-allowed",!e.pagination.next_page_url),x("disabled",!e.pagination.next_page_url)}}function ft(n,r){if(n&1&&(t(0,"div",42)(1,"table",43)(2,"thead",44)(3,"tr")(4,"th",45),o(5,"Emprendedor"),i(),t(6,"th",45),o(7,"Tipo de Servicio"),i(),t(8,"th",46),o(9,"Ubicaci\xF3n"),i(),t(10,"th",47),o(11,"Asociaci\xF3n"),i(),t(12,"th",48),o(13,"Categor\xEDa"),i(),t(14,"th",49),o(15,"Acciones"),i()()(),t(16,"tbody",50),w(17,gt,41,19,"tr",51,Xe),i()()(),_(19,_t,28,13,"div",52)),n&2){let e=c();d(17),M(e.pagination.data),d(2),h(e.pagination?19:-1)}}var we=class n{turismoService=S(G);themeService=S(O);pagination=null;asociaciones=[];loading=!0;searchTerm="";selectedCategoria="";selectedAsociacionId=null;currentPage=1;itemsPerPage=10;ngOnInit(){this.loadAsociaciones(),this.loadEmprendedores()}loadAsociaciones(){this.turismoService.getAsociaciones(1,100).subscribe({next:r=>{this.asociaciones=r.data},error:r=>{console.error("Error al cargar asociaciones:",r)}})}loadEmprendedores(){this.loading=!0,this.turismoService.getEmprendedores(this.currentPage,this.itemsPerPage).subscribe({next:r=>{this.pagination=r,this.loading=!1,(this.searchTerm||this.selectedCategoria||this.selectedAsociacionId!==null)&&this.filterResultsLocally()},error:r=>{console.error("Error al cargar emprendedores:",r),this.loading=!1}})}getEmprendedorImage(r){if(r.sliders_principales&&r.sliders_principales.length>0)return r.sliders_principales[0].url_completa||null;if(r.imagenes){if(typeof r.imagenes=="string")try{let e=JSON.parse(r.imagenes);if(Array.isArray(e)&&e.length>0)return e[0].startsWith("http")?e[0]:`${this.getBaseStorageUrl()}/${e[0]}`}catch{return r.imagenes}else if(Array.isArray(r.imagenes)&&r.imagenes.length>0)return r.imagenes[0]}return null}getBaseStorageUrl(){return`${this.turismoService.API_URL||"http://127.0.0.1:8000"}/storage`}filterResultsLocally(){if(!this.pagination||!this.pagination.data)return;let e=[...this.pagination.data];if(this.searchTerm){let a=this.searchTerm.toLowerCase();e=e.filter(l=>l.nombre?.toLowerCase().includes(a)||l.descripcion?.toLowerCase().includes(a))}this.selectedCategoria&&(e=e.filter(a=>a.categoria===this.selectedCategoria)),this.selectedAsociacionId!==null&&(this.selectedAsociacionId===0?e=e.filter(a=>!a.asociacion_id):e=e.filter(a=>a.asociacion_id===this.selectedAsociacionId)),this.pagination&&(this.pagination=N(L({},this.pagination),{data:e,total:e.length,from:e.length>0?1:0,to:e.length}))}getEmprendedorInitials(r){if(!r.nombre)return"";let e=r.nombre.split(" ");return e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[1].charAt(0)).toUpperCase()}applyFilters(){this.currentPage=1,this.loadEmprendedores()}deleteEmprendedor(r){r.id&&confirm(`\xBFEst\xE1 seguro de eliminar el emprendedor "${r.nombre}"? Esta acci\xF3n eliminar\xE1 tambi\xE9n todos los servicios relacionados y no se puede deshacer.`)&&this.turismoService.deleteEmprendedor(r.id).subscribe({next:()=>{this.loadEmprendedores(),alert("Emprendedor eliminado correctamente")},error:e=>{console.error("Error al eliminar emprendedor:",e),alert("Error al eliminar el emprendedor. Por favor, intente nuevamente.")}})}goToPage(r){this.pagination&&(r<1||r>this.pagination.last_page||(this.currentPage=r,this.loadEmprendedores()))}isDarkMode(){return this.themeService.isDarkMode()}isValidPageNumber(r){return!isNaN(+r)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-emprendedor-list"]],decls:60,vars:6,consts:[["title","Gesti\xF3n de Emprendedores","subtitle","Administra y gestiona los emprendedores de tu organizaci\xF3n"],[1,"container","mx-auto","px-2","sm:px-4","py-6","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-6"],[1,"text-xl","sm:text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-4","sm:mt-0"],["routerLink","/admin/emprendedores/create",1,"inline-flex","items-center","rounded-md","bg-primary-600","dark:bg-primary-700","px-3","py-2","text-sm","font-medium","text-white","hover:bg-primary-700","dark:hover:bg-primary-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","focus:ring-offset-gray-900","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-0.5","mr-1.5","h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"rounded-lg","bg-white","dark:bg-gray-800","p-4","sm:p-6","shadow-sm","transition-colors","duration-200","mb-6"],[1,"grid","grid-cols-1","gap-4","md:grid-cols-4"],["for","search",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"mt-1"],["type","text","id","search","placeholder","Nombre o descripci\xF3n",1,"input-estilo","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-primary-500","dark:focus:border-primary-400","focus:ring-primary-500","dark:focus:ring-primary-400","sm:text-sm","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","transition-colors","duration-200",3,"ngModelChange","ngModel"],["for","categoria",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","categoria",1,"select-estilo","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-primary-500","dark:focus:border-primary-400","focus:ring-primary-500","dark:focus:ring-primary-400","sm:text-sm","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","transition-colors","duration-200",3,"ngModelChange","ngModel"],["value",""],["value","Artesan\xEDa"],["value","Gastronom\xEDa"],["value","Alojamiento"],["value","Gu\xEDa"],["value","Transporte"],["value","Actividades"],["value","Alimentaci\xF3n"],["value","Otro"],["for","asociacion_id",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","asociacion_id",1,"select-estilo","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","shadow-sm","focus:border-primary-500","dark:focus:border-primary-400","focus:ring-primary-500","dark:focus:ring-primary-400","sm:text-sm","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","transition-colors","duration-200",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"flex","items-end"],["type","button",1,"inline-flex","items-center","rounded-md","bg-primary-600","dark:bg-primary-700","px-3","py-2","text-sm","font-medium","text-white","hover:bg-primary-700","dark:hover:bg-primary-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","focus:ring-offset-gray-900","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"],[1,"rounded-lg","bg-white","dark:bg-gray-800","shadow-sm","overflow-hidden","transition-colors","duration-200"],[1,"flex","justify-center","items-center","p-8"],[1,"p-8","text-center"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","dark:border-primary-600","border-r-transparent"],[1,"ml-4","text-gray-900","dark:text-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400","dark:text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"mt-2","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400"],[1,"mt-6"],["routerLink","/admin/emprendedores/create",1,"inline-flex","items-center","rounded-md","bg-primary-600","dark:bg-primary-700","px-4","py-2","text-sm","font-medium","text-white","hover:bg-primary-700","dark:hover:bg-primary-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","focus:ring-offset-gray-900","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700","transition-colors","duration-200"],[1,"bg-gray-50","dark:bg-gray-700"],["scope","col",1,"px-3","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider"],["scope","col",1,"hidden","md:table-cell","px-3","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider"],["scope","col",1,"hidden","lg:table-cell","px-3","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider"],["scope","col",1,"hidden","sm:table-cell","px-3","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider"],["scope","col",1,"px-3","py-3","text-right","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"hover:bg-gray-50","dark:hover:bg-gray-750","transition-colors","duration-150"],[1,"bg-white","dark:bg-gray-800","px-3","py-3","flex","items-center","justify-between","border-t","border-gray-200","dark:border-gray-700","transition-colors","duration-200","sm:px-4"],[1,"px-3","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"h-10","w-10","flex-shrink-0","rounded-full","overflow-hidden","bg-gray-100","dark:bg-gray-700"],[1,"h-full","w-full","object-cover",3,"src","alt"],[1,"h-full","w-full","flex","items-center","justify-center","bg-primary-100","dark:bg-primary-900/40"],[1,"ml-3"],[1,"text-sm","font-medium","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-sm","text-gray-900","dark:text-white"],[1,"hidden","md:table-cell","px-3","py-4"],[1,"text-sm","text-gray-500","dark:text-gray-400","max-w-[200px]","truncate"],[1,"hidden","lg:table-cell","px-3","py-4","whitespace-nowrap"],[1,"text-gray-500","dark:text-gray-400"],[1,"hidden","sm:table-cell","px-3","py-4","whitespace-nowrap"],[1,"inline-flex","rounded-full","bg-green-100","dark:bg-green-900/40","px-2","py-0.5","text-xs","font-medium","text-green-800","dark:text-green-300","transition-colors","duration-200"],[1,"px-3","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","items-center","justify-end","space-x-1","sm:space-x-2"],["title","Editar",1,"text-primary-600","dark:text-primary-400","hover:text-primary-900","dark:hover:text-primary-300","transition-colors","duration-200",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Ver servicios",1,"text-green-600","dark:text-green-400","hover:text-green-900","dark:hover:text-green-300","transition-colors","duration-200",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],["title","Asignar administrador",1,"text-blue-600","dark:text-blue-400","hover:text-blue-900","dark:hover:text-blue-300","transition-colors","duration-200",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],["title","Ver reservas",1,"hidden","sm:inline-block","text-purple-600","dark:text-purple-400","hover:text-purple-900","dark:hover:text-purple-300","transition-colors","duration-200",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["title","Eliminar",1,"text-red-600","dark:text-red-400","hover:text-red-900","dark:hover:text-red-300","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-primary-800","dark:text-primary-300","font-medium"],[1,"flex","sm:flex-1","sm:flex","sm:items-center","sm:justify-between","flex-col","sm:flex-row"],[1,"text-sm","text-gray-700","dark:text-gray-300"],[1,"font-medium"],[1,"mt-2","sm:mt-0"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-sm","font-medium","text-gray-500","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-650","transition-colors","duration-200",3,"click","disabled"],[1,"sr-only"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-sm","font-medium","text-gray-500","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-650","transition-colors","duration-200",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-sm","font-medium","transition-colors","duration-200",3,"ngClass","disabled"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-sm","font-medium","transition-colors","duration-200",3,"click","ngClass","disabled"]],template:function(e,a){e&1&&(s(0,"app-admin-header",0),t(1,"div",1)(2,"div",2)(3,"h1",3),o(4,"Gesti\xF3n de Emprendedores"),i(),t(5,"div",4)(6,"a",5),p(),t(7,"svg",6),s(8,"path",7),i(),o(9," Nuevo Emprendedor "),i()()(),g(),t(10,"div",8)(11,"div",9)(12,"div")(13,"label",10),o(14,"Buscar"),i(),t(15,"div",11)(16,"input",12),R("ngModelChange",function(m){return U(a.searchTerm,m)||(a.searchTerm=m),m}),i()()(),t(17,"div")(18,"label",13),o(19,"Categor\xEDa"),i(),t(20,"div",11)(21,"select",14),R("ngModelChange",function(m){return U(a.selectedCategoria,m)||(a.selectedCategoria=m),m}),t(22,"option",15),o(23,"Todas"),i(),t(24,"option",16),o(25,"Artesan\xEDa"),i(),t(26,"option",17),o(27,"Gastronom\xEDa"),i(),t(28,"option",18),o(29,"Alojamiento"),i(),t(30,"option",19),o(31,"Gu\xEDa"),i(),t(32,"option",20),o(33,"Transporte"),i(),t(34,"option",21),o(35,"Actividades"),i(),t(36,"option",22),o(37,"Alimentaci\xF3n"),i(),t(38,"option",23),o(39,"Otro"),i()()()(),t(40,"div")(41,"label",24),o(42,"Asociaci\xF3n"),i(),t(43,"div",11)(44,"select",25),R("ngModelChange",function(m){return U(a.selectedAsociacionId,m)||(a.selectedAsociacionId=m),m}),t(45,"option",26),o(46,"Todas"),i(),t(47,"option",26),o(48,"Sin asociaci\xF3n"),i(),w(49,dt,2,2,"option",26,Xe),i()()(),t(51,"div",27)(52,"button",28),f("click",function(){return a.applyFilters()}),p(),t(53,"svg",6),s(54,"path",29),i(),o(55," Filtrar "),i()()()(),g(),t(56,"div",30),_(57,lt,4,0,"div",31)(58,st,12,0,"div",32)(59,ft,20,1),i()()),e&2&&(d(16),z("ngModel",a.searchTerm),d(5),z("ngModel",a.selectedCategoria),d(23),z("ngModel",a.selectedAsociacionId),d(),x("ngValue",null),d(2),x("ngValue",0),d(2),M(a.asociaciones),d(8),h(a.loading?57:!a.pagination||a.pagination.data.length===0?58:59))},dependencies:[j,ve,H,Ce,Se,Ee,q,ke,W,be,D],encapsulation:2})};var Ie=(n,r)=>({"border-primary-500 text-primary-600 dark:text-primary-400":n,"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600":r}),vt=(n,r)=>r.id;function yt(n,r){n&1&&(t(0,"div",9)(1,"div",11),s(2,"div",12),t(3,"span",13),o(4,"Cargando..."),i()()())}function bt(n,r){n&1&&(t(0,"p",40),p(),t(1,"svg",89),s(2,"path",90),i(),o(3," El nombre es obligatorio "),i())}function kt(n,r){n&1&&(t(0,"p",40),p(),t(1,"svg",89),s(2,"path",90),i(),o(3," El tipo de servicio es obligatorio "),i())}function St(n,r){n&1&&(t(0,"p",40),p(),t(1,"svg",89),s(2,"path",90),i(),o(3," La descripci\xF3n es obligatoria "),i())}function Et(n,r){n&1&&(t(0,"p",40),p(),t(1,"svg",89),s(2,"path",90),i(),o(3," La categor\xEDa es obligatoria "),i())}function Ct(n,r){if(n&1&&(t(0,"option",70),o(1),i()),n&2){let e=r.$implicit;x("ngValue",e.id),d(),b(e.nombre)}}function wt(n,r){n&1&&(t(0,"p",40),p(),t(1,"svg",89),s(2,"path",90),i(),o(3," La ubicaci\xF3n es obligatoria "),i())}function Mt(n,r){n&1&&(t(0,"p",40),p(),t(1,"svg",89),s(2,"path",90),i(),o(3," El tel\xE9fono es obligatorio "),i())}function Ft(n,r){n&1&&(t(0,"p",40),p(),t(1,"svg",89),s(2,"path",90),i(),o(3," El email es obligatorio y debe ser v\xE1lido "),i())}function Tt(n,r){if(n&1&&(t(0,"div",25)(1,"div")(2,"h2",29),p(),t(3,"svg",30),s(4,"path",31),i(),o(5," Informaci\xF3n B\xE1sica "),i(),g(),t(6,"div",32)(7,"div",33)(8,"label",34),o(9,"Nombre del Emprendimiento"),i(),t(10,"div",35)(11,"div",36),p(),t(12,"svg",37),s(13,"path",38),i()(),g(),s(14,"input",39),i(),_(15,bt,4,0,"p",40),i(),t(16,"div",41)(17,"label",42),o(18,"Tipo de Servicio"),i(),t(19,"div",35)(20,"div",36),p(),t(21,"svg",37),s(22,"path",43),i()(),g(),t(23,"select",44)(24,"option",45),o(25,"Seleccione tipo"),i(),t(26,"option",46),o(27,"Artesan\xEDa"),i(),t(28,"option",47),o(29,"Gastronom\xEDa"),i(),t(30,"option",48),o(31,"Alojamiento"),i(),t(32,"option",49),o(33,"Transporte"),i(),t(34,"option",50),o(35,"Gu\xEDa Tur\xEDstico"),i(),t(36,"option",51),o(37,"Alimentaci\xF3n"),i(),t(38,"option",52),o(39,"Actividades"),i(),t(40,"option",53),o(41,"Otro"),i()(),t(42,"div",54),p(),t(43,"svg",37),s(44,"path",55),i()()(),_(45,kt,4,0,"p",40),i(),g(),t(46,"div",56)(47,"label",57),o(48,"Descripci\xF3n"),i(),t(49,"div",35)(50,"div",58),p(),t(51,"svg",37),s(52,"path",59),i()(),g(),s(53,"textarea",60),i(),_(54,St,4,0,"p",40),i(),t(55,"div",61)(56,"label",62),o(57,"Categor\xEDa"),i(),t(58,"div",35)(59,"div",36),p(),t(60,"svg",37),s(61,"path",63),i()(),g(),t(62,"select",64)(63,"option",45),o(64,"Seleccione categor\xEDa"),i(),t(65,"option",46),o(66,"Artesan\xEDa"),i(),t(67,"option",47),o(68,"Gastronom\xEDa"),i(),t(69,"option",48),o(70,"Alojamiento"),i(),t(71,"option",65),o(72,"Aventura"),i(),t(73,"option",66),o(74,"Cultural"),i(),t(75,"option",49),o(76,"Transporte"),i(),t(77,"option",51),o(78,"Alimentaci\xF3n"),i(),t(79,"option",52),o(80,"Actividades"),i(),t(81,"option",53),o(82,"Otro"),i()(),t(83,"div",54),p(),t(84,"svg",37),s(85,"path",55),i()()(),_(86,Et,4,0,"p",40),i(),g(),t(87,"div",61)(88,"label",67),o(89,"Asociaci\xF3n"),i(),t(90,"div",35)(91,"div",36),p(),t(92,"svg",37),s(93,"path",68),i()(),g(),t(94,"select",69)(95,"option",70),o(96,"Sin asociaci\xF3n"),i(),w(97,Ct,2,2,"option",70,vt),i(),t(99,"div",54),p(),t(100,"svg",37),s(101,"path",55),i()()()()()(),g(),t(102,"div",71)(103,"h2",29),p(),t(104,"svg",30),s(105,"path",72),i(),o(106," Informaci\xF3n de Contacto "),i(),g(),t(107,"div",32)(108,"div",56)(109,"label",73),o(110,"Ubicaci\xF3n"),i(),t(111,"div",35)(112,"div",36),p(),t(113,"svg",37),s(114,"path",74)(115,"path",75),i()(),g(),s(116,"input",76),i(),_(117,wt,4,0,"p",40),i(),t(118,"div",61)(119,"label",77),o(120,"Tel\xE9fono"),i(),t(121,"div",35)(122,"div",36),p(),t(123,"svg",37),s(124,"path",78),i()(),g(),s(125,"input",79),i(),_(126,Mt,4,0,"p",40),i(),t(127,"div",61)(128,"label",80),o(129,"Email"),i(),t(130,"div",35)(131,"div",36),p(),t(132,"svg",37),s(133,"path",81),i()(),g(),s(134,"input",82),i(),_(135,Ft,4,0,"p",40),i(),t(136,"div",61)(137,"label",83),o(138,"P\xE1gina Web"),i(),t(139,"div",35)(140,"div",36),p(),t(141,"svg",37),s(142,"path",84),i()(),g(),s(143,"input",85),i()(),t(144,"div",61)(145,"label",86),o(146,"Horario de Atenci\xF3n"),i(),t(147,"div",35)(148,"div",36),p(),t(149,"svg",37),s(150,"path",87),i()(),g(),s(151,"input",88),i()()()()()),n&2){let e,a,l,m,F,T,Q,J,K,X,Z,ee,te,ie,re,ne,oe,ae,de,le,se,me,ce,pe,ue,ge,xe,he,u=c(2);d(14),C("border-red-300",((e=u.emprendedorForm.get("nombre"))==null?null:e.invalid)&&((e=u.emprendedorForm.get("nombre"))==null?null:e.touched))("focus:border-red-500",((a=u.emprendedorForm.get("nombre"))==null?null:a.invalid)&&((a=u.emprendedorForm.get("nombre"))==null?null:a.touched))("focus:ring-red-500",((l=u.emprendedorForm.get("nombre"))==null?null:l.invalid)&&((l=u.emprendedorForm.get("nombre"))==null?null:l.touched)),d(),h((m=u.emprendedorForm.get("nombre"))!=null&&m.invalid&&((m=u.emprendedorForm.get("nombre"))!=null&&m.touched)?15:-1),d(8),C("border-red-300",((F=u.emprendedorForm.get("tipo_servicio"))==null?null:F.invalid)&&((F=u.emprendedorForm.get("tipo_servicio"))==null?null:F.touched))("focus:border-red-500",((T=u.emprendedorForm.get("tipo_servicio"))==null?null:T.invalid)&&((T=u.emprendedorForm.get("tipo_servicio"))==null?null:T.touched))("focus:ring-red-500",((Q=u.emprendedorForm.get("tipo_servicio"))==null?null:Q.invalid)&&((Q=u.emprendedorForm.get("tipo_servicio"))==null?null:Q.touched)),d(22),h((J=u.emprendedorForm.get("tipo_servicio"))!=null&&J.invalid&&((J=u.emprendedorForm.get("tipo_servicio"))!=null&&J.touched)?45:-1),d(8),C("border-red-300",((K=u.emprendedorForm.get("descripcion"))==null?null:K.invalid)&&((K=u.emprendedorForm.get("descripcion"))==null?null:K.touched))("focus:border-red-500",((X=u.emprendedorForm.get("descripcion"))==null?null:X.invalid)&&((X=u.emprendedorForm.get("descripcion"))==null?null:X.touched))("focus:ring-red-500",((Z=u.emprendedorForm.get("descripcion"))==null?null:Z.invalid)&&((Z=u.emprendedorForm.get("descripcion"))==null?null:Z.touched)),d(),h((ee=u.emprendedorForm.get("descripcion"))!=null&&ee.invalid&&((ee=u.emprendedorForm.get("descripcion"))!=null&&ee.touched)?54:-1),d(8),C("border-red-300",((te=u.emprendedorForm.get("categoria"))==null?null:te.invalid)&&((te=u.emprendedorForm.get("categoria"))==null?null:te.touched))("focus:border-red-500",((ie=u.emprendedorForm.get("categoria"))==null?null:ie.invalid)&&((ie=u.emprendedorForm.get("categoria"))==null?null:ie.touched))("focus:ring-red-500",((re=u.emprendedorForm.get("categoria"))==null?null:re.invalid)&&((re=u.emprendedorForm.get("categoria"))==null?null:re.touched)),d(24),h((ne=u.emprendedorForm.get("categoria"))!=null&&ne.invalid&&((ne=u.emprendedorForm.get("categoria"))!=null&&ne.touched)?86:-1),d(9),x("ngValue",null),d(2),M(u.asociaciones),d(19),C("border-red-300",((oe=u.emprendedorForm.get("ubicacion"))==null?null:oe.invalid)&&((oe=u.emprendedorForm.get("ubicacion"))==null?null:oe.touched))("focus:border-red-500",((ae=u.emprendedorForm.get("ubicacion"))==null?null:ae.invalid)&&((ae=u.emprendedorForm.get("ubicacion"))==null?null:ae.touched))("focus:ring-red-500",((de=u.emprendedorForm.get("ubicacion"))==null?null:de.invalid)&&((de=u.emprendedorForm.get("ubicacion"))==null?null:de.touched)),d(),h((le=u.emprendedorForm.get("ubicacion"))!=null&&le.invalid&&((le=u.emprendedorForm.get("ubicacion"))!=null&&le.touched)?117:-1),d(8),C("border-red-300",((se=u.emprendedorForm.get("telefono"))==null?null:se.invalid)&&((se=u.emprendedorForm.get("telefono"))==null?null:se.touched))("focus:border-red-500",((me=u.emprendedorForm.get("telefono"))==null?null:me.invalid)&&((me=u.emprendedorForm.get("telefono"))==null?null:me.touched))("focus:ring-red-500",((ce=u.emprendedorForm.get("telefono"))==null?null:ce.invalid)&&((ce=u.emprendedorForm.get("telefono"))==null?null:ce.touched)),d(),h((pe=u.emprendedorForm.get("telefono"))!=null&&pe.invalid&&((pe=u.emprendedorForm.get("telefono"))!=null&&pe.touched)?126:-1),d(8),C("border-red-300",((ue=u.emprendedorForm.get("email"))==null?null:ue.invalid)&&((ue=u.emprendedorForm.get("email"))==null?null:ue.touched))("focus:border-red-500",((ge=u.emprendedorForm.get("email"))==null?null:ge.invalid)&&((ge=u.emprendedorForm.get("email"))==null?null:ge.touched))("focus:ring-red-500",((xe=u.emprendedorForm.get("email"))==null?null:xe.invalid)&&((xe=u.emprendedorForm.get("email"))==null?null:xe.touched)),d(),h((he=u.emprendedorForm.get("email"))!=null&&he.invalid&&((he=u.emprendedorForm.get("email"))!=null&&he.touched)?135:-1)}}function At(n,r){if(n&1){let e=E();t(0,"div",25)(1,"div")(2,"h2",29),p(),t(3,"svg",30),s(4,"path",91),i(),o(5," Detalles del Negocio "),i(),g(),t(6,"div",32)(7,"div",41)(8,"label",92),o(9,"Rango de Precios"),i(),t(10,"div",35)(11,"div",36),p(),t(12,"svg",37),s(13,"path",93),i()(),g(),s(14,"input",94),i()(),t(15,"div",41)(16,"label",95),o(17,"Capacidad de Aforo"),i(),t(18,"div",35)(19,"div",36),p(),t(20,"svg",37),s(21,"path",96),i()(),g(),s(22,"input",97),i()(),t(23,"div",41)(24,"label",98),o(25,"Personas que Atiende"),i(),t(26,"div",35)(27,"div",36),p(),t(28,"svg",37),s(29,"path",68),i()(),g(),s(30,"input",99),i()(),t(31,"div",56)(32,"label",100),p(),t(33,"svg",30),s(34,"path",101),i(),o(35," M\xE9todos de Pago "),i(),g(),t(36,"div",102)(37,"div",103)(38,"div",104)(39,"input",105),f("change",function(l){v(e);let m=c(2);return y(m.togglePaymentMethod("Efectivo",l))}),i(),t(40,"label",106),o(41,"Efectivo"),i()(),t(42,"div",104)(43,"input",107),f("change",function(l){v(e);let m=c(2);return y(m.togglePaymentMethod("Tarjeta",l))}),i(),t(44,"label",108),o(45,"Tarjeta de Cr\xE9dito/D\xE9bito"),i()(),t(46,"div",104)(47,"input",109),f("change",function(l){v(e);let m=c(2);return y(m.togglePaymentMethod("Transferencia",l))}),i(),t(48,"label",110),o(49,"Transferencia Bancaria"),i()(),t(50,"div",104)(51,"input",111),f("change",function(l){v(e);let m=c(2);return y(m.togglePaymentMethod("Yape",l))}),i(),t(52,"label",112),o(53,"Yape"),i()(),t(54,"div",104)(55,"input",113),f("change",function(l){v(e);let m=c(2);return y(m.togglePaymentMethod("Plin",l))}),i(),t(56,"label",114),o(57,"Plin"),i()()()()(),t(58,"div",56)(59,"label",100),p(),t(60,"svg",30),s(61,"path",115),i(),o(62," Idiomas Hablados "),i(),g(),t(63,"div",102)(64,"div",103)(65,"div",104)(66,"input",116),f("change",function(l){v(e);let m=c(2);return y(m.toggleLanguage("Espa\xF1ol",l))}),i(),t(67,"label",117),o(68,"Espa\xF1ol"),i()(),t(69,"div",104)(70,"input",118),f("change",function(l){v(e);let m=c(2);return y(m.toggleLanguage("Ingl\xE9s",l))}),i(),t(71,"label",119),o(72,"Ingl\xE9s"),i()(),t(73,"div",104)(74,"input",120),f("change",function(l){v(e);let m=c(2);return y(m.toggleLanguage("Quechua",l))}),i(),t(75,"label",121),o(76,"Quechua"),i()(),t(77,"div",104)(78,"input",122),f("change",function(l){v(e);let m=c(2);return y(m.toggleLanguage("Aymara",l))}),i(),t(79,"label",123),o(80,"Aymara"),i()()()()(),t(81,"div",61)(82,"label",124),o(83,"Opciones de Acceso"),i(),t(84,"div",35)(85,"div",36),p(),t(86,"svg",37),s(87,"path",125),i()(),g(),s(88,"input",126),i()(),t(89,"div",61)(90,"div",127)(91,"div",19),s(92,"input",128),t(93,"label",129),o(94," Cuenta con facilidades para personas con discapacidad "),i()()()()()()()}if(n&2){let e=c(2);d(39),x("checked",e.hasPaymentMethod("Efectivo")),d(4),x("checked",e.hasPaymentMethod("Tarjeta")),d(4),x("checked",e.hasPaymentMethod("Transferencia")),d(4),x("checked",e.hasPaymentMethod("Yape")),d(4),x("checked",e.hasPaymentMethod("Plin")),d(11),x("checked",e.hasLanguage("Espa\xF1ol")),d(4),x("checked",e.hasLanguage("Ingl\xE9s")),d(4),x("checked",e.hasLanguage("Quechua")),d(4),x("checked",e.hasLanguage("Aymara"))}}function Vt(n,r){if(n&1){let e=E();t(0,"div",25)(1,"app-slider-upload",130),f("changeSlidersEvent",function(l){v(e);let m=c(2);return y(m.onSlidersPrincipalesChange(l))})("deletedSlidersEvent",function(l){v(e);let m=c(2);return y(m.onDeletedSlidersPrincipalesChange(l))}),i(),t(2,"app-slider-upload",131),f("changeSlidersEvent",function(l){v(e);let m=c(2);return y(m.onSlidersSecundariosChange(l))})("deletedSlidersEvent",function(l){v(e);let m=c(2);return y(m.onDeletedSlidersSecundariosChange(l))}),i()()}if(n&2){let e=c(2);d(),x("slidersFormArray",e.slidersPrincipalesArray)("existingSliders",e.slidersPrincipales)("isSliderPrincipal",!0),d(),x("slidersFormArray",e.slidersSecundariosArray)("existingSliders",e.slidersSecundarios)("isSliderPrincipal",!1)}}function It(n,r){n&1&&(p(),t(0,"svg",132),s(1,"circle",133)(2,"path",134),i(),o(3," Guardando... "))}function Lt(n,r){if(n&1&&o(0),n&2){let e=c(2);k(" ",e.isEditMode?"Actualizar":"Crear"," Emprendedor ")}}function Pt(n,r){if(n&1){let e=E();t(0,"form",14),f("ngSubmit",function(){v(e);let l=c();return y(l.submitForm())}),t(1,"div",15)(2,"div",16)(3,"nav",17)(4,"button",18),f("click",function(){v(e);let l=c();return y(l.activeTab="informacion-basica")}),t(5,"div",19),p(),t(6,"svg",20),s(7,"path",21),i(),o(8," Informaci\xF3n B\xE1sica "),i()(),g(),t(9,"button",18),f("click",function(){v(e);let l=c();return y(l.activeTab="detalles-negocio")}),t(10,"div",19),p(),t(11,"svg",20),s(12,"path",22),i(),o(13," Detalles del Negocio "),i()(),g(),t(14,"button",18),f("click",function(){v(e);let l=c();return y(l.activeTab="imagenes")}),t(15,"div",19),p(),t(16,"svg",20),s(17,"path",23),i(),o(18," Im\xE1genes "),i()()()(),g(),t(19,"div",24),_(20,Tt,152,50,"div",25)(21,At,95,9,"div",25)(22,Vt,3,6,"div",25),i(),t(23,"div",26)(24,"button",27),f("click",function(){v(e);let l=c();return y(l.cancel())}),o(25," Cancelar "),i(),t(26,"button",28),_(27,It,4,0)(28,Lt,1,1),i()()()()}if(n&2){let e=c();x("formGroup",e.emprendedorForm),d(4),x("ngClass",fe(13,Ie,e.activeTab==="informacion-basica",e.activeTab!=="informacion-basica")),d(5),x("ngClass",fe(16,Ie,e.activeTab==="detalles-negocio",e.activeTab!=="detalles-negocio")),d(5),x("ngClass",fe(19,Ie,e.activeTab==="imagenes",e.activeTab!=="imagenes")),d(6),h(e.activeTab==="informacion-basica"?20:-1),d(),h(e.activeTab==="detalles-negocio"?21:-1),d(),h(e.activeTab==="imagenes"?22:-1),d(4),C("opacity-50",e.emprendedorForm.invalid||e.isSubmitting)("cursor-not-allowed",e.emprendedorForm.invalid||e.isSubmitting),x("disabled",e.emprendedorForm.invalid||e.isSubmitting),d(),h(e.isSubmitting?27:28)}}var Y=class n{fb=S(qe);turismoService=S(G);route=S($);router=S(B);themeService=S(O);emprendedorForm;emprendedor=null;asociaciones=[];slidersPrincipales=[];slidersSecundarios=[];deletedSlidersPrincipales=[];deletedSlidersSecundarios=[];loading=!0;isSubmitting=!1;isEditMode=!1;emprendedorId=null;paymentMethods=[];languages=[];activeTab="informacion-basica";get slidersPrincipalesArray(){return this.emprendedorForm.get("sliders_principales")}get slidersSecundariosArray(){return this.emprendedorForm.get("sliders_secundarios")}isDarkMode(){return this.themeService.isDarkMode()}ngOnInit(){this.initForm(),this.loadAsociaciones();let r=this.route.snapshot.paramMap.get("id");if(r)this.isEditMode=!0,this.emprendedorId=+r,this.loadEmprendedor(this.emprendedorId);else{this.loading=!1;let e=this.route.snapshot.queryParams.asociacion_id;e&&this.emprendedorForm.patchValue({asociacion_id:+e})}}initForm(){this.emprendedorForm=this.fb.group({nombre:["",[I.required]],tipo_servicio:["",[I.required]],descripcion:["",[I.required]],ubicacion:["",[I.required]],telefono:["",[I.required]],email:["",[I.required,I.email]],pagina_web:[""],horario_atencion:[""],precio_rango:[""],capacidad_aforo:[null],numero_personas_atiende:[null],categoria:["",[I.required]],opciones_acceso:[""],facilidades_discapacidad:[!1],asociacion_id:[null],sliders_principales:this.fb.array([]),sliders_secundarios:this.fb.array([])})}loadAsociaciones(){this.turismoService.getAsociaciones(1,100).subscribe({next:r=>{this.asociaciones=r.data},error:r=>{console.error("Error al cargar asociaciones:",r)}})}loadEmprendedor(r){this.loading=!0,this.turismoService.getEmprendedor(r).subscribe({next:e=>{console.log("Emprendedor cargado:",e),this.emprendedor=e,this.paymentMethods=e.metodos_pago||[],this.languages=e.idiomas_hablados||[],this.emprendedorForm.patchValue({nombre:e.nombre,tipo_servicio:e.tipo_servicio,descripcion:e.descripcion,ubicacion:e.ubicacion,telefono:e.telefono,email:e.email,pagina_web:e.pagina_web,horario_atencion:e.horario_atencion,precio_rango:e.precio_rango,capacidad_aforo:e.capacidad_aforo,numero_personas_atiende:e.numero_personas_atiende,categoria:e.categoria,opciones_acceso:e.opciones_acceso,facilidades_discapacidad:e.facilidades_discapacidad,asociacion_id:e.asociacion_id}),this.slidersPrincipales=[],this.slidersSecundarios=[];let a=e.slidersPrincipales||e.sliders_principales||[];a&&a.length>0&&(console.log("Sliders principales encontrados:",a.length),this.slidersPrincipales=a.map(m=>({id:m.id,nombre:m.nombre,es_principal:!0,orden:m.orden||1,imagen:m.url_completa||"",url_completa:m.url_completa})));let l=e.slidersSecundarios||e.sliders_secundarios||[];l&&l.length>0&&(console.log("Sliders secundarios encontrados:",l.length),this.slidersSecundarios=l.map(m=>{let F="",T="";return m.descripcion&&typeof m.descripcion=="object"&&(F=m.descripcion.titulo||"",T=m.descripcion.descripcion||""),{id:m.id,nombre:m.nombre,es_principal:!1,orden:m.orden||1,imagen:m.url_completa||"",url_completa:m.url_completa,titulo:F,descripcion:T}})),console.log("Sliders principales procesados:",this.slidersPrincipales),console.log("Sliders secundarios procesados:",this.slidersSecundarios),this.loading=!1},error:e=>{console.error("Error al cargar emprendedor:",e),this.loading=!1}})}hasPaymentMethod(r){return this.paymentMethods.includes(r)}togglePaymentMethod(r,e){let a=e.target.checked;a&&!this.hasPaymentMethod(r)?this.paymentMethods.push(r):!a&&this.hasPaymentMethod(r)&&(this.paymentMethods=this.paymentMethods.filter(l=>l!==r))}hasLanguage(r){return this.languages.includes(r)}onDeletedSlidersPrincipalesChange(r){this.deletedSlidersPrincipales=r}onDeletedSlidersSecundariosChange(r){this.deletedSlidersSecundarios=r}toggleLanguage(r,e){let a=e.target.checked;a&&!this.hasLanguage(r)?this.languages.push(r):!a&&this.hasLanguage(r)&&(this.languages=this.languages.filter(l=>l!==r))}onSlidersPrincipalesChange(r){this.slidersPrincipales=r}onSlidersSecundariosChange(r){this.slidersSecundarios=r}submitForm(){if(this.emprendedorForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let r=L({},this.emprendedorForm.value);r.metodos_pago=this.paymentMethods||[],r.idiomas_hablados=this.languages||[],r.sliders_principales=this.slidersPrincipales.map(e=>N(L({},e),{es_principal:!0})),r.sliders_secundarios=this.slidersSecundarios.map(e=>N(L({},e),{es_principal:!1})),r.deleted_sliders=[...this.deletedSlidersPrincipales,...this.deletedSlidersSecundarios],this.isEditMode&&this.emprendedorId?this.turismoService.updateEmprendedor(this.emprendedorId,r).subscribe({next:()=>{this.isSubmitting=!1,alert("Emprendedor actualizado correctamente"),this.router.navigate(["/admin/emprendedores"])},error:e=>{console.error("Error al actualizar emprendedor:",e),this.isSubmitting=!1,alert("Error al actualizar el emprendedor. Por favor, intente nuevamente.")}}):this.turismoService.createEmprendedor(r).subscribe({next:()=>{this.isSubmitting=!1,alert("Emprendedor creado correctamente"),this.router.navigate(["/admin/emprendedores"])},error:e=>{console.error("Error al crear emprendedor:",e),this.isSubmitting=!1,alert("Error al crear el emprendedor. Por favor, intente nuevamente.")}})}cancel(){let r=this.route.snapshot.queryParams.asociacion_id;r?this.router.navigate(["/admin/asociaciones",r,"emprendedores"]):this.router.navigate(["/admin/emprendedores"])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-emprendedor-form"]],decls:15,vars:3,consts:[["title","Gestionar emprendedor","subtitle","Crea o edita un emprendedor para tu municipalidad"],[1,"container","mx-auto","px-4","py-6","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"sm:flex","sm:items-center","sm:justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","transition-colors","duration-200"],[1,"mt-1","text-sm","text-gray-600","dark:text-gray-400","transition-colors","duration-200"],[1,"mt-4","sm:mt-0"],["routerLink","/admin/emprendedores",1,"inline-flex","items-center","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-200","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5","text-gray-500","dark:text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"rounded-lg","bg-white","dark:bg-gray-800","p-6","shadow-sm","transition-colors","duration-200"],[1,"space-y-6",3,"formGroup"],[1,"flex","justify-center","items-center","p-8"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","dark:border-primary-500","border-r-transparent"],[1,"ml-4","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-white","dark:bg-gray-800","shadow-sm","rounded-lg","overflow-hidden","transition-colors","duration-200"],[1,"border-b","border-gray-200","dark:border-gray-700","transition-colors","duration-200"],[1,"-mb-px","flex","space-x-8","px-6","pt-4","overflow-x-auto"],["type","button",1,"pb-4","px-1","border-b-2","font-medium","text-sm","whitespace-nowrap","transition-colors","duration-200",3,"click","ngClass"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mr-2","h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"p-6"],[1,"space-y-6"],[1,"bg-gray-50","dark:bg-gray-700","px-4","py-3","flex","justify-end","sm:px-6","transition-colors","duration-200"],["type","button",1,"inline-flex","items-center","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","mr-3","transition-colors","duration-200",3,"click"],["type","submit",1,"inline-flex","items-center","rounded-md","bg-primary-600","dark:bg-primary-700","px-4","py-2","text-sm","font-medium","text-white","shadow-sm","hover:bg-primary-700","dark:hover:bg-primary-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","transition-colors","duration-200",3,"disabled"],[1,"text-lg","font-medium","text-gray-900","dark:text-white","transition-colors","duration-200","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mr-2","h-5","w-5","text-primary-500","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"mt-4","grid","grid-cols-1","gap-y-6","gap-x-4","sm:grid-cols-6"],[1,"sm:col-span-4"],["for","nombre",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],[1,"mt-1","relative","rounded-md","shadow-sm"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400","dark:text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre del emprendimiento",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],[1,"mt-2","text-sm","text-red-600","dark:text-red-400","transition-colors","duration-200","flex","items-center"],[1,"sm:col-span-2"],["for","tipo_servicio",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.171 2.171a2 2 0 010 2.828l-8.486 8.486a2 2 0 01-2.828 0l-2.171-2.171a2 2 0 010-2.828L7.343 11"],["id","tipo_servicio","formControlName","tipo_servicio",1,"block","w-full","pl-10","pr-10","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],["value","",1,"bg-white","dark:bg-gray-700"],["value","Artesan\xEDa",1,"bg-white","dark:bg-gray-700"],["value","Gastronom\xEDa",1,"bg-white","dark:bg-gray-700"],["value","Alojamiento",1,"bg-white","dark:bg-gray-700"],["value","Transporte",1,"bg-white","dark:bg-gray-700"],["value","Gu\xEDa",1,"bg-white","dark:bg-gray-700"],["value","Alimentaci\xF3n",1,"bg-white","dark:bg-gray-700"],["value","Actividades",1,"bg-white","dark:bg-gray-700"],["value","Otro",1,"bg-white","dark:bg-gray-700"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","pointer-events-none"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 9l4-4 4 4m0 6l-4 4-4-4"],[1,"sm:col-span-6"],["for","descripcion",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],[1,"absolute","top-3","left-3","flex","items-start","pointer-events-none"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h7"],["id","descripcion","formControlName","descripcion","rows","3","placeholder","Describa brevemente el emprendimiento",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],[1,"sm:col-span-3"],["for","categoria",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],["id","categoria","formControlName","categoria",1,"block","w-full","pl-10","pr-10","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],["value","Aventura",1,"bg-white","dark:bg-gray-700"],["value","Cultural",1,"bg-white","dark:bg-gray-700"],["for","asociacion_id",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],["id","asociacion_id","formControlName","asociacion_id",1,"block","w-full","pl-10","pr-10","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],[1,"bg-white","dark:bg-gray-700",3,"ngValue"],[1,"pt-6","border-t","border-gray-200","dark:border-gray-700","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["for","ubicacion",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["type","text","id","ubicacion","formControlName","ubicacion","placeholder","Direcci\xF3n completa",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],["for","telefono",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],["type","text","id","telefono","formControlName","telefono","placeholder","N\xFAmero de contacto",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],["for","email",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"],["type","email","id","email","formControlName","email","placeholder","correo@ejemplo.com",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],["for","pagina_web",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"],["type","url","id","pagina_web","formControlName","pagina_web","placeholder","https://ejemplo.com",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],["for","horario_atencion",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["type","text","id","horario_atencion","formControlName","horario_atencion","placeholder","Ej: Lunes a Viernes 9:00 am - 5:00 pm",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mr-1","h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],["for","precio_rango",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["type","text","id","precio_rango","formControlName","precio_rango","placeholder","Ej: S/. 20 - S/. 100",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],["for","capacidad_aforo",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],["type","number","id","capacidad_aforo","formControlName","capacidad_aforo","min","0","placeholder","N\xFAmero de personas",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],["for","numero_personas_atiende",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["type","number","id","numero_personas_atiende","formControlName","numero_personas_atiende","min","0","placeholder","N\xFAmero de personal",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200","flex","items-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"],[1,"mt-3","space-y-2","bg-gray-50","dark:bg-gray-800","p-4","rounded-md","border","border-gray-200","dark:border-gray-700","transition-colors","duration-200"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"flex","items-center","bg-white","dark:bg-gray-700","p-3","rounded-md","shadow-sm","transition-colors","duration-200"],["type","checkbox","id","metodo_efectivo",1,"h-4","w-4","rounded","border-gray-300","dark:border-gray-600","text-primary-600","focus:ring-primary-500","transition-colors","duration-200",3,"change","checked"],["for","metodo_efectivo",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["type","checkbox","id","metodo_tarjeta",1,"h-4","w-4","rounded","border-gray-300","dark:border-gray-600","text-primary-600","focus:ring-primary-500","transition-colors","duration-200",3,"change","checked"],["for","metodo_tarjeta",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["type","checkbox","id","metodo_transferencia",1,"h-4","w-4","rounded","border-gray-300","dark:border-gray-600","text-primary-600","focus:ring-primary-500","transition-colors","duration-200",3,"change","checked"],["for","metodo_transferencia",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["type","checkbox","id","metodo_yape",1,"h-4","w-4","rounded","border-gray-300","dark:border-gray-600","text-primary-600","focus:ring-primary-500","transition-colors","duration-200",3,"change","checked"],["for","metodo_yape",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["type","checkbox","id","metodo_plin",1,"h-4","w-4","rounded","border-gray-300","dark:border-gray-600","text-primary-600","focus:ring-primary-500","transition-colors","duration-200",3,"change","checked"],["for","metodo_plin",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"],["type","checkbox","id","idioma_espanol",1,"h-4","w-4","rounded","border-gray-300","dark:border-gray-600","text-primary-600","focus:ring-primary-500","transition-colors","duration-200",3,"change","checked"],["for","idioma_espanol",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["type","checkbox","id","idioma_ingles",1,"h-4","w-4","rounded","border-gray-300","dark:border-gray-600","text-primary-600","focus:ring-primary-500","transition-colors","duration-200",3,"change","checked"],["for","idioma_ingles",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["type","checkbox","id","idioma_quechua",1,"h-4","w-4","rounded","border-gray-300","dark:border-gray-600","text-primary-600","focus:ring-primary-500","transition-colors","duration-200",3,"change","checked"],["for","idioma_quechua",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["type","checkbox","id","idioma_aymara",1,"h-4","w-4","rounded","border-gray-300","dark:border-gray-600","text-primary-600","focus:ring-primary-500","transition-colors","duration-200",3,"change","checked"],["for","idioma_aymara",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["for","opciones_acceso",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"],["type","text","id","opciones_acceso","formControlName","opciones_acceso","placeholder","Ej: Transporte p\xFAblico, a pie, etc.",1,"block","w-full","pl-10","pr-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-2","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],[1,"mt-6","bg-white","dark:bg-gray-700","p-4","rounded-md","shadow-sm","transition-colors","duration-200"],["type","checkbox","id","facilidades_discapacidad","formControlName","facilidades_discapacidad",1,"h-5","w-5","rounded","border-gray-300","dark:border-gray-600","text-primary-600","focus:ring-primary-500","transition-colors","duration-200"],["for","facilidades_discapacidad",1,"ml-3","block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["title","Im\xE1genes Principales",3,"changeSlidersEvent","deletedSlidersEvent","slidersFormArray","existingSliders","isSliderPrincipal"],["title","Im\xE1genes Secundarias",3,"changeSlidersEvent","deletedSlidersEvent","slidersFormArray","existingSliders","isSliderPrincipal"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,a){e&1&&(s(0,"app-admin-header",0),t(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),o(5),i(),t(6,"p",4),o(7),i()(),t(8,"div",5)(9,"a",6),p(),t(10,"svg",7),s(11,"path",8),i(),o(12," Volver "),i()()(),_(13,yt,5,0,"div",9)(14,Pt,29,22,"form",10),i()),e&2&&(d(5),k("",a.isEditMode?"Editar":"Crear"," Emprendedor"),d(2),k(" ",a.isEditMode?"Actualice la informaci\xF3n del emprendedor.":"Complete el formulario para crear un nuevo emprendedor."," "),d(6),h(a.loading?13:14))},dependencies:[j,ve,H,We,Ue,Se,Ee,q,Re,Ne,ke,W,ze,Oe,$e,Be,Ye,D],encapsulation:2})};var Ze=n=>({emprendedor_id:n}),jt=n=>["/admin/servicios/edit",n],et=(n,r)=>r.id;function Ht(n,r){n&1&&(t(0,"p",16),o(1," Gestione los servicios que ofrece este emprendedor. "),i())}function Gt(n,r){if(n&1&&(t(0,"div",19),s(1,"img",31),i()),n&2){let e=c(2);d(),x("src",e.emprendedor.imagenes[0],A)}}function Dt(n,r){if(n&1&&(t(0,"div",19),s(1,"img",31),i()),n&2){let e=c(2);d(),x("src",e.emprendedor.sliders_principales[0].url_completa,A)}}function Nt(n,r){if(n&1&&(t(0,"div",20)(1,"span",32),o(2),i()()),n&2){let e=c(2);d(2),b(e.getEmprendedorInitials())}}function zt(n,r){if(n&1&&(t(0,"div",12)(1,"div",17)(2,"div",18),_(3,Gt,2,1,"div",19)(4,Dt,2,1,"div",19)(5,Nt,3,1,"div",20),t(6,"div",21)(7,"div",22)(8,"h2",23),o(9),i(),t(10,"span",24),o(11),i()(),t(12,"div",16),o(13),i(),t(14,"div",25)(15,"div",26),p(),t(16,"svg",27),s(17,"path",28)(18,"path",29),i(),o(19),i(),g(),t(20,"div",26),p(),t(21,"svg",27),s(22,"path",30),i(),o(23),i()()()()()()),n&2){let e=c();d(3),h(e.emprendedor.imagenes&&e.emprendedor.imagenes.length>0?3:e.emprendedor.sliders_principales&&e.emprendedor.sliders_principales.length>0?4:5),d(6),b(e.emprendedor.nombre),d(2),k(" ",e.emprendedor.categoria," "),d(2),b(e.emprendedor.descripcion),d(6),k(" ",e.emprendedor.ubicacion," "),d(4),k(" ",e.emprendedor.telefono," ")}}function Ut(n,r){n&1&&(t(0,"div",13),s(1,"div",33),t(2,"span",34),o(3,"Cargando servicios..."),i()())}function Rt(n,r){if(n&1&&(t(0,"div",14),p(),t(1,"svg",35),s(2,"path",36),i(),g(),t(3,"h3",37),o(4,"No hay servicios"),i(),t(5,"p",16),o(6,"Comience creando un nuevo servicio para este emprendedor."),i(),t(7,"div",38)(8,"a",9),p(),t(9,"svg",10),s(10,"path",11),i(),o(11," Nuevo Servicio "),i()()()),n&2){let e=c();d(8),x("queryParams",V(1,Ze,e.emprendedorId))}}function $t(n,r){if(n&1&&s(0,"img",49),n&2){let e=c().$implicit,a=c(2);_e("alt","Imagen de ",e.nombre,""),x("src",a.getServicioImage(e),A)}}function Bt(n,r){if(n&1&&(t(0,"div",50)(1,"span",72),o(2),i()()),n&2){let e=c().$implicit,a=c(2);d(2),b(a.getServicioInitials(e))}}function Ot(n,r){if(n&1&&(t(0,"div",53)(1,"span",22),p(),t(2,"svg",73),s(3,"path",74),i(),o(4),i()()),n&2){let e=c().$implicit,a=c(2);d(4),k(" ",a.formatHorarios(e.horarios)," ")}}function qt(n,r){if(n&1&&(t(0,"span",60),o(1),i()),n&2){let e=r.$implicit;d(),k(" ",e.nombre," ")}}function Wt(n,r){n&1&&(t(0,"span",61),o(1,"Sin categor\xEDas"),i())}function Yt(n,r){n&1&&(t(0,"span",62),o(1," Activo "),i())}function Qt(n,r){n&1&&(t(0,"span",63),o(1," Inactivo "),i())}function Jt(n,r){n&1&&(p(),t(0,"svg",67),s(1,"path",75),i())}function Kt(n,r){n&1&&(p(),t(0,"svg",67),s(1,"path",76),i())}function Xt(n,r){if(n&1){let e=E();t(0,"tr",46)(1,"td",47)(2,"div",22)(3,"div",48),_(4,$t,1,3,"img",49)(5,Bt,3,1,"div",50),i(),t(6,"div",51)(7,"div",52),o(8),i(),_(9,Ot,5,1,"div",53),i()()(),t(10,"td",54)(11,"div",55),o(12),i()(),t(13,"td",56)(14,"div",57),o(15),i()(),t(16,"td",58)(17,"div",59),w(18,qt,2,1,"span",60,et),_(20,Wt,2,0,"span",61),i()(),t(21,"td",47),_(22,Yt,2,0,"span",62)(23,Qt,2,0,"span",63),i(),t(24,"td",64)(25,"div",65)(26,"a",66),p(),t(27,"svg",67),s(28,"path",68),i()(),g(),t(29,"button",69),f("click",function(){let l=v(e).$implicit,m=c(2);return y(m.toggleServicioEstado(l))}),_(30,Jt,2,0,":svg:svg",67)(31,Kt,2,0,":svg:svg",67),i(),t(32,"button",70),f("click",function(){let l=v(e).$implicit,m=c(2);return y(m.deleteServicio(l))}),p(),t(33,"svg",67),s(34,"path",71),i()()()()()}if(n&2){let e=r.$implicit,a=c(2);d(4),h(a.getServicioImage(e)?4:5),d(4),b(e.nombre),d(),h(e.horarios&&e.horarios.length>0?9:-1),d(3),k(" ",e.descripcion||"Sin descripci\xF3n"," "),d(3),k(" S/. ",e.precio_referencial||"0.00"," "),d(3),M(e.categorias),d(2),h(!e.categorias||e.categorias.length===0?20:-1),d(2),h(e.estado?22:23),d(4),x("routerLink",V(12,jt,e.id)),d(3),Le(e.estado?"text-yellow-600 dark:text-yellow-400 hover:text-yellow-900 dark:hover:text-yellow-300 transition-colors duration-200":"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 transition-colors duration-200"),x("title",e.estado?"Desactivar":"Activar"),d(),h(e.estado?30:31)}}function Zt(n,r){if(n&1&&(t(0,"div",15)(1,"table",39)(2,"thead",40)(3,"tr")(4,"th",41),o(5,"Servicio"),i(),t(6,"th",41),o(7,"Descripci\xF3n"),i(),t(8,"th",42),o(9,"Precio"),i(),t(10,"th",43),o(11,"Categor\xEDas"),i(),t(12,"th",41),o(13,"Estado"),i(),t(14,"th",44),o(15,"Acciones"),i()()(),t(16,"tbody",45),w(17,Xt,35,14,"tr",46,et),i()()()),n&2){let e=c();d(17),M(e.servicios)}}var Me=class n{turismoService=S(G);themeService=S(O);route=S($);router=S(B);apiUrl=ye.apiUrl;emprendedorId=null;emprendedor=null;servicios=[];loading=!0;error="";ngOnInit(){let r=this.route.snapshot.paramMap.get("id");r?(this.emprendedorId=+r,this.loadEmprendedor(),this.loadServicios()):(this.error="ID de emprendedor no v\xE1lido",this.loading=!1)}loadEmprendedor(){this.emprendedorId&&this.turismoService.getEmprendedor(this.emprendedorId).subscribe({next:r=>{this.emprendedor=r},error:r=>{console.error("Error al cargar emprendedor:",r),this.error="Error al cargar los datos del emprendedor."}})}loadServicios(){this.emprendedorId&&(this.loading=!0,this.turismoService.getServiciosByEmprendedor(this.emprendedorId).subscribe({next:r=>{this.servicios=r,this.loading=!1},error:r=>{console.error("Error al cargar servicios:",r),this.error="Error al cargar los servicios.",this.loading=!1}}))}getEmprendedorInitials(){if(!this.emprendedor?.nombre)return"";let r=this.emprendedor.nombre.split(" ");return r.length===1?r[0].charAt(0).toUpperCase():(r[0].charAt(0)+r[1].charAt(0)).toUpperCase()}getServicioInitials(r){if(!r.nombre)return"";let e=r.nombre.split(" ");return e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[1].charAt(0)).toUpperCase()}getEmprendedorImage(r){return r.sliders_principales&&r.sliders_principales.length>0?r.sliders_principales[0].url_completa||null:r.imagenes&&r.imagenes.length>0?r.imagenes[0]:null}getBaseStorageUrl(){return`${this.apiUrl}/storage`}toggleServicioEstado(r){if(!r.id)return;let e=N(L({},r),{estado:!r.estado});this.turismoService.updateServicio(r.id,e).subscribe({next:a=>{let l=this.servicios.findIndex(m=>m.id===r.id);l!==-1&&(this.servicios[l]=a)},error:a=>{console.error("Error al actualizar estado del servicio:",a),alert("Error al actualizar el estado del servicio. Por favor, intente nuevamente.")}})}deleteServicio(r){r.id&&confirm(`\xBFEst\xE1 seguro de eliminar el servicio "${r.nombre}"? Esta acci\xF3n no se puede deshacer.`)&&this.turismoService.deleteServicio(r.id).subscribe({next:()=>{this.servicios=this.servicios.filter(e=>e.id!==r.id),alert("Servicio eliminado correctamente")},error:e=>{console.error("Error al eliminar servicio:",e),alert("Error al eliminar el servicio. Por favor, intente nuevamente.")}})}isDarkMode(){return this.themeService.isDarkMode()}getServicioImage(r){return r.sliders&&r.sliders.length>0&&r.sliders[0].url_completa||null}formatHorarios(r){if(!r||r.length===0)return"Sin horarios";let e=["lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado","domingo"],a=r.filter(l=>l.activo!==!1).sort((l,m)=>e.indexOf(l.dia_semana.toLowerCase())-e.indexOf(m.dia_semana.toLowerCase()));if(a.length===0)return"Sin horarios activos";if(a.length>2){let l=a[0];return`${l.dia_semana} a ${a[a.length-1].dia_semana}: ${this.formatHora(l.hora_inicio)} - ${this.formatHora(l.hora_fin)}`}return a.map(l=>`${l.dia_semana}: ${this.formatHora(l.hora_inicio)} - ${this.formatHora(l.hora_fin)}`).join(", ")}formatHora(r){if(!r)return"";let e=r.split(":");return e.length<2?r:`${e[0]}:${e[1]}`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-emprendedor-servicios"]],decls:21,vars:7,consts:[["title","Servicios del emprendimiento","subtitle","Administra y gestiona los servicios de cada emprendedor"],[1,"container","mx-auto","px-2","sm:px-4","py-6","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"sm:flex","sm:items-center","sm:justify-between"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","transition-colors","duration-200"],["class","mt-1 text-sm text-gray-500 dark:text-gray-400 transition-colors duration-200",4,"ngIf"],[1,"mt-4","sm:mt-0","flex","space-x-3"],["routerLink","/admin/emprendedores",1,"inline-flex","items-center","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-200","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-650","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5","text-gray-500","dark:text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["routerLink","/admin/servicios/create",1,"inline-flex","items-center","rounded-md","bg-primary-600","dark:bg-primary-700","px-4","py-2","text-sm","font-medium","text-white","hover:bg-primary-700","dark:hover:bg-primary-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","transition-colors","duration-200",3,"queryParams"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"mt-6","rounded-lg","bg-white","dark:bg-gray-800","shadow-sm","overflow-hidden","transition-colors","duration-200"],[1,"flex","justify-center","items-center","p-8"],[1,"p-8","text-center"],[1,"overflow-x-auto"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400","transition-colors","duration-200"],[1,"p-6"],[1,"sm:flex","sm:items-center"],[1,"h-20","w-20","flex-shrink-0","rounded-md","overflow-hidden","bg-gray-100","dark:bg-gray-700","sm:mr-6","transition-colors","duration-200"],[1,"h-20","w-20","flex-shrink-0","rounded-md","bg-primary-100","dark:bg-primary-900/40","flex","items-center","justify-center","sm:mr-6","transition-colors","duration-200"],[1,"mt-4","sm:mt-0"],[1,"flex","items-center"],[1,"text-xl","font-bold","text-gray-900","dark:text-white","transition-colors","duration-200"],[1,"ml-3","inline-flex","rounded-full","bg-green-100","dark:bg-green-900/40","px-2.5","py-0.5","text-xs","font-medium","text-green-800","dark:text-green-300","transition-colors","duration-200"],[1,"mt-2","flex","flex-wrap","gap-2"],[1,"flex","items-center","text-sm","text-gray-500","dark:text-gray-400","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mr-1.5","h-5","w-5","flex-shrink-0","text-gray-400","dark:text-gray-500","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],["alt","Imagen de emprendedor",1,"h-full","w-full","object-cover",3,"src"],[1,"text-2xl","text-primary-800","dark:text-primary-300","font-medium","transition-colors","duration-200"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","dark:border-primary-600","border-r-transparent"],[1,"ml-4","text-gray-900","dark:text-gray-200","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400","dark:text-gray-500","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"mt-2","text-sm","font-medium","text-gray-900","dark:text-white","transition-colors","duration-200"],[1,"mt-6"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700","transition-colors","duration-200"],[1,"bg-gray-50","dark:bg-gray-700","transition-colors","duration-200"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-200"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-200","hidden","md:table-cell"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-200","hidden","lg:table-cell"],["scope","col",1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-200"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700","transition-colors","duration-200"],[1,"hover:bg-gray-50","dark:hover:bg-gray-750","transition-colors","duration-150"],[1,"px-6","py-4","whitespace-nowrap"],[1,"h-10","w-10","flex-shrink-0","rounded-full","overflow-hidden","bg-gray-100","dark:bg-gray-700","transition-colors","duration-200"],[1,"h-full","w-full","object-cover",3,"src","alt"],[1,"h-full","w-full","flex","items-center","justify-center","bg-primary-100","dark:bg-primary-900/40","transition-colors","duration-200"],[1,"ml-3"],[1,"text-sm","font-medium","text-gray-900","dark:text-white","transition-colors","duration-200"],[1,"text-xs","text-gray-500","dark:text-gray-400","transition-colors","duration-200"],[1,"px-6","py-4"],[1,"text-sm","text-gray-500","dark:text-gray-400","truncate","max-w-xs","transition-colors","duration-200"],[1,"px-6","py-4","whitespace-nowrap","hidden","md:table-cell"],[1,"text-sm","text-gray-900","dark:text-white","transition-colors","duration-200"],[1,"px-6","py-4","hidden","lg:table-cell"],[1,"flex","flex-wrap","gap-1"],[1,"inline-flex","rounded-full","bg-primary-100","dark:bg-primary-900/40","px-2.5","py-0.5","text-xs","font-medium","text-primary-800","dark:text-primary-300","transition-colors","duration-200"],[1,"text-sm","text-gray-500","dark:text-gray-400","transition-colors","duration-200"],[1,"inline-flex","rounded-full","bg-green-100","dark:bg-green-900/40","px-2.5","py-0.5","text-xs","font-medium","text-green-800","dark:text-green-300","transition-colors","duration-200"],[1,"inline-flex","rounded-full","bg-red-100","dark:bg-red-900/40","px-2.5","py-0.5","text-xs","font-medium","text-red-800","dark:text-red-300","transition-colors","duration-200"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","items-center","justify-end","space-x-2"],["title","Editar",1,"text-primary-600","dark:text-primary-400","hover:text-primary-900","dark:hover:text-primary-300","transition-colors","duration-200",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[3,"click","title"],["title","Eliminar",1,"text-red-600","dark:text-red-400","hover:text-red-900","dark:hover:text-red-300","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-primary-800","dark:text-primary-300","font-medium","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mr-1","h-3.5","w-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(e,a){e&1&&(s(0,"app-admin-header",0),t(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),o(5),i(),_(6,Ht,2,0,"p",4),i(),t(7,"div",5)(8,"a",6),p(),t(9,"svg",7),s(10,"path",8),i(),o(11," Volver "),i(),g(),t(12,"a",9),p(),t(13,"svg",10),s(14,"path",11),i(),o(15," Nuevo Servicio "),i()()(),_(16,zt,24,6,"div",12),g(),t(17,"div",12),_(18,Ut,4,0,"div",13)(19,Rt,12,3,"div",14)(20,Zt,19,0,"div",15),i()()),e&2&&(d(5),k(" Servicios de ",a.emprendedor==null?null:a.emprendedor.nombre," "),d(),x("ngIf",a.emprendedor),d(6),x("queryParams",V(5,Ze,a.emprendedorId)),d(4),h(a.emprendedor?16:-1),d(2),h(a.loading?18:a.servicios.length===0?19:20))},dependencies:[j,He,H,D],encapsulation:2})};var tt=(n,r)=>r.id;function ei(n,r){n&1&&(t(0,"div",9)(1,"div",25),s(2,"div",26),t(3,"span",27),o(4,"Cargando datos del emprendedor..."),i()()())}function ti(n,r){if(n&1&&(t(0,"p",18),o(1),i()),n&2){let e=c();d(),b(e.searchError)}}function ii(n,r){if(n&1&&(t(0,"div",32),s(1,"img",38),i()),n&2){let e=c().$implicit;d(),Te("alt",e.name),x("src",e.foto_perfil_url,A)}}function ri(n,r){if(n&1&&(t(0,"div",33)(1,"span",39),o(2),i()()),n&2){let e=c().$implicit,a=c(2);d(2),b(a.getUserInitials(e))}}function ni(n,r){if(n&1){let e=E();t(0,"li",30)(1,"div")(2,"div",31),_(3,ii,2,2,"div",32)(4,ri,3,1,"div",33),t(5,"div",34)(6,"p",35),o(7),i(),t(8,"p",36),o(9),i()()()(),t(10,"div")(11,"button",37),f("click",function(){let l=v(e).$implicit,m=c(2);return y(m.assignAdmin(l))}),o(12),i()()()}if(n&2){let e=r.$implicit,a=c(2);d(3),h(e.foto_perfil_url?3:4),d(4),b(e.name),d(2),b(e.email),d(2),x("disabled",a.isUserAdmin(e)),d(),k(" ",a.isUserAdmin(e)?"Ya es administrador":"Asignar como administrador"," ")}}function oi(n,r){if(n&1&&(t(0,"div",19)(1,"h3",28),o(2,"Resultados de la b\xFAsqueda"),i(),t(3,"ul",29),w(4,ni,13,5,"li",30,tt),i()()),n&2){let e=c();d(4),M(e.searchResults)}}function ai(n,r){if(n&1&&(t(0,"div",20)(1,"div",40)(2,"div",41),p(),t(3,"svg",42),s(4,"path",43),i()(),g(),t(5,"div",34)(6,"h3",44),o(7,"No se encontraron resultados"),i(),t(8,"div",45)(9,"p"),o(10),i()()()()()),n&2){let e=c();d(10),k('No se encontraron usuarios con el email "',e.searchEmail,'". Verifica que el email sea correcto.')}}function di(n,r){n&1&&(t(0,"div",21),s(1,"div",46),t(2,"span",47),o(3,"Procesando..."),i()())}function li(n,r){if(n&1&&(t(0,"div",32),s(1,"img",38),i()),n&2){let e=c().$implicit;d(),Te("alt",e.name),x("src",e.foto_perfil_url,A)}}function si(n,r){if(n&1&&(t(0,"div",33)(1,"span",39),o(2),i()()),n&2){let e=c().$implicit,a=c(2);d(2),b(a.getUserInitials(e))}}function mi(n,r){n&1&&(t(0,"span",54),o(1," S\xED "),i())}function ci(n,r){n&1&&(t(0,"span",55),o(1," No "),i())}function pi(n,r){n&1&&(p(),t(0,"svg",58),s(1,"circle",60)(2,"path",61),i())}function ui(n,r){n&1&&(p(),t(0,"svg",59),s(1,"path",62),i())}function gi(n,r){if(n&1){let e=E();t(0,"tr",52)(1,"td",53)(2,"div",31),_(3,li,2,2,"div",32)(4,si,3,1,"div",33),t(5,"div",34)(6,"p",35),o(7),i()()()(),t(8,"td",53)(9,"div",36),o(10),i()(),t(11,"td",53)(12,"div",36),o(13),i()(),t(14,"td",53),_(15,mi,2,0,"span",54)(16,ci,2,0,"span",55),i(),t(17,"td",56)(18,"button",57),f("click",function(){let l=v(e).$implicit,m=c(2);return y(m.removeAdmin(l))}),_(19,pi,3,0,":svg:svg",58)(20,ui,2,0,":svg:svg",59),i()()()}if(n&2){let e=r.$implicit,a=c(2);d(3),h(e.foto_perfil_url?3:4),d(4),b(e.name),d(3),b(e.email),d(3),b((e.pivot==null?null:e.pivot.rol)||"administrador"),d(2),h(e.pivot!=null&&e.pivot.es_principal?15:16),d(3),x("disabled",a.isRemoving[e.id||0]||(e.pivot==null?null:e.pivot.es_principal)&&a.administradores.length===1)("title",e.pivot!=null&&e.pivot.es_principal&&a.administradores.length===1?"No puede eliminar al \xFAnico administrador principal":"Eliminar"),d(),h(a.isRemoving[e.id||0]?19:20)}}function xi(n,r){if(n&1&&(t(0,"div",23)(1,"table",48)(2,"thead",49)(3,"tr")(4,"th",50),o(5,"Administrador"),i(),t(6,"th",50),o(7,"Email"),i(),t(8,"th",50),o(9,"Rol"),i(),t(10,"th",50),o(11,"Es Principal"),i(),t(12,"th",50),o(13,"Acciones"),i()()(),t(14,"tbody",51),w(15,gi,21,8,"tr",52,tt),i()()()),n&2){let e=c();d(15),M(e.administradores)}}function hi(n,r){n&1&&(t(0,"div",24),p(),t(1,"svg",63),s(2,"path",64),i(),g(),t(3,"h3",65),o(4,"No hay administradores"),i(),t(5,"p",4),o(6," Este emprendedor no tiene administradores asignados. "),i()())}var Fe=class n{turismoService=S(G);usersService=S(Qe);http=S(De);route=S($);router=S(B);API_URL=ye.apiUrl;emprendedorId=null;emprendedor=null;loading=!0;administradores=[];searchEmail="";searchResults=[];searchError="";showNoResults=!1;isSubmitting=!1;isRemoving={};ngOnInit(){let r=this.route.snapshot.paramMap.get("id");r?(this.emprendedorId=+r,this.loadEmprendedor()):(this.loading=!1,this.searchError="ID de emprendedor no v\xE1lido")}loadEmprendedor(){this.emprendedorId&&(this.loading=!0,this.turismoService.getEmprendedor(this.emprendedorId).subscribe({next:r=>{this.emprendedor=r,this.administradores=this.emprendedor?.administradores||[],this.loading=!1},error:r=>{console.error("Error al cargar emprendedor:",r),this.loading=!1,this.searchError="Error al cargar los datos del emprendedor."}}))}searchUsers(){if(!this.searchEmail.trim()){this.searchError="Ingrese un email para buscar";return}this.searchError="",this.isSubmitting=!0,this.showNoResults=!1,this.usersService.searchUsers(this.searchEmail).subscribe({next:r=>{this.searchResults=r.filter(e=>!this.isUserAdmin(e)),this.isSubmitting=!1,this.showNoResults=r.length===0,r.length>0&&this.searchResults.length===0&&(this.searchError="Todos los usuarios encontrados ya son administradores de este emprendedor")},error:r=>{console.error("Error al buscar usuarios:",r),this.searchError="Error al buscar usuarios. Por favor, intente nuevamente.",this.isSubmitting=!1}})}getUserInitials(r){if(!r.name)return"";let e=r.name.split(" ");return e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[1].charAt(0)).toUpperCase()}isUserAdmin(r){return!this.administradores||this.administradores.length===0?!1:this.administradores.some(e=>e.id===r.id)}getHeaders(){let r=localStorage.getItem("auth_token");return new Ge({Authorization:`Bearer ${r}`,Accept:"application/json","Content-Type":"application/json"})}assignAdmin(r){if(!this.emprendedorId)return;this.isSubmitting=!0;let e={email:r.email,rol:"administrador",es_principal:!0};this.http.post(`${this.API_URL}/emprendedores/${this.emprendedorId}/administradores`,e,{headers:this.getHeaders()}).subscribe({next:a=>{this.isSubmitting=!1,this.loadEmprendedor(),this.searchEmail="",this.searchResults=[]},error:a=>{console.error("Error al asignar administrador:",a),this.isSubmitting=!1,this.searchError="Error al asignar administrador. Por favor, intente nuevamente."}})}removeAdmin(r){if(!(!this.emprendedorId||!r.id)){if(r.pivot?.es_principal&&this.administradores.length===1){alert("No puede eliminar al \xFAnico administrador principal del emprendedor");return}if(confirm(`\xBFEst\xE1 seguro de eliminar a ${r.name} como administrador?`)){let e=r.id;e&&(this.isRemoving[e]=!0,this.http.delete(`${this.API_URL}/emprendedores/${this.emprendedorId}/administradores/${e}`,{headers:this.getHeaders()}).subscribe({next:()=>{this.isRemoving[e]=!1,this.loadEmprendedor()},error:a=>{console.error("Error al eliminar administrador:",a),this.isRemoving[e]=!1,alert("Error al eliminar administrador. Por favor, intente nuevamente.")}}))}}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-asignar-administrador"]],decls:35,vars:8,consts:[["title","Asignar Administrador","subtitle","Gestiona los administradores del emprendedor"],[1,"container","mx-auto","px-4","py-8","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"sm:flex","sm:items-center","sm:justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400"],[1,"mt-4","sm:mt-0"],["routerLink","/admin/emprendedores",1,"inline-flex","items-center","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-200","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5","text-gray-500","dark:text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"rounded-lg","bg-white","dark:bg-gray-800","p-6","shadow-sm","mb-6"],[1,"text-lg","font-medium","text-gray-900","dark:text-white","mb-4"],[1,"space-y-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"mt-1","relative","rounded-md","shadow-sm"],["type","email","id","email","placeholder","Buscar usuario por email",1,"input-estilo","block","w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500","sm:text-sm","transition-colors","duration-300",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"absolute","inset-y-0","right-0","px-3","py-2","rounded-r-md","border","border-gray-300","dark:border-gray-600","bg-gray-50","dark:bg-gray-600","hover:bg-gray-100","dark:hover:bg-gray-500","focus:outline-none",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-500","dark:text-gray-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"mt-2","text-sm","text-red-600","dark:text-red-400"],[1,"mt-4"],[1,"bg-yellow-50","dark:bg-yellow-900/20","border","border-yellow-200","dark:border-yellow-900/30","rounded-md","p-4","mt-4"],[1,"flex","justify-center","mt-4"],[1,"rounded-lg","bg-white","dark:bg-gray-800","p-6","shadow-sm"],[1,"overflow-x-auto"],[1,"text-center","py-6"],[1,"flex","justify-center","items-center","p-8"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","border-r-transparent"],[1,"ml-4","text-gray-900","dark:text-white"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"divide-y","divide-gray-200","dark:divide-gray-700"],[1,"py-3","flex","justify-between","items-center"],[1,"flex","items-center"],[1,"h-10","w-10","flex-shrink-0","rounded-full","overflow-hidden"],[1,"h-10","w-10","flex-shrink-0","rounded-full","bg-primary-100","dark:bg-primary-900/40","flex","items-center","justify-center"],[1,"ml-3"],[1,"text-sm","font-medium","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],["type","button",1,"inline-flex","items-center","rounded-md","bg-primary-600","dark:bg-primary-700","px-3","py-2","text-sm","font-medium","text-white","hover:bg-primary-700","dark:hover:bg-primary-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"h-full","w-full","object-cover",3,"src","alt"],[1,"text-primary-800","dark:text-primary-300","font-medium"],[1,"flex"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-yellow-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","font-medium","text-yellow-800","dark:text-yellow-200"],[1,"mt-2","text-sm","text-yellow-700","dark:text-yellow-300"],[1,"inline-block","h-6","w-6","animate-spin","rounded-full","border-4","border-solid","border-primary-400","border-r-transparent"],[1,"ml-2","text-gray-700","dark:text-gray-300"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"bg-gray-50","dark:bg-gray-700"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"hover:bg-gray-50","dark:hover:bg-gray-750"],[1,"px-6","py-4","whitespace-nowrap"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-green-100","dark:bg-green-900/40","text-green-800","dark:text-green-300"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-gray-100","dark:bg-gray-700","text-gray-800","dark:text-gray-300"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],["type","button",1,"text-red-600","dark:text-red-400","hover:text-red-900","dark:hover:text-red-300","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled","title"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400","dark:text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-2","text-sm","font-medium","text-gray-900","dark:text-white"]],template:function(e,a){e&1&&(s(0,"app-admin-header",0),t(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),o(5),i(),t(6,"p",4),o(7," Gestione qui\xE9n puede administrar este emprendedor en el sistema "),i()(),t(8,"div",5)(9,"a",6),p(),t(10,"svg",7),s(11,"path",8),i(),o(12," Volver "),i()()(),_(13,ei,5,0,"div",9),g(),t(14,"div",9)(15,"h2",10),o(16,"Agregar nuevo administrador"),i(),t(17,"div",11)(18,"div")(19,"label",12),o(20,"Email del usuario"),i(),t(21,"div",13)(22,"input",14),R("ngModelChange",function(m){return U(a.searchEmail,m)||(a.searchEmail=m),m}),f("keyup.enter",function(){return a.searchUsers()}),i(),t(23,"button",15),f("click",function(){return a.searchUsers()}),p(),t(24,"svg",16),s(25,"path",17),i()()(),_(26,ti,2,1,"p",18),i(),_(27,oi,6,0,"div",19)(28,ai,11,1,"div",20)(29,di,4,0,"div",21),i()(),g(),t(30,"div",22)(31,"h2",10),o(32,"Administradores actuales"),i(),_(33,xi,17,0,"div",23)(34,hi,7,0,"div",24),i()()),e&2&&(d(5),k("Administradores de ",(a.emprendedor==null?null:a.emprendedor.nombre)||"Emprendedor",""),d(8),h(a.loading?13:-1),d(9),z("ngModel",a.searchEmail),d(4),h(a.searchError?26:-1),d(),h(a.searchResults.length>0?27:-1),d(),h(a.showNoResults?28:-1),d(),h(a.isSubmitting?29:-1),d(4),h(a.administradores&&a.administradores.length>0?33:34))},dependencies:[j,H,Ce,q,W,be,D],encapsulation:2})};var Er=[{path:"",component:we},{path:"create",component:Y},{path:"edit/:id",component:Y},{path:":id/servicios",component:Me},{path:":id/asignaradministrador",component:Fe}];export{Er as EMPRENDEDORES_ROUTES};
