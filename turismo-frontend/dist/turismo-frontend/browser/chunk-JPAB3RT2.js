import{a as W}from"./chunk-G5KRKBM3.js";import{a as R}from"./chunk-Y34SCQEG.js";import{a as q}from"./chunk-PYGBUVLC.js";import{a as be}from"./chunk-RRUC2C5S.js";import{a as me,b as ee,c as M,d as te,e as pe,f as Fe,g as Ae,h as ue,i as ge,j as _e,l as Ge,m as Be,n as He,o as Ne,p as ie,q as ne,r as re,s as xe,t as fe,u as $e,w as Oe,x as qe,y as ve,z as Re}from"./chunk-KTW5JVGU.js";import{d as Y,f as Z,g as O}from"./chunk-XR3SD2KY.js";import{Cc as je,Dc as se,Fc as Q,Ga as U,Gb as a,Hb as x,Hc as $,Ib as f,Jb as V,La as l,Lb as z,Mb as L,Nb as j,Qb as K,Rb as ze,Sc as ce,Ub as Le,Va as N,Wb as de,Xb as E,Yb as G,Zb as D,_ as w,_a as g,fb as y,ga as v,gb as J,ha as b,hb as I,ia as u,ja as h,jb as p,kb as H,mb as F,nb as T,ob as t,pb as i,qb as m,tb as C,ub as _,uc as X,vb as s}from"./chunk-ETYZCZA5.js";import{a as Pe,b as Ve}from"./chunk-4CLCTAJ7.js";var Qe=r=>["/admin/planes",r,"detail"],Je=r=>["/admin/planes/edit",r],Ke=(r,n,e,o,d,c,P,S,A,B)=>({"bg-primary-50":r,"bg-primary-900/40":n,"text-primary-600":e,"text-primary-300":o,"bg-white":d,"bg-gray-700":c,"text-gray-700":P,"text-gray-300":S,"hover:bg-gray-50":A,"hover:bg-gray-600":B}),De=(r,n)=>n.id;function Xe(r,n){r&1&&(t(0,"div",31),m(1,"div",35),t(2,"span",36),a(3,"Cargando planes..."),i()())}function Ye(r,n){r&1&&(t(0,"div",32),u(),t(1,"svg",37),m(2,"path",38),i(),h(),t(3,"h3",39),a(4,"No se encontraron planes"),i(),t(5,"p",40),a(6,"Comience creando un nuevo plan tur\xEDstico."),i(),t(7,"div",41)(8,"a",42),u(),t(9,"svg",43),m(10,"path",9),i(),a(11," Nuevo Plan "),i()()())}function Ze(r,n){if(r&1&&m(0,"img",58),r&2){let e=s().$implicit,o=s(2);y("src",o.env.assetsUrl+e.imagen_principal_url,U)("alt",e.nombre)}}function et(r,n){r&1&&(t(0,"div",59),u(),t(1,"svg",88),m(2,"path",38),i()())}function tt(r,n){r&1&&(t(0,"span",65),a(1," P\xFAblico "),i())}function it(r,n){r&1&&(t(0,"span",66),a(1," Privado "),i())}function nt(r,n){if(r&1&&(t(0,"div",90),a(1),i(),t(2,"div",91),a(3,"Organizador Principal"),i()),r&2){let e=s(2).$implicit;l(),x(e.organizador_principal.nombre)}}function rt(r,n){if(r&1&&(t(0,"div",89),a(1),t(2,"span",92),a(3),i()()),r&2){let e=s(2).$implicit;l(),f(" +",e.total_emprendedores-1," m\xE1s "),l(2),f(" ",e.total_emprendedores," ")}}function at(r,n){if(r&1&&g(0,nt,4,1)(1,rt,4,2,"div",89),r&2){let e=s().$implicit;p(e.organizador_principal?0:-1),l(),p(e.total_emprendedores&&e.total_emprendedores>1?1:-1)}}function ot(r,n){if(r&1&&(t(0,"div",90),a(1),i(),t(2,"div",93),a(3),i()),r&2){let e=s().$implicit;l(),x(e.emprendedor.nombre),l(2),x(e.emprendedor.ubicacion)}}function lt(r,n){r&1&&(t(0,"span",69),a(1,"Sin emprendedor"),i())}function dt(r,n){if(r&1&&(a(0),E(1,"number")),r&2){let e=s().$implicit;f(" S/ ",D(1,1,e.precio_total,"1.2-2")," ")}}function st(r,n){r&1&&(t(0,"span",72),a(1,"Sin precio"),i())}function ct(r,n){r&1&&(t(0,"span",73),a(1," Activo "),i())}function mt(r,n){r&1&&(t(0,"span",74),a(1," Inactivo "),i())}function pt(r,n){r&1&&(t(0,"span",75),a(1," Borrador "),i())}function ut(r,n){r&1&&(u(),t(0,"svg",79),m(1,"path",94),i())}function gt(r,n){r&1&&(u(),t(0,"svg",79),m(1,"path",95),i())}function _t(r,n){if(r&1){let e=C();t(0,"tr",53)(1,"td",55)(2,"div",56)(3,"div",57),g(4,Ze,1,2,"img",58)(5,et,3,0,"div",59),i(),t(6,"div",60)(7,"div",61),a(8),i(),t(9,"div",62)(10,"span",63)(11,"span",64),a(12),i(),g(13,tt,2,0,"span",65)(14,it,2,0,"span",66),i()()()()(),t(15,"td",67)(16,"div",68),g(17,at,2,2)(18,ot,4,2)(19,lt,2,0,"span",69),i()(),t(20,"td",70)(21,"div",68),a(22),i()(),t(23,"td",71)(24,"div",68),g(25,dt,2,4)(26,st,2,0,"span",72),i()(),t(27,"td",71)(28,"div",68),a(29),i()(),t(30,"td",55),g(31,ct,2,0,"span",73)(32,mt,2,0,"span",74)(33,pt,2,0,"span",75),i(),t(34,"td",76)(35,"div",77)(36,"a",78),u(),t(37,"svg",79),m(38,"path",80)(39,"path",81),i()(),h(),t(40,"button",82),_("click",function(){let d=v(e).$implicit,c=s(2);return b(c.gestionarEmprendedores(d))}),u(),t(41,"svg",79),m(42,"path",7),i()(),h(),t(43,"a",83),u(),t(44,"svg",79),m(45,"path",84),i()(),h(),t(46,"button",85),_("click",function(){let d=v(e).$implicit,c=s(2);return b(c.cambiarEstado(d))}),g(47,ut,2,0,":svg:svg",79)(48,gt,2,0,":svg:svg",79),i(),t(49,"button",86),_("click",function(){let d=v(e).$implicit,c=s(2);return b(c.deletePlan(d))}),u(),t(50,"svg",79),m(51,"path",87),i()()()()()}if(r&2){let e=n.$implicit,o=s(2);l(4),p(e.imagen_principal_url?4:5),l(4),x(e.nombre),l(4),x(o.getDificultadLabel(e.dificultad)),l(),p(e.es_publico?13:14),l(4),p(e.emprendedores&&e.emprendedores.length>0?17:e.emprendedor?18:19),l(5),V(" ",e.duracion_dias," ",e.duracion_dias===1?"d\xEDa":"d\xEDas"," "),l(3),p(e.precio_total?25:26),l(4),V(" ",e.cupos_disponibles||0," / ",e.capacidad," "),l(2),p(e.estado==="activo"?31:e.estado==="inactivo"?32:33),l(5),y("routerLink",K(15,Qe,e.id)),l(7),y("routerLink",K(17,Je,e.id)),l(3),y("title",e.estado==="activo"?"Desactivar":"Activar"),l(),p(e.estado==="activo"?47:48)}}function xt(r,n){if(r&1){let e=C();t(0,"button",107),_("click",function(){v(e);let d=s().$implicit,c=s(3);return b(c.goToPage(+d.label))}),a(1),i()}if(r&2){let e=s().$implicit,o=s(3);y("ngClass",de(3,Ke,[e.active&&!o.isDarkMode(),e.active&&o.isDarkMode(),e.active&&!o.isDarkMode(),e.active&&o.isDarkMode(),!e.active&&!o.isDarkMode(),!e.active&&o.isDarkMode(),!e.active&&!o.isDarkMode(),!e.active&&o.isDarkMode(),!e.active&&!o.isDarkMode(),!e.active&&o.isDarkMode()]))("disabled",e.active),l(),f(" ",e.label," ")}}function ft(r,n){if(r&1&&g(0,xt,2,14,"button",106),r&2){let e=n.$implicit,o=s(3);p(e.label!=="&laquo; Previous"&&e.label!=="Next &raquo;"&&o.isValidPageNumber(e.label)?0:-1)}}function vt(r,n){if(r&1){let e=C();t(0,"div",54)(1,"div",96)(2,"div")(3,"p",97)(4,"span",98),a(5,"Mostrando"),i(),t(6,"span",90),a(7),i(),a(8," a "),t(9,"span",90),a(10),i(),a(11," de "),t(12,"span",90),a(13),i()()(),t(14,"div",99)(15,"nav",100)(16,"button",101),_("click",function(){v(e);let d=s(2);return b(d.goToPage(d.currentPage-1))}),t(17,"span",102),a(18,"Anterior"),i(),u(),t(19,"svg",79),m(20,"path",103),i()(),F(21,ft,1,1,null,null,H),h(),t(23,"button",104),_("click",function(){v(e);let d=s(2);return b(d.goToPage(d.currentPage+1))}),t(24,"span",102),a(25,"Siguiente"),i(),u(),t(26,"svg",79),m(27,"path",105),i()()()()()()}if(r&2){let e=s(2);l(7),x(e.pagination.from||0),l(3),x(e.pagination.to||0),l(3),x(e.pagination.total),l(3),I("opacity-50",!e.pagination.prev_page_url)("cursor-not-allowed",!e.pagination.prev_page_url),y("disabled",!e.pagination.prev_page_url),l(5),T(e.pagination.links),l(2),I("opacity-50",!e.pagination.next_page_url)("cursor-not-allowed",!e.pagination.next_page_url),y("disabled",!e.pagination.next_page_url)}}function bt(r,n){if(r&1&&(t(0,"div",44)(1,"table",45)(2,"thead",46)(3,"tr")(4,"th",47),a(5,"Plan"),i(),t(6,"th",48),a(7,"Emprendedores"),i(),t(8,"th",49),a(9,"Duraci\xF3n"),i(),t(10,"th",50),a(11,"Precio"),i(),t(12,"th",50),a(13,"Capacidad"),i(),t(14,"th",47),a(15,"Estado"),i(),t(16,"th",51),a(17,"Acciones"),i()()(),t(18,"tbody",52),F(19,_t,52,19,"tr",53,De),i()()(),g(21,vt,28,13,"div",54)),r&2){let e=s();l(19),T(e.pagination.data),l(2),p(e.pagination?21:-1)}}function ht(r,n){if(r&1&&(t(0,"div",116)(1,"div",127)(2,"div",128),a(3),i(),t(4,"div",129),a(5,"Total"),i()(),t(6,"div",130)(7,"div",131),a(8),i(),t(9,"div",132),a(10,"Organizadores"),i()(),t(11,"div",133)(12,"div",134),a(13),i(),t(14,"div",135),a(15,"Colaboradores"),i()()()),r&2){let e=s(2);l(3),x(e.planMeta.total_emprendedores),l(5),x(e.planMeta.organizadores),l(5),x(e.planMeta.colaboradores)}}function yt(r,n){r&1&&(t(0,"div",122),m(1,"div",35),t(2,"span",136),a(3,"Cargando emprendedores..."),i()())}function Ct(r,n){if(r&1&&(t(0,"div",93),a(1),i()),r&2){let e=s().$implicit;l(),f(" \u{1F4DE} ",e.telefono," ")}}function kt(r,n){if(r&1&&(t(0,"div",93),a(1),i()),r&2){let e=s().$implicit;l(),f(" \u2709\uFE0F ",e.email," ")}}function Et(r,n){r&1&&(t(0,"span",142),u(),t(1,"svg",151),m(2,"path",152),i(),a(3," Organizador Principal "),i())}function St(r,n){r&1&&(t(0,"span",143),a(1," \u{1F3AF} Organizador "),i())}function wt(r,n){r&1&&(t(0,"span",144),a(1," \u{1F91D} Colaborador "),i())}function Pt(r,n){if(r&1&&(t(0,"span",145),a(1),i()),r&2){let e=s().$implicit;l(),f(" ",e.porcentaje_ganancia,"% ganancia ")}}function Ft(r,n){if(r&1&&(t(0,"div",146)(1,"span",90),a(2,"Participaci\xF3n:"),i(),a(3),i()),r&2){let e=s().$implicit;l(3),f(" ",e.descripcion_participacion," ")}}function Tt(r,n){if(r&1){let e=C();t(0,"button",153),_("click",function(){v(e);let d=s().$implicit,c=s(3);return b(c.removerEmprendedor(d))}),u(),t(1,"svg",79),m(2,"path",87),i()()}}function Dt(r,n){r&1&&(t(0,"div",150),u(),t(1,"svg",79),m(2,"path",154),i()())}function Mt(r,n){if(r&1){let e=C();t(0,"div",137)(1,"div",138)(2,"div",139)(3,"div",138)(4,"div",56)(5,"div",138)(6,"div",140),a(7),i(),t(8,"div",89),a(9),i(),g(10,Ct,2,1,"div",93)(11,kt,2,1,"div",93),i(),t(12,"div",141),g(13,Et,4,0,"span",142)(14,St,2,0,"span",143)(15,wt,2,0,"span",144)(16,Pt,2,1,"span",145),i()(),g(17,Ft,4,1,"div",146),i()()(),t(18,"div",147)(19,"button",148),_("click",function(){let d=v(e).$implicit,c=s(3);return b(c.editarEmprendedor(d))}),u(),t(20,"svg",79),m(21,"path",84),i()(),g(22,Tt,3,0,"button",149)(23,Dt,3,0,"div",150),i()()}if(r&2){let e=n.$implicit;l(7),x(e.nombre),l(2),f(" \u{1F4CD} ",e.ubicacion," "),l(),p(e.telefono?10:-1),l(),p(e.email?11:-1),l(2),p(e.es_organizador_principal?13:e.rol==="organizador"?14:15),l(3),p(e.porcentaje_ganancia&&e.porcentaje_ganancia>0?16:-1),l(),p(e.descripcion_participacion?17:-1),l(5),p(e.es_organizador_principal?23:22)}}function It(r,n){if(r&1&&(t(0,"div",123),F(1,Mt,24,8,"div",137,De),i()),r&2){let e=s(2);l(),T(e.planEmprendedores)}}function Vt(r,n){if(r&1){let e=C();t(0,"div",124),u(),t(1,"svg",155),m(2,"path",7),i(),h(),t(3,"h3",156),a(4,"Sin emprendedores"),i(),t(5,"p",157),a(6,"No hay emprendedores asignados a este plan"),i(),t(7,"div",41)(8,"button",158),_("click",function(){v(e);let d=s(2);return b(d.mostrarFormularioAgregar())}),u(),t(9,"svg",43),m(10,"path",9),i(),a(11," Agregar Primer Emprendedor "),i()()()}}function zt(r,n){if(r&1){let e=C();t(0,"div",108),_("click",function(){v(e);let d=s();return b(d.closeEmprendedoresModal())}),t(1,"div",109),_("click",function(d){return v(e),b(d.stopPropagation())}),t(2,"div",110)(3,"div")(4,"h3",111),a(5," Gestionar Emprendedores "),i(),t(6,"p",112),a(7),i()(),t(8,"button",113),_("click",function(){v(e);let d=s();return b(d.closeEmprendedoresModal())}),u(),t(9,"svg",114),m(10,"path",115),i()()(),g(11,ht,16,3,"div",116),h(),t(12,"div",117)(13,"div",118)(14,"h4",119),a(15,"Emprendedores Participantes"),i(),t(16,"button",120),_("click",function(){v(e);let d=s();return b(d.mostrarFormularioAgregar())}),u(),t(17,"svg",121),m(18,"path",9),i(),a(19," Agregar Emprendedor "),i()(),g(20,yt,4,0,"div",122)(21,It,3,0,"div",123)(22,Vt,12,0,"div",124),i(),h(),t(23,"div",125)(24,"button",126),_("click",function(){v(e);let d=s();return b(d.closeEmprendedoresModal())}),a(25," Cerrar "),i()()()()}if(r&2){let e=s();l(7),V(" ",e.selectedPlan.nombre," \u2022 Plan ID: ",e.selectedPlan.id," "),l(4),p(e.planMeta?11:-1),l(9),p(e.loadingEmprendedores?20:e.planEmprendedores&&e.planEmprendedores.length>0?21:22)}}function Lt(r,n){if(r&1&&(t(0,"option",174),a(1),i()),r&2){let e=n.$implicit;y("value",e.id),l(),V("",e.nombre," - ",e.ubicacion,"")}}function jt(r,n){if(r&1){let e=C();t(0,"div")(1,"label",12),a(2," Emprendedor "),t(3,"span",163),a(4,"*"),i()(),t(5,"select",173),j("ngModelChange",function(d){v(e);let c=s(2);return L(c.formularioEmprendedor.emprendedor_id,d)||(c.formularioEmprendedor.emprendedor_id=d),b(d)}),t(6,"option",15),a(7,"Seleccionar emprendedor..."),i(),F(8,Lt,2,3,"option",174,De),i()()}if(r&2){let e=s(2);l(5),z("ngModel",e.formularioEmprendedor.emprendedor_id),l(3),T(e.emprendedoresDisponibles)}}function At(r,n){if(r&1){let e=C();t(0,"div",56)(1,"input",175),j("ngModelChange",function(d){v(e);let c=s(2);return L(c.formularioEmprendedor.es_organizador_principal,d)||(c.formularioEmprendedor.es_organizador_principal=d),b(d)}),_("change",function(){v(e);let d=s(2);return b(d.onOrganizadorPrincipalChange())}),i(),t(2,"label",176),a(3," Es el organizador principal del plan "),i()()}if(r&2){let e=s(2);l(),z("ngModel",e.formularioEmprendedor.es_organizador_principal)}}function Gt(r,n){r&1&&(u(),t(0,"svg",172),m(1,"circle",177)(2,"path",178),i())}function Bt(r,n){if(r&1){let e=C();t(0,"div",34)(1,"div",159)(2,"div",110)(3,"h3",160),a(4),i(),t(5,"button",161),_("click",function(){v(e);let d=s();return b(d.cerrarFormularioEmprendedor())}),u(),t(6,"svg",114),m(7,"path",115),i()()(),h(),t(8,"form",162),_("ngSubmit",function(){v(e);let d=s();return b(d.guardarEmprendedor())}),g(9,jt,10,1,"div"),t(10,"div")(11,"label",12),a(12," Rol "),t(13,"span",163),a(14,"*"),i()(),t(15,"select",164),j("ngModelChange",function(d){v(e);let c=s();return L(c.formularioEmprendedor.rol,d)||(c.formularioEmprendedor.rol=d),b(d)}),_("change",function(){v(e);let d=s();return b(d.onRolChange())}),t(16,"option",165),a(17,"\u{1F3AF} Organizador"),i(),t(18,"option",166),a(19,"\u{1F91D} Colaborador"),i()()(),g(20,At,4,1,"div",56),t(21,"div")(22,"label",12),a(23," Porcentaje de Ganancia (%) "),i(),t(24,"input",167),j("ngModelChange",function(d){v(e);let c=s();return L(c.formularioEmprendedor.porcentaje_ganancia,d)||(c.formularioEmprendedor.porcentaje_ganancia=d),b(d)}),i(),t(25,"p",89),a(26),i()(),t(27,"div")(28,"label",12),a(29," Descripci\xF3n de Participaci\xF3n "),i(),t(30,"textarea",168),j("ngModelChange",function(d){v(e);let c=s();return L(c.formularioEmprendedor.descripcion_participacion,d)||(c.formularioEmprendedor.descripcion_participacion=d),b(d)}),i()(),t(31,"div",169)(32,"button",170),_("click",function(){v(e);let d=s();return b(d.cerrarFormularioEmprendedor())}),a(33," Cancelar "),i(),t(34,"button",171),g(35,Gt,3,0,":svg:svg",172),a(36),i()()()()()}if(r&2){let e=s();l(4),f(" ",e.emprendedorEditando?"Editar Emprendedor":"Agregar Emprendedor"," "),l(5),p(e.emprendedorEditando?-1:9),l(6),z("ngModel",e.formularioEmprendedor.rol),l(5),p(e.formularioEmprendedor.rol==="organizador"?20:-1),l(4),z("ngModel",e.formularioEmprendedor.porcentaje_ganancia),l(2),f(" Total actual en el plan: ",e.getTotalPorcentajesModal(),"% "),l(4),z("ngModel",e.formularioEmprendedor.descripcion_participacion),l(4),y("disabled",e.guardandoEmprendedor||!e.formularioValido()),l(),p(e.guardandoEmprendedor?35:-1),l(),f(" ",e.emprendedorEditando?"Actualizar":"Agregar"," ")}}var he=class r{env=ce;planesService=w(R);turismoService=w(be);themeService=w(q);pagination=null;loading=!0;currentPage=1;filtros={page:1,per_page:10,todos:!0};filtroTimeout;showEmprendedoresModal=!1;selectedPlan=null;planEmprendedores=[];planMeta=null;loadingEmprendedores=!1;showFormularioEmprendedor=!1;emprendedorEditando=null;emprendedoresDisponibles=[];guardandoEmprendedor=!1;formularioEmprendedor={emprendedor_id:"",rol:"organizador",es_organizador_principal:!1,descripcion_participacion:"",porcentaje_ganancia:0};ngOnInit(){this.loadPlanes(),this.loadEmprendedoresDisponibles()}isDarkMode(){return this.themeService.isDarkMode()}loadPlanes(){this.loading=!0,this.filtros.page=this.currentPage,this.planesService.getAllPlanesAdmin(this.filtros).subscribe({next:n=>{this.pagination=n,this.loading=!1},error:n=>{console.error("Error al cargar planes:",n),this.loading=!1,alert("Error al cargar los planes. Por favor, intente nuevamente.")}})}loadEmprendedoresDisponibles(){this.turismoService.getEmprendedores(1,100).subscribe({next:n=>{this.emprendedoresDisponibles=n.data},error:n=>{console.error("Error al cargar emprendedores disponibles:",n)}})}onFiltroChange(){this.filtroTimeout&&clearTimeout(this.filtroTimeout),this.filtroTimeout=setTimeout(()=>{this.currentPage=1,this.loadPlanes()},500)}limpiarFiltros(){this.filtros={page:1,per_page:10,todos:!0},this.currentPage=1,this.loadPlanes()}goToPage(n){this.pagination&&(n<1||n>this.pagination.last_page||(this.currentPage=n,this.loadPlanes()))}isValidPageNumber(n){return!isNaN(+n)}getDificultadLabel(n){return{facil:"F\xE1cil",moderado:"Moderado",dificil:"Dif\xEDcil"}[n]||n}cambiarEstado(n){if(!n.id)return;let e=n.estado==="activo"?"inactivo":"activo",o=e==="activo"?"activar":"desactivar";confirm(`\xBFEst\xE1 seguro de ${o} el plan "${n.nombre}"?`)&&this.planesService.cambiarEstadoPlan(n.id,e).subscribe({next:()=>{n.estado=e,alert(`Plan ${o==="activar"?"activado":"desactivado"} correctamente`)},error:d=>{console.error("Error al cambiar estado:",d),alert("Error al cambiar el estado del plan. Por favor, intente nuevamente.")}})}deletePlan(n){n.id&&confirm(`\xBFEst\xE1 seguro de eliminar el plan "${n.nombre}"? Esta acci\xF3n eliminar\xE1 tambi\xE9n todas las inscripciones relacionadas y no se puede deshacer.`)&&this.planesService.deletePlan(n.id).subscribe({next:()=>{this.loadPlanes(),alert("Plan eliminado correctamente")},error:e=>{console.error("Error al eliminar plan:",e),alert("Error al eliminar el plan. Por favor, intente nuevamente.")}})}gestionarEmprendedores(n){n.id&&(this.selectedPlan=n,this.showEmprendedoresModal=!0,this.loadPlanEmprendedores(n.id))}closeEmprendedoresModal(){this.showEmprendedoresModal=!1,this.selectedPlan=null,this.planEmprendedores=[],this.planMeta=null}loadPlanEmprendedores(n){this.loadingEmprendedores=!0,this.planesService.getEmprendedoresPlan(n).subscribe({next:e=>{this.planEmprendedores=e.data||[],this.planMeta=e.meta||null,this.loadingEmprendedores=!1,console.log("Emprendedores cargados:",this.planEmprendedores),console.log("Meta informaci\xF3n:",this.planMeta)},error:e=>{console.error("Error al cargar emprendedores del plan:",e),this.loadingEmprendedores=!1,alert("Error al cargar los emprendedores del plan.")}})}mostrarFormularioAgregar(){this.emprendedorEditando=null,this.resetFormularioEmprendedor(),this.showFormularioEmprendedor=!0}editarEmprendedor(n){this.emprendedorEditando=n,this.formularioEmprendedor={emprendedor_id:n.id.toString(),rol:n.rol,es_organizador_principal:n.es_organizador_principal,descripcion_participacion:n.descripcion_participacion||"",porcentaje_ganancia:n.porcentaje_ganancia?parseFloat(n.porcentaje_ganancia.toString()):0},this.showFormularioEmprendedor=!0}cerrarFormularioEmprendedor(){this.showFormularioEmprendedor=!1,this.emprendedorEditando=null,this.resetFormularioEmprendedor()}resetFormularioEmprendedor(){this.formularioEmprendedor={emprendedor_id:"",rol:"organizador",es_organizador_principal:!1,descripcion_participacion:"",porcentaje_ganancia:0}}onRolChange(){this.formularioEmprendedor.rol==="colaborador"&&(this.formularioEmprendedor.es_organizador_principal=!1)}onOrganizadorPrincipalChange(){this.formularioEmprendedor.es_organizador_principal&&(this.formularioEmprendedor.rol="organizador")}getTotalPorcentajesModal(){let n=0;return this.planEmprendedores.forEach(e=>{(!this.emprendedorEditando||e.id!==this.emprendedorEditando.id)&&(n+=e.porcentaje_ganancia?parseFloat(e.porcentaje_ganancia.toString()):0)}),n+=this.formularioEmprendedor.porcentaje_ganancia||0,Math.round(n*100)/100}formularioValido(){return!(!this.emprendedorEditando&&!this.formularioEmprendedor.emprendedor_id||!this.formularioEmprendedor.rol||this.getTotalPorcentajesModal()>100)}guardarEmprendedor(){if(!this.formularioValido()||!this.selectedPlan?.id)return;this.guardandoEmprendedor=!0;let n={emprendedor_id:parseInt(this.formularioEmprendedor.emprendedor_id),rol:this.formularioEmprendedor.rol,es_organizador_principal:this.formularioEmprendedor.es_organizador_principal,descripcion_participacion:this.formularioEmprendedor.descripcion_participacion||void 0,porcentaje_ganancia:this.formularioEmprendedor.porcentaje_ganancia||void 0};(this.emprendedorEditando?this.planesService.actualizarEmprendedorEnPlan(this.selectedPlan.id,this.emprendedorEditando.id,n):this.planesService.agregarEmprendedorAPlan(this.selectedPlan.id,n)).subscribe({next:()=>{this.guardandoEmprendedor=!1,this.cerrarFormularioEmprendedor(),this.loadPlanEmprendedores(this.selectedPlan.id),this.loadPlanes();let o=this.emprendedorEditando?"Emprendedor actualizado correctamente":"Emprendedor agregado correctamente";alert(o)},error:o=>{this.guardandoEmprendedor=!1,console.error("Error al guardar emprendedor:",o);let d="Error al guardar el emprendedor";if(o.error?.message)d=o.error.message;else if(o.error?.errors){let c=Object.values(o.error.errors)[0];Array.isArray(c)&&(d=c[0])}alert(d)}})}removerEmprendedor(n){if(this.selectedPlan?.id){if(n.es_organizador_principal){alert("No se puede remover al organizador principal del plan");return}confirm(`\xBFEst\xE1 seguro de remover a "${n.nombre}" de este plan?`)&&this.planesService.removerEmprendedorDePlan(this.selectedPlan.id,n.id).subscribe({next:()=>{this.loadPlanEmprendedores(this.selectedPlan.id),this.loadPlanes(),alert("Emprendedor removido correctamente")},error:e=>{console.error("Error al remover emprendedor:",e),alert("Error al remover el emprendedor del plan.")}})}}ngOnDestroy(){this.filtroTimeout&&clearTimeout(this.filtroTimeout)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-planes-list"]],decls:72,vars:9,consts:[["title","Gesti\xF3n de Planes de Turismo","subtitle","Administra y gestiona todos los planes tur\xEDsticos del sistema"],[1,"container","mx-auto","px-2","py-6","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"flex","items-center","space-x-2","pb-5"],["routerLink","/admin/planes/estadisticas",1,"inline-flex","items-center","rounded-md","bg-blue-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-0.5","mr-1.5","h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],["routerLink","/admin/planes/inscripciones",1,"inline-flex","items-center","rounded-md","bg-green-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],["routerLink","/admin/planes/create",1,"inline-flex","items-center","rounded-md","bg-primary-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","p-4","mb-6","transition-colors","duration-300"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","xl:grid-cols-6","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","placeholder","Nombre del plan...",1,"input-estilo","w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500","text-sm",3,"ngModelChange","input","ngModel"],[1,"select-estilo","w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500","text-sm",3,"ngModelChange","change","ngModel"],["value",""],["value","activo"],["value","inactivo"],["value","borrador"],["value","facil"],["value","moderado"],["value","dificil"],["value","true"],["value","false"],[1,"flex","space-x-1"],["type","number","placeholder","Min","min","1",1,"py-2","w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500","text-sm",3,"ngModelChange","input","ngModel"],["type","number","placeholder","Max","min","1",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500","text-sm",3,"ngModelChange","input","ngModel"],[1,"flex","items-end"],[1,"w-full","inline-flex","justify-center","items-center","rounded-md","bg-gray-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"rounded-lg","bg-white","dark:bg-gray-800","shadow-sm","overflow-hidden","transition-colors","duration-300"],[1,"flex","justify-center","items-center","p-8","dark:text-white","transition-colors","duration-300"],[1,"p-8","text-center"],[1,"fixed","inset-0","bg-gray-600","dark:bg-gray-900","bg-opacity-50","dark:bg-opacity-75","overflow-y-auto","h-full","w-full","z-50","transition-opacity","duration-300"],[1,"fixed","inset-0","bg-gray-600","dark:bg-gray-900","bg-opacity-75","dark:bg-opacity-85","overflow-y-auto","h-full","w-full","z-60","transition-opacity","duration-300"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","border-r-transparent"],[1,"ml-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400","dark:text-gray-500","transition-colors","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"mt-2","text-sm","font-medium","text-gray-900","dark:text-white","transition-colors","duration-300"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400","transition-colors","duration-300"],[1,"mt-6"],["routerLink","/admin/planes/create",1,"inline-flex","items-center","rounded-md","bg-primary-600","px-4","py-2","text-sm","font-medium","text-white","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],[1,"overflow-x-auto"],[1,"w-full","divide-y","divide-gray-200","dark:divide-gray-700","transition-colors","duration-300"],[1,"bg-gray-50","dark:bg-gray-700","transition-colors","duration-300"],["scope","col",1,"p-2","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-300"],["scope","col",1,"hidden","md:table-cell","p-2","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-300"],["scope","col",1,"hidden","sm:table-cell","p-2","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-300"],["scope","col",1,"hidden","lg:table-cell","p-2","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-300"],["scope","col",1,"p-2","text-right","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-300"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700","transition-colors","duration-300"],[1,"hover:bg-gray-50","dark:hover:bg-gray-700","transition-colors","duration-300"],[1,"bg-white","dark:bg-gray-800","p-2","flex","items-center","justify-between","border-t","border-gray-200","dark:border-gray-700","transition-colors","duration-300"],[1,"p-2"],[1,"flex","items-center"],[1,"flex-shrink-0","mr-3"],[1,"h-10","w-10","rounded-lg","object-cover","border","border-gray-200","dark:border-gray-600",3,"src","alt"],[1,"h-10","w-10","rounded-lg","bg-primary-100","dark:bg-primary-900/40","flex","items-center","justify-center"],[1,"min-w-0","flex-1"],[1,"text-sm","font-medium","text-gray-900","dark:text-white","transition-colors","duration-300","truncate"],[1,"text-xs","text-gray-500","dark:text-gray-400","transition-colors","duration-300"],[1,"inline-flex","items-center"],[1,"mr-2"],[1,"inline-flex","items-center","rounded-full","bg-green-100","dark:bg-green-900","px-2","py-0.5","text-xs","font-medium","text-green-800","dark:text-green-200"],[1,"inline-flex","items-center","rounded-full","bg-gray-100","dark:bg-gray-900","px-2","py-0.5","text-xs","font-medium","text-gray-800","dark:text-gray-200"],[1,"hidden","md:table-cell","p-2"],[1,"text-sm","text-gray-900","dark:text-white","transition-colors","duration-300"],[1,"text-gray-500","dark:text-gray-400","transition-colors","duration-300"],[1,"hidden","sm:table-cell","p-2"],[1,"hidden","lg:table-cell","p-2"],[1,"text-gray-500","dark:text-gray-400"],[1,"inline-flex","rounded-full","bg-green-100","dark:bg-green-900","px-2","py-0.5","text-xs","font-medium","text-green-800","dark:text-green-200","transition-colors","duration-300"],[1,"inline-flex","rounded-full","bg-red-100","dark:bg-red-900","px-2","py-0.5","text-xs","font-medium","text-red-800","dark:text-red-200","transition-colors","duration-300"],[1,"inline-flex","rounded-full","bg-yellow-100","dark:bg-yellow-900","px-2","py-0.5","text-xs","font-medium","text-yellow-800","dark:text-yellow-200","transition-colors","duration-300"],[1,"p-2","text-right"],[1,"flex","items-center","justify-end","space-x-1"],["title","Ver detalle",1,"text-blue-600","hover:text-blue-900","dark:text-blue-400","dark:hover:text-blue-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-blue-50","dark:hover:bg-blue-900/20",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Gestionar emprendedores",1,"text-purple-600","hover:text-purple-900","dark:text-purple-400","dark:hover:text-purple-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-purple-50","dark:hover:bg-purple-900/20",3,"click"],["title","Editar",1,"text-primary-600","hover:text-primary-900","dark:text-primary-400","dark:hover:text-primary-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-primary-50","dark:hover:bg-primary-900/20",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-yellow-600","hover:text-yellow-900","dark:text-yellow-400","dark:hover:text-yellow-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-yellow-50","dark:hover:bg-yellow-900/20",3,"click","title"],["title","Eliminar",1,"text-red-600","hover:text-red-900","dark:text-red-400","dark:hover:text-red-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-red-50","dark:hover:bg-red-900/20",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-primary-600","dark:text-primary-400"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],[1,"font-medium"],[1,"text-xs","text-primary-600","dark:text-primary-400"],[1,"inline-flex","items-center","ml-1","rounded-full","bg-blue-100","dark:bg-blue-900","px-1.5","py-0.5","text-xs","font-medium","text-blue-800","dark:text-blue-200"],[1,"text-xs","text-gray-500","dark:text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","sm:flex-1","sm:flex","sm:items-center","sm:justify-between","flex-col","sm:flex-row"],[1,"text-xs","sm:text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-300"],[1,"hidden","sm:inline"],[1,"mt-2","sm:mt-0"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-1.5","rounded-l-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-sm","font-medium","text-gray-500","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-600","transition-colors","duration-300",3,"click","disabled"],[1,"sr-only"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"relative","inline-flex","items-center","px-2","py-1.5","rounded-r-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-sm","font-medium","text-gray-500","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-600","transition-colors","duration-300",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"relative","inline-flex","items-center","px-2.5","py-1.5","border","border-gray-300","dark:border-gray-600","text-sm","font-medium","transition-colors","duration-300",3,"ngClass","disabled"],[1,"relative","inline-flex","items-center","px-2.5","py-1.5","border","border-gray-300","dark:border-gray-600","text-sm","font-medium","transition-colors","duration-300",3,"click","ngClass","disabled"],[1,"fixed","inset-0","bg-gray-600","dark:bg-gray-900","bg-opacity-50","dark:bg-opacity-75","overflow-y-auto","h-full","w-full","z-50","transition-opacity","duration-300",3,"click"],[1,"relative","top-10","mx-auto","p-5","border","w-11/12","max-w-4xl","shadow-lg","rounded-md","bg-white","dark:bg-gray-800","transition-colors","duration-300",3,"click"],[1,"flex","items-center","justify-between","mb-6","border-b","border-gray-200","dark:border-gray-700","pb-4"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-300","transition-colors","duration-300","p-2","rounded-md","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"grid","grid-cols-3","gap-4","mb-6"],[1,"mb-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-medium","text-gray-900","dark:text-white"],[1,"inline-flex","items-center","px-3","py-2","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-primary-600","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-4","w-4"],[1,"flex","justify-center","py-8"],[1,"space-y-4","max-h-96","overflow-y-auto"],[1,"text-center","py-8","border-2","border-dashed","border-gray-300","dark:border-gray-600","rounded-lg"],[1,"flex","justify-end","pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","dark:border-gray-600","text-sm","font-medium","rounded-md","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","transition-colors","duration-200",3,"click"],[1,"bg-blue-50","dark:bg-blue-900/20","p-3","rounded-lg","text-center"],[1,"text-2xl","font-bold","text-blue-600","dark:text-blue-400"],[1,"text-xs","text-blue-600","dark:text-blue-400"],[1,"bg-green-50","dark:bg-green-900/20","p-3","rounded-lg","text-center"],[1,"text-2xl","font-bold","text-green-600","dark:text-green-400"],[1,"text-xs","text-green-600","dark:text-green-400"],[1,"bg-purple-50","dark:bg-purple-900/20","p-3","rounded-lg","text-center"],[1,"text-2xl","font-bold","text-purple-600","dark:text-purple-400"],[1,"text-xs","text-purple-600","dark:text-purple-400"],[1,"ml-4","text-gray-600","dark:text-gray-400"],[1,"flex","items-center","justify-between","p-4","border","border-gray-200","dark:border-gray-600","rounded-lg","bg-gray-50","dark:bg-gray-700/50","hover:bg-gray-100","dark:hover:bg-gray-700","transition-colors","duration-200"],[1,"flex-1"],[1,"flex","items-start","justify-between"],[1,"text-sm","font-semibold","text-gray-900","dark:text-white"],[1,"ml-4","flex","flex-col","items-end","space-y-1"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-yellow-100","dark:bg-yellow-900","text-yellow-800","dark:text-yellow-200"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","dark:bg-blue-900","text-blue-800","dark:text-blue-200"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-green-100","dark:bg-green-900","text-green-800","dark:text-green-200"],[1,"inline-flex","items-center","px-2","py-0.5","rounded-full","text-xs","font-medium","bg-emerald-100","dark:bg-emerald-900","text-emerald-800","dark:text-emerald-200"],[1,"text-xs","text-gray-600","dark:text-gray-300","mt-2","p-2","bg-white","dark:bg-gray-800","rounded","border"],[1,"ml-4","flex","space-x-2"],["title","Editar emprendedor",1,"text-blue-600","hover:text-blue-800","dark:text-blue-400","dark:hover:text-blue-300","p-2","rounded-md","hover:bg-blue-50","dark:hover:bg-blue-900/20","transition-colors","duration-200",3,"click"],["title","Remover emprendedor",1,"text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300","p-2","rounded-md","hover:bg-red-50","dark:hover:bg-red-900/20","transition-colors","duration-200"],["title","No se puede remover al organizador principal",1,"p-2","text-gray-400","dark:text-gray-500"],["fill","currentColor","viewBox","0 0 20 20",1,"h-3","w-3","mr-1"],["fill-rule","evenodd","d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z","clip-rule","evenodd"],["title","Remover emprendedor",1,"text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300","p-2","rounded-md","hover:bg-red-50","dark:hover:bg-red-900/20","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400","dark:text-gray-500"],[1,"mt-2","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-primary-600","hover:bg-primary-700",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-11/12","max-w-2xl","shadow-lg","rounded-md","bg-white","dark:bg-gray-800","transition-colors","duration-300"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-300","transition-colors","duration-300",3,"click"],[1,"space-y-4",3,"ngSubmit"],[1,"text-red-500"],["name","rol","required","",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500",3,"ngModelChange","change","ngModel"],["value","organizador"],["value","colaborador"],["type","number","name","porcentaje_ganancia","min","0","max","100","step","0.01","placeholder","0.00",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500",3,"ngModelChange","ngModel"],["name","descripcion_participacion","rows","3","placeholder","Describe el rol espec\xEDfico de este emprendedor en el plan...",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500",3,"ngModelChange","ngModel"],[1,"flex","justify-end","space-x-3","pt-4","border-t","border-gray-200","dark:border-gray-700"],["type","button",1,"px-4","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","transition-colors","duration-200",3,"click"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-primary-600","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-200",3,"disabled"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4"],["name","emprendedor_id","required","",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500",3,"ngModelChange","ngModel"],[3,"value"],["type","checkbox","name","es_organizador_principal","id","es_organizador_principal",1,"h-4","w-4","text-primary-600","focus:ring-primary-500","border-gray-300","dark:border-gray-600","rounded",3,"ngModelChange","change","ngModel"],["for","es_organizador_principal",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,o){e&1&&(m(0,"app-admin-header",0),t(1,"div",1)(2,"div",2)(3,"a",3),u(),t(4,"svg",4),m(5,"path",5),i(),a(6," Estad\xEDsticas "),i(),h(),t(7,"a",6),u(),t(8,"svg",4),m(9,"path",7),i(),a(10," Inscripciones "),i(),h(),t(11,"a",8),u(),t(12,"svg",4),m(13,"path",9),i(),a(14," Nuevo Plan "),i()(),h(),t(15,"div",10)(16,"div",11)(17,"div")(18,"label",12),a(19,"Buscar"),i(),t(20,"input",13),j("ngModelChange",function(c){return L(o.filtros.buscar,c)||(o.filtros.buscar=c),c}),_("input",function(){return o.onFiltroChange()}),i()(),t(21,"div")(22,"label",12),a(23,"Estado"),i(),t(24,"select",14),j("ngModelChange",function(c){return L(o.filtros.estado,c)||(o.filtros.estado=c),c}),_("change",function(){return o.onFiltroChange()}),t(25,"option",15),a(26,"Todos"),i(),t(27,"option",16),a(28,"Activos"),i(),t(29,"option",17),a(30,"Inactivos"),i(),t(31,"option",18),a(32,"Borradores"),i()()(),t(33,"div")(34,"label",12),a(35,"Dificultad"),i(),t(36,"select",14),j("ngModelChange",function(c){return L(o.filtros.dificultad,c)||(o.filtros.dificultad=c),c}),_("change",function(){return o.onFiltroChange()}),t(37,"option",15),a(38,"Todas"),i(),t(39,"option",19),a(40,"F\xE1cil"),i(),t(41,"option",20),a(42,"Moderado"),i(),t(43,"option",21),a(44,"Dif\xEDcil"),i()()(),t(45,"div")(46,"label",12),a(47,"P\xFAblico"),i(),t(48,"select",14),j("ngModelChange",function(c){return L(o.filtros.es_publico,c)||(o.filtros.es_publico=c),c}),_("change",function(){return o.onFiltroChange()}),t(49,"option",15),a(50,"Todos"),i(),t(51,"option",22),a(52,"P\xFAblicos"),i(),t(53,"option",23),a(54,"Privados"),i()()(),t(55,"div")(56,"label",12),a(57,"Duraci\xF3n (d\xEDas)"),i(),t(58,"div",24)(59,"input",25),j("ngModelChange",function(c){return L(o.filtros.duracion_min,c)||(o.filtros.duracion_min=c),c}),_("input",function(){return o.onFiltroChange()}),i(),t(60,"input",26),j("ngModelChange",function(c){return L(o.filtros.duracion_max,c)||(o.filtros.duracion_max=c),c}),_("input",function(){return o.onFiltroChange()}),i()()(),t(61,"div",27)(62,"button",28),_("click",function(){return o.limpiarFiltros()}),u(),t(63,"svg",4),m(64,"path",29),i(),a(65," Limpiar "),i()()()(),h(),t(66,"div",30),g(67,Xe,4,0,"div",31)(68,Ye,12,0,"div",32)(69,bt,22,1),i()(),g(70,zt,26,4,"div",33)(71,Bt,37,10,"div",34)),e&2&&(l(20),z("ngModel",o.filtros.buscar),l(4),z("ngModel",o.filtros.estado),l(12),z("ngModel",o.filtros.dificultad),l(12),z("ngModel",o.filtros.es_publico),l(11),z("ngModel",o.filtros.duracion_min),l(),z("ngModel",o.filtros.duracion_max),l(7),p(o.loading?67:!o.pagination||o.pagination.data.length===0?68:69),l(3),p(o.showEmprendedoresModal&&o.selectedPlan?70:-1),l(),p(o.showFormularioEmprendedor?71:-1))},dependencies:[$,X,Q,O,ve,ge,ne,re,ee,_e,me,ie,te,pe,$e,fe,xe,ue,Ae,W],encapsulation:2})};var Ht=r=>["/admin/planes/edit",r],Nt=(r,n)=>[r,n],Ee=(r,n)=>n.id;function $t(r,n){if(r&1&&(t(0,"a",5),u(),t(1,"svg",3),m(2,"path",10),i(),a(3," Editar Plan "),i()),r&2){let e=s();y("routerLink",K(1,Ht,e.plan.id))}}function Ot(r,n){r&1&&(t(0,"div",7),m(1,"div",11),t(2,"span",12),a(3,"Cargando detalle del plan..."),i()())}function qt(r,n){r&1&&(t(0,"div",8),u(),t(1,"svg",13),m(2,"path",14),i(),h(),t(3,"h3",15),a(4,"Plan no encontrado"),i(),t(5,"p",16),a(6,"El plan solicitado no existe o no tienes permisos para verlo."),i()())}function Rt(r,n){if(r&1&&m(0,"img",51)(1,"div",52),r&2){let e=s(2);y("src",e.getImageUrl(e.plan.imagen_principal_url),U)("alt",e.plan.nombre)}}function Wt(r,n){r&1&&(t(0,"div",19),u(),t(1,"svg",53),m(2,"path",14),i()())}function Ut(r,n){r&1&&(t(0,"span",21),a(1," \u2713 Activo "),i())}function Qt(r,n){r&1&&(t(0,"span",22),a(1," \u2717 Inactivo "),i())}function Jt(r,n){r&1&&(t(0,"span",23),a(1," \u{1F4DD} Borrador "),i())}function Kt(r,n){r&1&&(t(0,"span",24),a(1," \u{1F310} P\xFAblico "),i())}function Xt(r,n){r&1&&(t(0,"span",25),a(1," \u{1F512} Privado "),i())}function Yt(r,n){r&1&&(t(0,"span",26),a(1," \u{1F91D} Colaborativo "),i())}function Zt(r,n){r&1&&(t(0,"span",21),a(1," \u{1F7E2} F\xE1cil "),i())}function ei(r,n){r&1&&(t(0,"span",23),a(1," \u{1F7E1} Moderado "),i())}function ti(r,n){r&1&&(t(0,"span",22),a(1," \u{1F534} Dif\xEDcil "),i())}function ii(r,n){if(r&1&&(t(0,"div",33),u(),t(1,"svg",55),m(2,"path",56),i(),h(),t(3,"span",57),a(4,"Organizador Principal:"),i(),t(5,"span",58),a(6),i()()),r&2){let e=s(3);l(6),V(" ",e.plan.organizador_principal.nombre," \u2022 ",e.plan.organizador_principal.ubicacion," ")}}function ni(r,n){r&1&&(u(),t(0,"svg",63),m(1,"path",65),i())}function ri(r,n){r&1&&(t(0,"span",64),a(1,"\u2022"),i())}function ai(r,n){if(r&1&&(t(0,"span",62),a(1),g(2,ni,2,0,":svg:svg",63),i(),g(3,ri,2,0,"span",64)),r&2){let e=n.$implicit,o=n.$index,d=s(4);I("bg-yellow-100",e.es_organizador_principal&&!d.isDarkMode())("dark:bg-yellow-900",e.es_organizador_principal&&d.isDarkMode())("text-yellow-800",e.es_organizador_principal&&!d.isDarkMode())("dark:text-yellow-200",e.es_organizador_principal&&d.isDarkMode())("bg-blue-100",!e.es_organizador_principal&&!d.isDarkMode())("dark:bg-blue-900",!e.es_organizador_principal&&d.isDarkMode())("text-blue-800",!e.es_organizador_principal&&!d.isDarkMode())("dark:text-blue-200",!e.es_organizador_principal&&d.isDarkMode()),l(),f(" ",e.nombre," "),l(),p(e.es_organizador_principal?2:-1),l(),p(o<d.plan.emprendedores.length-1?3:-1)}}function oi(r,n){if(r&1&&(t(0,"div",54),u(),t(1,"svg",59),m(2,"path",60),i(),h(),t(3,"span",57),a(4,"Equipo:"),i(),t(5,"div",61),F(6,ai,4,19,null,null,Ee),i()()),r&2){let e=s(3);l(6),T(e.plan.emprendedores)}}function li(r,n){if(r&1&&(t(0,"div",32),g(1,ii,7,2,"div",33)(2,oi,8,0,"div",54),i()),r&2){let e=s(2);l(),p(e.plan.organizador_principal?1:-1),l(),p(e.plan.emprendedores.length>1?2:-1)}}function di(r,n){if(r&1&&(t(0,"div",33),u(),t(1,"svg",66),m(2,"path",67),i(),h(),t(3,"span",68),a(4,"Por"),i(),t(5,"span",69),a(6),i()()),r&2){let e=s(2);l(6),V(" ",e.plan.emprendedor.nombre," \u2022 ",e.plan.emprendedor.ubicacion," ")}}function si(r,n){if(r&1&&(t(0,"div",35)(1,"div",70),a(2),E(3,"number"),i(),t(4,"div",71),a(5,"por persona"),i()()),r&2){let e=s(2);l(2),f(" S/ ",D(3,1,e.plan.precio_total,"1.2-2")," ")}}function ci(r,n){r&1&&(t(0,"span",79),u(),t(1,"svg",87),m(2,"path",65),i(),a(3," Organizador Principal "),i())}function mi(r,n){if(r&1&&(t(0,"span",88),a(1),i()),r&2){let e=s().$implicit,o=s(3);I("bg-blue-100",e.rol==="organizador"&&!o.isDarkMode())("dark:bg-blue-900",e.rol==="organizador"&&o.isDarkMode())("text-blue-800",e.rol==="organizador"&&!o.isDarkMode())("dark:text-blue-200",e.rol==="organizador"&&o.isDarkMode())("bg-green-100",e.rol==="colaborador"&&!o.isDarkMode())("dark:bg-green-900",e.rol==="colaborador"&&o.isDarkMode())("text-green-800",e.rol==="colaborador"&&!o.isDarkMode())("dark:text-green-200",e.rol==="colaborador"&&o.isDarkMode()),l(),f(" ",e.rol==="organizador"?"\u{1F3AF} Organizador":"\u{1F91D} Colaborador"," ")}}function pi(r,n){if(r&1&&(t(0,"div",82),u(),t(1,"svg",83),m(2,"path",89),i(),a(3),i()),r&2){let e=s().$implicit;l(3),f(" ",e.telefono," ")}}function ui(r,n){if(r&1&&(t(0,"div",82),u(),t(1,"svg",83),m(2,"path",90),i(),a(3),i()),r&2){let e=s().$implicit;l(3),f(" ",e.email," ")}}function gi(r,n){if(r&1&&(t(0,"div",86)(1,"span",91),a(2,"Participaci\xF3n:"),i(),a(3),i()),r&2){let e=s().$implicit;l(3),f(" ",e.descripcion_participacion," ")}}function _i(r,n){if(r&1&&(t(0,"div",35)(1,"div",92),a(2),i(),t(3,"div",93),a(4,"ganancia"),i()()),r&2){let e=s().$implicit;l(2),f(" ",e.porcentaje_ganancia,"% ")}}function xi(r,n){if(r&1&&(t(0,"div",75)(1,"div",76)(2,"div",30)(3,"div",77)(4,"h4",78),a(5),i(),g(6,ci,4,0,"span",79)(7,mi,2,17,"span",80),i(),t(8,"div",81)(9,"div",82),u(),t(10,"svg",83),m(11,"path",84)(12,"path",85),i(),a(13),i(),g(14,pi,4,1,"div",82)(15,ui,4,1,"div",82),i(),g(16,gi,4,1,"div",86),i(),g(17,_i,5,1,"div",35),i()()),r&2){let e=n.$implicit,o=s(3);y("ngClass",ze(8,Nt,e.es_organizador_principal&&!o.isDarkMode()?"bg-yellow-50":"",e.es_organizador_principal&&o.isDarkMode()?"dark:bg-yellow-900/20":"")),l(5),f(" ",e.nombre," "),l(),p(e.es_organizador_principal?6:7),l(7),f(" ",e.ubicacion," "),l(),p(e.telefono?14:-1),l(),p(e.email?15:-1),l(),p(e.descripcion_participacion?16:-1),l(),p(e.porcentaje_ganancia?17:-1)}}function fi(r,n){if(r&1&&(t(0,"div",39)(1,"h3",72),u(),t(2,"svg",73),m(3,"path",60),i(),a(4),i(),h(),t(5,"div",74),F(6,xi,18,11,"div",75,Ee),i()()),r&2){let e=s(2);l(4),f(" Equipo de Emprendedores (",e.plan.emprendedores.length,") "),l(2),T(e.plan.emprendedores)}}function vi(r,n){if(r&1&&(t(0,"div",39)(1,"h3",94),u(),t(2,"svg",95),m(3,"path",96),i(),a(4," Qu\xE9 incluye "),i(),h(),t(5,"div",97),a(6),i()()),r&2){let e=s(2);l(6),x(e.plan.que_incluye)}}function bi(r,n){if(r&1&&(t(0,"div",39)(1,"h3",94),u(),t(2,"svg",98),m(3,"path",99),i(),a(4," Requerimientos "),i(),h(),t(5,"div",97),a(6),i()()),r&2){let e=s(2);l(6),x(e.plan.requerimientos)}}function hi(r,n){if(r&1&&(t(0,"div",39)(1,"h3",94),u(),t(2,"svg",73),m(3,"path",100),i(),a(4," Qu\xE9 llevar "),i(),h(),t(5,"div",97),a(6),i()()),r&2){let e=s(2);l(6),x(e.plan.que_llevar)}}function yi(r,n){if(r&1&&(t(0,"span",71),a(1),i()),r&2){let e=s().$implicit;l(),V(" ",e.hora_inicio," - ",e.hora_fin," ")}}function Ci(r,n){if(r&1&&(t(0,"span",107),a(1),i()),r&2){let e=s().$implicit,o=s(3);l(),f(" ",o.formatDuration(e.duracion_estimada_minutos)," ")}}function ki(r,n){if(r&1&&(t(0,"span",114),a(1),i()),r&2){let e=s().$implicit;l(),V(" ",e.hora_inicio," - ",e.hora_fin," ")}}function Ei(r,n){if(r&1&&(t(0,"span",115),a(1),i()),r&2){let e=s().$implicit,o=s(5);l(),f(" (",o.formatDuration(e.duracion_minutos),") ")}}function Si(r,n){if(r&1&&(t(0,"div",116),a(1),i()),r&2){let e=s().$implicit;l(),f(" Proveedor: ",e.servicio==null||e.servicio.emprendedor==null?null:e.servicio.emprendedor.nombre," ")}}function wi(r,n){if(r&1&&(t(0,"div",117),a(1),i()),r&2){let e=s().$implicit;l(),f(" ",e.notas," ")}}function Pi(r,n){r&1&&(t(0,"span",118),a(1," Opcional "),i())}function Fi(r,n){if(r&1&&(t(0,"span",119),a(1),E(2,"number"),i()),r&2){let e=s().$implicit;l(),f(" +S/ ",D(2,1,e.precio_adicional,"1.2-2")," ")}}function Ti(r,n){if(r&1&&(t(0,"div",112)(1,"div",30)(2,"div",82)(3,"span",113),a(4),i(),g(5,ki,2,2,"span",114)(6,Ei,2,1,"span",115),i(),g(7,Si,2,1,"div",116)(8,wi,2,1,"div",117),i(),t(9,"div",1),g(10,Pi,2,0,"span",118)(11,Fi,3,4,"span",119),i()()),r&2){let e=n.$implicit;l(4),f(" ",e.servicio==null?null:e.servicio.nombre," "),l(),p(e.hora_inicio&&e.hora_fin?5:-1),l(),p(e.duracion_minutos?6:-1),l(),p(!(e.servicio==null||e.servicio.emprendedor==null)&&e.servicio.emprendedor.nombre?7:-1),l(),p(e.notas?8:-1),l(2),p(e.es_opcional?10:-1),l(),p(e.precio_adicional?11:-1)}}function Di(r,n){if(r&1&&(t(0,"div",42)(1,"h5",110),u(),t(2,"svg",83),m(3,"path",111),i(),a(4," Actividades programadas: "),i(),F(5,Ti,12,7,"div",112,Ee),i()),r&2){let e=s().$implicit;l(5),T(e.servicios)}}function Mi(r,n){if(r&1&&(t(0,"div",109)(1,"div",120),u(),t(2,"svg",121),m(3,"path",122),i(),h(),t(4,"div")(5,"p",123),a(6,"Nota importante:"),i(),t(7,"p",124),a(8),i()()()()),r&2){let e=s().$implicit;l(8),x(e.notas_adicionales)}}function Ii(r,n){if(r&1&&(t(0,"div",103)(1,"div",104)(2,"div",82)(3,"span",105),a(4),i(),t(5,"div")(6,"h4",106),a(7),i(),g(8,yi,2,2,"span",71),i()(),g(9,Ci,2,1,"span",107),i(),t(10,"p",108),a(11),i(),g(12,Di,7,0,"div",42)(13,Mi,9,1,"div",109),i()),r&2){let e=n.$implicit;l(4),f(" ",e.numero_dia," "),l(3),x(e.titulo),l(),p(e.hora_inicio&&e.hora_fin?8:-1),l(),p(e.duracion_estimada_minutos?9:-1),l(2),x(e.descripcion),l(),p(e.servicios&&e.servicios.length>0?12:-1),l(),p(e.notas_adicionales?13:-1)}}function Vi(r,n){if(r&1&&(t(0,"div",39)(1,"h3",72),u(),t(2,"svg",101),m(3,"path",102),i(),a(4),i(),h(),t(5,"div",40),F(6,Ii,14,7,"div",103,Ee),i()()),r&2){let e=s(2);l(4),V(" Itinerario (",e.plan.duracion_dias," ",e.plan.duracion_dias===1?"d\xEDa":"d\xEDas",") "),l(2),T(e.plan.dias)}}function zi(r,n){if(r&1&&(t(0,"div")(1,"dt",43),a(2,"Cupos disponibles"),i(),t(3,"dd",44),a(4),i()()),r&2){let e=s(2);l(4),x(e.plan.cupos_disponibles)}}function Li(r,n){if(r&1&&(t(0,"div")(1,"dt",43),a(2,"Emprendedores participantes"),i(),t(3,"dd",44),a(4),i()()),r&2){let e=s(2);l(4),x(e.plan.total_emprendedores)}}function ji(r,n){if(r&1&&(t(0,"div")(1,"dt",43),a(2,"\xDAltima actualizaci\xF3n"),i(),t(3,"dd",44),a(4),E(5,"date"),i()()),r&2){let e=s(2);l(4),f(" ",D(5,1,e.plan.updated_at,"dd/MM/yyyy HH:mm")," ")}}function Ai(r,n){if(r&1&&(t(0,"div")(1,"dt",43),a(2,"Emprendedores colaborando"),i(),t(3,"dd",140),a(4),i()()),r&2){let e=s(3);l(4),x(e.estadisticas.total_emprendedores)}}function Gi(r,n){if(r&1&&(t(0,"div")(1,"dt",43),a(2,"Organizador principal"),i(),t(3,"dd",44),a(4),i()()),r&2){let e=s(3);l(4),x(e.estadisticas.organizador_principal)}}function Bi(r,n){if(r&1&&(t(0,"div",39)(1,"h3",72),u(),t(2,"svg",95),m(3,"path",125),i(),a(4," Estad\xEDsticas "),i(),h(),t(5,"div",74)(6,"div",126)(7,"div",127)(8,"div",128),a(9),i(),t(10,"div",129),a(11,"Total"),i()(),t(12,"div",130)(13,"div",131),a(14),i(),t(15,"div",132),a(16,"Confirmadas"),i()()(),t(17,"div",126)(18,"div",133)(19,"div",134),a(20),i(),t(21,"div",135),a(22,"Pendientes"),i()(),t(23,"div",136)(24,"div",137),a(25),i(),t(26,"div",138),a(27,"Canceladas"),i()()()(),m(28,"hr",139),t(29,"dl",42)(30,"div")(31,"dt",43),a(32,"Total participantes"),i(),t(33,"dd",140),a(34),i()(),t(35,"div")(36,"dt",43),a(37,"Ingresos totales"),i(),t(38,"dd",140),a(39),E(40,"number"),i()(),t(41,"div")(42,"dt",43),a(43,"Promedio participantes/inscripci\xF3n"),i(),t(44,"dd",44),a(45),E(46,"number"),i()(),t(47,"div")(48,"dt",43),a(49,"% Ocupaci\xF3n"),i(),t(50,"dd",141),a(51),E(52,"number"),i()(),g(53,Ai,5,1,"div")(54,Gi,5,1,"div"),i()()),r&2){let e=s(2);l(9),x(e.estadisticas.total_inscripciones),l(5),x(e.estadisticas.inscripciones_confirmadas),l(6),x(e.estadisticas.inscripciones_pendientes),l(5),x(e.estadisticas.inscripciones_canceladas),l(9),x(e.estadisticas.total_participantes),l(5),f("S/ ",D(40,22,e.estadisticas.ingresos_totales,"1.2-2"),""),l(6),x(D(46,25,e.estadisticas.promedio_participantes_por_inscripcion,"1.1-1")),l(5),I("text-green-600",e.estadisticas.porcentaje_ocupacion>=80)("dark:text-green-400",e.estadisticas.porcentaje_ocupacion>=80)("text-yellow-600",e.estadisticas.porcentaje_ocupacion>=50&&e.estadisticas.porcentaje_ocupacion<80)("dark:text-yellow-400",e.estadisticas.porcentaje_ocupacion>=50&&e.estadisticas.porcentaje_ocupacion<80)("text-red-600",e.estadisticas.porcentaje_ocupacion<50)("dark:text-red-400",e.estadisticas.porcentaje_ocupacion<50),l(),f(" ",D(52,28,e.estadisticas.porcentaje_ocupacion,"1.1-1"),"% "),l(2),p(e.estadisticas.total_emprendedores?53:-1),l(),p(e.estadisticas.organizador_principal?54:-1)}}function Hi(r,n){if(r&1){let e=C();t(0,"button",142),_("click",function(){v(e);let d=s(2);return b(d.pausarPlan())}),u(),t(1,"svg",46),m(2,"path",143),i(),a(3," Pausar Plan "),i()}}function Ni(r,n){if(r&1){let e=C();t(0,"button",144),_("click",function(){v(e);let d=s(2);return b(d.activarPlan())}),u(),t(1,"svg",46),m(2,"path",145),i(),a(3," Activar Plan "),i()}}function $i(r,n){if(r&1){let e=C();t(0,"div",148)(1,"img",149),_("click",function(){let d=v(e).$implicit,c=s(3);return b(c.abrirImagenModal(c.getImageUrl(d)))}),i(),t(2,"div",150),u(),t(3,"svg",151),m(4,"path",152),i()()()}if(r&2){let e=n.$implicit,o=n.$index,d=s(3);l(),y("src",d.getImageUrl(e),U)("alt","Imagen "+(o+1)+" de "+d.plan.nombre)}}function Oi(r,n){if(r&1&&(t(0,"div",39)(1,"h3",72),u(),t(2,"svg",98),m(3,"path",146),i(),a(4),i(),h(),t(5,"div",147),F(6,$i,5,2,"div",148,H),i()()),r&2){let e=s(2);l(4),f(" Galer\xEDa (",e.plan.imagenes_galeria_urls.length,") "),l(2),T(e.plan.imagenes_galeria_urls)}}function qi(r,n){if(r&1){let e=C();t(0,"div",17)(1,"div",18),g(2,Rt,2,2)(3,Wt,3,0,"div",19),t(4,"div",20),g(5,Ut,2,0,"span",21)(6,Qt,2,0,"span",22)(7,Jt,2,0,"span",23)(8,Kt,2,0,"span",24)(9,Xt,2,0,"span",25)(10,Yt,2,0,"span",26),i(),t(11,"div",27),g(12,Zt,2,0,"span",21)(13,ei,2,0,"span",23)(14,ti,2,0,"span",22),i()(),t(15,"div",28)(16,"div",29)(17,"div",30)(18,"h1",31),a(19),i(),g(20,li,3,2,"div",32)(21,di,7,2,"div",33),i(),t(22,"div",34),g(23,si,6,4,"div",35),i()(),t(24,"p",36),a(25),i()()(),t(26,"div",37)(27,"div",38),g(28,fi,8,1,"div",39)(29,vi,7,1,"div",39)(30,bi,7,1,"div",39)(31,hi,7,1,"div",39)(32,Vi,8,2,"div",39),i(),t(33,"div",40)(34,"div",39)(35,"h3",41),a(36,"Informaci\xF3n b\xE1sica"),i(),t(37,"dl",42)(38,"div")(39,"dt",43),a(40,"Duraci\xF3n"),i(),t(41,"dd",44),a(42),i()(),t(43,"div")(44,"dt",43),a(45,"Capacidad"),i(),t(46,"dd",44),a(47),i()(),g(48,zi,5,1,"div")(49,Li,5,1,"div"),t(50,"div")(51,"dt",43),a(52,"Creado por"),i(),t(53,"dd",44),a(54),i()(),t(55,"div")(56,"dt",43),a(57,"Fecha de creaci\xF3n"),i(),t(58,"dd",44),a(59),E(60,"date"),i()(),g(61,ji,6,4,"div"),i()(),g(62,Bi,55,31,"div",39),t(63,"div",39)(64,"h3",41),a(65,"Acciones"),i(),t(66,"div",42)(67,"button",45),_("click",function(){v(e);let d=s();return b(d.verInscripciones())}),u(),t(68,"svg",46),m(69,"path",47),i(),a(70," Ver Inscripciones "),i(),h(),t(71,"button",45),_("click",function(){v(e);let d=s();return b(d.duplicarPlan())}),u(),t(72,"svg",46),m(73,"path",48),i(),a(74," Duplicar Plan "),i(),g(75,Hi,4,0,"button",49)(76,Ni,4,0,"button",50),i()(),g(77,Oi,8,1,"div",39),i()()}if(r&2){let e,o,d=s();l(2),p(d.plan.imagen_principal_url?2:3),l(3),p((e=d.plan.estado)==="activo"?5:e==="inactivo"?6:e==="borrador"?7:-1),l(3),p(d.plan.es_publico?8:9),l(2),p(d.plan.emprendedores&&d.plan.emprendedores.length>1?10:-1),l(2),p((o=d.plan.dificultad)==="facil"?12:o==="moderado"?13:o==="dificil"?14:-1),l(7),x(d.plan.nombre),l(),p(d.plan.emprendedores&&d.plan.emprendedores.length>0?20:d.plan.emprendedor?21:-1),l(3),p(d.plan.precio_total?23:-1),l(2),x(d.plan.descripcion),l(3),p(d.plan.emprendedores&&d.plan.emprendedores.length>0?28:-1),l(),p(d.plan.que_incluye?29:-1),l(),p(d.plan.requerimientos?30:-1),l(),p(d.plan.que_llevar?31:-1),l(),p(d.plan.dias&&d.plan.dias.length>0?32:-1),l(10),V("",d.plan.duracion_dias," ",d.plan.duracion_dias===1?"d\xEDa":"d\xEDas",""),l(5),f("",d.plan.capacidad," personas"),l(),p(d.plan.cupos_disponibles!==void 0?48:-1),l(),p(d.plan.total_emprendedores?49:-1),l(5),f(" ",(d.plan.creado_por==null?null:d.plan.creado_por.name)||"Usuario desconocido"," "),l(5),f(" ",D(60,25,d.plan.created_at,"dd/MM/yyyy HH:mm")," "),l(2),p(d.plan.updated_at&&d.plan.updated_at!==d.plan.created_at?61:-1),l(),p(d.estadisticas?62:-1),l(13),p(d.plan.estado==="activo"?75:d.plan.estado==="inactivo"?76:-1),l(2),p(d.plan.imagenes_galeria_urls&&d.plan.imagenes_galeria_urls.length>0?77:-1)}}function Ri(r,n){if(r&1){let e=C();t(0,"div",153),_("click",function(){v(e);let d=s();return b(d.cerrarImagenModal())}),t(1,"div",154),m(2,"img",155),t(3,"button",156),_("click",function(){v(e);let d=s();return b(d.cerrarImagenModal())}),u(),t(4,"svg",157),m(5,"path",158),i()()()()}if(r&2){let e=s();l(2),y("src",e.imagenModalUrl,U)("alt",e.plan==null?null:e.plan.nombre)}}var ke=class r{planesService=w(R);themeService=w(q);route=w(Y);router=w(Z);plan=null;estadisticas=null;loading=!0;imagenModalUrl=null;env=ce;ngOnInit(){this.route.params.subscribe(n=>{let e=+n.id;e&&(this.loadPlan(e),this.loadEstadisticas(e))})}loadPlan(n){this.loading=!0,this.planesService.getPlan(n).subscribe({next:e=>{this.plan=e,this.loading=!1},error:e=>{console.error("Error al cargar plan:",e),this.loading=!1,alert("Error al cargar el plan. Por favor, intente nuevamente.")}})}loadEstadisticas(n){this.planesService.getEstadisticasPlan(n).subscribe({next:e=>{this.estadisticas=e},error:e=>{console.error("Error al cargar estad\xEDsticas:",e)}})}verInscripciones(){this.plan?.id&&this.router.navigate(["/admin/planes/inscripciones"],{queryParams:{planId:this.plan.id}})}duplicarPlan(){this.plan?.id&&confirm('\xBFEst\xE1s seguro de que quieres duplicar este plan? Se crear\xE1 una copia con estado "borrador".')&&(console.log("Duplicar plan:",this.plan.id),alert("Funci\xF3n de duplicar plan - Implementar en el servicio"))}pausarPlan(){this.plan?.id&&confirm("\xBFEst\xE1s seguro de que quieres pausar este plan? No estar\xE1 disponible para nuevas inscripciones.")&&this.cambiarEstadoPlan("inactivo")}activarPlan(){this.plan?.id&&confirm("\xBFEst\xE1s seguro de que quieres activar este plan? Estar\xE1 disponible para inscripciones.")&&this.cambiarEstadoPlan("activo")}cambiarEstadoPlan(n){this.plan?.id&&this.planesService.cambiarEstadoPlan(this.plan.id,n).subscribe({next:e=>{this.plan=e,alert(n==="activo"?"Plan activado exitosamente":"Plan pausado exitosamente")},error:e=>{console.error("Error al cambiar estado del plan:",e),alert("Error al cambiar el estado del plan. Por favor, intente nuevamente.")}})}getImageUrl(n){return n?n.startsWith("http://")||n.startsWith("https://")?n:this.env.assetsUrl+n:""}formatDuration(n){if(!n)return"";let e=Math.floor(n/60),o=n%60;return e===0?`${o} min`:o===0?`${e}h`:`${e}h ${o}min`}abrirImagenModal(n){this.imagenModalUrl=n,document.body.style.overflow="hidden"}cerrarImagenModal(){this.imagenModalUrl=null,document.body.style.overflow="auto"}isDarkMode(){return this.themeService.isDarkMode()}getEmprendedorRolBadgeClass(n){return n.es_organizador_principal?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":n.rol==="organizador"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200"}getEmprendedorRolIcon(n){return n.es_organizador_principal?"\u2B50":n.rol==="organizador"?"\u{1F3AF}":"\u{1F91D}"}getEmprendedorRolText(n){return n.es_organizador_principal?"Organizador Principal":n.rol==="organizador"?"Organizador":"Colaborador"}ngOnDestroy(){document.body.style.overflow="auto"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-planes-detail"]],decls:12,vars:4,consts:[["subtitle","Informaci\xF3n completa del plan tur\xEDstico colaborativo",3,"title"],[1,"flex","items-center","space-x-2"],["routerLink","/admin/planes",1,"inline-flex","items-center","rounded-md","bg-gray-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-0.5","mr-1.5","h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"inline-flex","items-center","rounded-md","bg-primary-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300",3,"routerLink"],[1,"container","mx-auto","px-2","py-6","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"flex","justify-center","items-center","p-8"],[1,"text-center","p-8"],[1,"fixed","inset-0","bg-black","bg-opacity-75","flex","items-center","justify-center","z-50","p-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","border-r-transparent"],[1,"ml-4","text-gray-600","dark:text-gray-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400","dark:text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"mt-2","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","overflow-hidden","mb-6","transition-colors","duration-300"],[1,"relative"],[1,"w-full","h-64","bg-gradient-to-r","from-primary-600","to-primary-800","flex","items-center","justify-center"],[1,"absolute","top-4","left-4","flex","flex-wrap","gap-2"],[1,"inline-flex","items-center","rounded-full","bg-green-100/90","backdrop-blur-sm","px-3","py-1","text-sm","font-medium","text-green-800"],[1,"inline-flex","items-center","rounded-full","bg-red-100/90","backdrop-blur-sm","px-3","py-1","text-sm","font-medium","text-red-800"],[1,"inline-flex","items-center","rounded-full","bg-yellow-100/90","backdrop-blur-sm","px-3","py-1","text-sm","font-medium","text-yellow-800"],[1,"inline-flex","items-center","rounded-full","bg-blue-100/90","backdrop-blur-sm","px-3","py-1","text-sm","font-medium","text-blue-800"],[1,"inline-flex","items-center","rounded-full","bg-gray-100/90","backdrop-blur-sm","px-3","py-1","text-sm","font-medium","text-gray-800"],[1,"inline-flex","items-center","rounded-full","bg-purple-100/90","backdrop-blur-sm","px-3","py-1","text-sm","font-medium","text-purple-800"],[1,"absolute","top-4","right-4"],[1,"p-6"],[1,"flex","flex-col","lg:flex-row","lg:items-start","lg:justify-between","mb-4"],[1,"flex-1"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","mb-2"],[1,"space-y-2"],[1,"flex","items-center","text-sm"],[1,"mt-4","lg:mt-0","lg:ml-4"],[1,"text-right"],[1,"text-gray-700","dark:text-gray-300","leading-relaxed"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6","mb-6"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","p-6","transition-colors","duration-300"],[1,"space-y-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"space-y-3"],[1,"text-sm","font-medium","text-gray-500","dark:text-gray-400"],[1,"text-sm","text-gray-900","dark:text-white"],[1,"w-full","inline-flex","items-center","justify-center","px-4","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"w-full","inline-flex","items-center","justify-center","px-4","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-yellow-500","transition-colors","duration-200"],[1,"w-full","inline-flex","items-center","justify-center","px-4","py-2","border","border-green-300","dark:border-green-600","rounded-md","shadow-sm","text-sm","font-medium","text-green-700","dark:text-green-300","bg-green-50","dark:bg-green-900/20","hover:bg-green-100","dark:hover:bg-green-900/40","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500","transition-colors","duration-200"],[1,"w-full","h-64","object-cover",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/50","to-transparent"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-16","w-16","text-white/80"],[1,"flex","items-start","text-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-yellow-500","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"],[1,"text-gray-600","dark:text-gray-400","font-medium"],[1,"text-gray-800","dark:text-gray-200","ml-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-blue-500","mr-1","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"ml-1","flex","flex-wrap","gap-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","text-xs","font-medium","transition-colors","duration-200"],["fill","currentColor","viewBox","0 0 20 20",1,"h-3","w-3","ml-1"],[1,"text-gray-400"],["fill-rule","evenodd","d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z","clip-rule","evenodd"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-blue-500","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-gray-800","dark:text-gray-200","ml-1","font-medium"],[1,"text-2xl","font-bold","text-primary-600","dark:text-primary-400"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-purple-600","mr-2"],[1,"space-y-4"],[1,"border","border-gray-200","dark:border-gray-600","rounded-lg","p-4",3,"ngClass"],[1,"flex","items-start","justify-between"],[1,"flex","items-center","mb-2"],[1,"text-md","font-semibold","text-gray-900","dark:text-white"],[1,"ml-2","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-yellow-100","dark:bg-yellow-900","text-yellow-800","dark:text-yellow-200"],[1,"ml-2","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"bg-blue-100","dark:bg-blue-900","text-blue-800","dark:text-blue-200","bg-green-100","dark:bg-green-900","text-green-800","dark:text-green-200"],[1,"text-sm","text-gray-600","dark:text-gray-400","space-y-1"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"mt-2","text-sm","text-gray-700","dark:text-gray-300"],["fill","currentColor","viewBox","0 0 20 20",1,"h-3","w-3","mr-1"],[1,"ml-2","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"font-medium"],[1,"text-sm","font-medium","text-primary-600","dark:text-primary-400"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-3","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-green-600","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-gray-700","dark:text-gray-300","whitespace-pre-line"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-blue-600","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-orange-600","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"border-l-4","border-primary-500","pl-6","py-4","bg-gray-50","dark:bg-gray-700/50","rounded-r-lg"],[1,"flex","items-start","justify-between","mb-3"],[1,"inline-flex","items-center","justify-center","w-8","h-8","bg-primary-100","dark:bg-primary-900","text-primary-800","dark:text-primary-200","rounded-full","text-sm","font-bold","mr-3"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","dark:bg-blue-900","text-blue-800","dark:text-blue-200"],[1,"text-gray-700","dark:text-gray-300","mb-4","leading-relaxed"],[1,"mt-4","p-3","bg-yellow-50","dark:bg-yellow-900/20","border-l-4","border-yellow-400","rounded-r"],[1,"text-sm","font-semibold","text-gray-700","dark:text-gray-300","flex","items-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"flex","items-center","justify-between","bg-white","dark:bg-gray-800","rounded-lg","p-3","border","border-gray-200","dark:border-gray-600"],[1,"text-sm","font-medium","text-gray-900","dark:text-white"],[1,"text-xs","text-gray-500","dark:text-gray-400","ml-2","px-2","py-1","bg-gray-100","dark:bg-gray-700","rounded"],[1,"text-xs","text-blue-600","dark:text-blue-400","ml-2"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],[1,"text-xs","text-gray-600","dark:text-gray-400","mt-1","italic"],[1,"inline-flex","items-center","rounded-full","bg-yellow-100","dark:bg-yellow-900","px-2","py-1","text-xs","font-medium","text-yellow-800","dark:text-yellow-200"],[1,"text-sm","font-semibold","text-primary-600","dark:text-primary-400"],[1,"flex","items-start"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-yellow-600","dark:text-yellow-400","mr-2","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"],[1,"text-sm","font-medium","text-yellow-800","dark:text-yellow-200"],[1,"text-sm","text-yellow-700","dark:text-yellow-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"grid","grid-cols-2","gap-3"],[1,"text-center","p-3","bg-blue-50","dark:bg-blue-900/20","rounded-lg"],[1,"text-2xl","font-bold","text-blue-600","dark:text-blue-400"],[1,"text-xs","text-blue-600","dark:text-blue-400"],[1,"text-center","p-3","bg-green-50","dark:bg-green-900/20","rounded-lg"],[1,"text-2xl","font-bold","text-green-600","dark:text-green-400"],[1,"text-xs","text-green-600","dark:text-green-400"],[1,"text-center","p-3","bg-yellow-50","dark:bg-yellow-900/20","rounded-lg"],[1,"text-2xl","font-bold","text-yellow-600","dark:text-yellow-400"],[1,"text-xs","text-yellow-600","dark:text-yellow-400"],[1,"text-center","p-3","bg-red-50","dark:bg-red-900/20","rounded-lg"],[1,"text-2xl","font-bold","text-red-600","dark:text-red-400"],[1,"text-xs","text-red-600","dark:text-red-400"],[1,"my-4","border-gray-200","dark:border-gray-600"],[1,"text-sm","text-gray-900","dark:text-white","font-semibold"],[1,"text-sm","font-semibold"],[1,"w-full","inline-flex","items-center","justify-center","px-4","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-yellow-500","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-full","inline-flex","items-center","justify-center","px-4","py-2","border","border-green-300","dark:border-green-600","rounded-md","shadow-sm","text-sm","font-medium","text-green-700","dark:text-green-300","bg-green-50","dark:bg-green-900/20","hover:bg-green-100","dark:hover:bg-green-900/40","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-6 4h8M7 7h10a2 2 0 012 2v8a2 2 0 01-2 2H7a2 2 0 01-2-2V9a2 2 0 012-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"grid","grid-cols-2","gap-2"],[1,"relative","group"],[1,"w-full","h-20","object-cover","rounded-md","cursor-pointer","hover:opacity-80","transition-opacity","duration-200","border","border-gray-200","dark:border-gray-600",3,"click","src","alt"],[1,"absolute","inset-0","bg-black","bg-opacity-0","group-hover:bg-opacity-20","transition-opacity","duration-200","rounded-md","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-white","opacity-0","group-hover:opacity-100","transition-opacity","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"],[1,"fixed","inset-0","bg-black","bg-opacity-75","flex","items-center","justify-center","z-50","p-4",3,"click"],[1,"max-w-4xl","max-h-full","relative"],[1,"max-w-full","max-h-full","object-contain","rounded-lg","shadow-2xl",3,"src","alt"],[1,"absolute","-top-2","-right-2","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","focus:outline-none","rounded-full","p-2","shadow-lg","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(e,o){e&1&&(t(0,"app-admin-header",0)(1,"div",1)(2,"a",2),u(),t(3,"svg",3),m(4,"path",4),i(),a(5," Volver a Planes "),i(),g(6,$t,4,3,"a",5),i()(),h(),t(7,"div",6),g(8,Ot,4,0,"div",7)(9,qt,7,0,"div",8)(10,qi,78,28),i(),g(11,Ri,6,2,"div",9)),e&2&&(y("title",(o.plan==null?null:o.plan.nombre)||"Detalle del Plan"),l(6),p(o.plan?6:-1),l(2),p(o.loading?8:o.plan?10:9),l(3),p(o.imagenModalUrl?11:-1))},dependencies:[$,X,Q,se,O,W],encapsulation:2})};function Wi(r,n){r&1&&(t(0,"div",8),m(1,"div",10),t(2,"span",11),a(3,"Cargando estad\xEDsticas..."),i()())}function Ui(r,n){if(r&1&&(t(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17),u(),t(6,"svg",18),m(7,"path",19),i()()(),h(),t(8,"div",20)(9,"dl")(10,"dt",21),a(11,"Total de Planes"),i(),t(12,"dd",22),a(13),E(14,"number"),i()()()()()(),t(15,"div",13)(16,"div",14)(17,"div",15)(18,"div",16)(19,"div",23),u(),t(20,"svg",24),m(21,"path",25),i()()(),h(),t(22,"div",20)(23,"dl")(24,"dt",21),a(25,"Planes Activos"),i(),t(26,"dd",22),a(27),E(28,"number"),i()()()()()(),t(29,"div",13)(30,"div",14)(31,"div",15)(32,"div",16)(33,"div",26),u(),t(34,"svg",27),m(35,"path",7),i()()(),h(),t(36,"div",20)(37,"dl")(38,"dt",21),a(39,"Total Inscripciones"),i(),t(40,"dd",22),a(41),E(42,"number"),i()()()()()(),t(43,"div",13)(44,"div",14)(45,"div",15)(46,"div",16)(47,"div",28),u(),t(48,"svg",29),m(49,"path",30),i()()(),h(),t(50,"div",20)(51,"dl")(52,"dt",21),a(53,"Ingresos Totales"),i(),t(54,"dd",22),a(55),E(56,"number"),i()()()()()()(),t(57,"div",31)(58,"div",13)(59,"div",14)(60,"div",15)(61,"div",16)(62,"div",32),u(),t(63,"svg",33),m(64,"path",34),i()()(),h(),t(65,"div",20)(66,"dl")(67,"dt",21),a(68,"Planes P\xFAblicos"),i(),t(69,"dd",22),a(70),E(71,"number"),i()()()()()(),t(72,"div",13)(73,"div",14)(74,"div",15)(75,"div",16)(76,"div",35),u(),t(77,"svg",36),m(78,"path",37),i()()(),h(),t(79,"div",20)(80,"dl")(81,"dt",21),a(82,"Emprendedores con Planes"),i(),t(83,"dd",22),a(84),E(85,"number"),i()()()()()(),t(86,"div",13)(87,"div",14)(88,"div",15)(89,"div",16)(90,"div",38),u(),t(91,"svg",39),m(92,"path",25),i()()(),h(),t(93,"div",20)(94,"dl")(95,"dt",21),a(96,"Inscripciones Confirmadas"),i(),t(97,"dd",22),a(98),E(99,"number"),i()()()()()()(),t(100,"div",40)(101,"div",13)(102,"div",41)(103,"h3",42),a(104,"Distribuci\xF3n por Estado"),i(),t(105,"div",43)(106,"div",44)(107,"div",15),m(108,"div",45),t(109,"span",46),a(110,"Activos"),i()(),t(111,"div",15)(112,"span",47),a(113),i(),t(114,"div",48),m(115,"div",49),i()()(),t(116,"div",44)(117,"div",15),m(118,"div",50),t(119,"span",46),a(120,"Inactivos"),i()(),t(121,"div",15)(122,"span",47),a(123),i(),t(124,"div",48),m(125,"div",51),i()()(),t(126,"div",44)(127,"div",15),m(128,"div",52),t(129,"span",46),a(130,"Borradores"),i()(),t(131,"div",15)(132,"span",47),a(133),i(),t(134,"div",48),m(135,"div",53),i()()()()()(),t(136,"div",13)(137,"div",41)(138,"h3",42),a(139,"Distribuci\xF3n por Dificultad"),i(),t(140,"div",43)(141,"div",44)(142,"div",15),m(143,"div",54),t(144,"span",46),a(145,"F\xE1cil"),i()(),t(146,"div",15)(147,"span",47),a(148),i(),t(149,"div",48),m(150,"div",55),i()()(),t(151,"div",44)(152,"div",15),m(153,"div",56),t(154,"span",46),a(155,"Moderado"),i()(),t(156,"div",15)(157,"span",47),a(158),i(),t(159,"div",48),m(160,"div",57),i()()(),t(161,"div",44)(162,"div",15),m(163,"div",50),t(164,"span",46),a(165,"Dif\xEDcil"),i()(),t(166,"div",15)(167,"span",47),a(168),i(),t(169,"div",48),m(170,"div",51),i()()()()()()(),t(171,"div",13)(172,"div",41)(173,"h3",42),a(174,"Estado de Inscripciones"),i(),t(175,"div",58)(176,"div",59)(177,"div",60),a(178),E(179,"number"),i(),t(180,"div",61),a(181,"Confirmadas"),i()(),t(182,"div",59)(183,"div",62),a(184),E(185,"number"),i(),t(186,"div",61),a(187,"Pendientes"),i()(),t(188,"div",59)(189,"div",63),a(190),E(191,"number"),i(),t(192,"div",61),a(193,"Total"),i()()()()()),r&2){let e=s();l(13),x(G(14,28,e.estadisticas.total_planes)),l(14),x(G(28,30,e.estadisticas.planes_activos)),l(14),x(G(42,32,e.estadisticas.total_inscripciones)),l(14),f("S/ ",D(56,34,e.estadisticas.ingresos_totales,"1.2-2"),""),l(15),x(G(71,37,e.estadisticas.planes_publicos)),l(14),x(G(85,39,e.estadisticas.emprendedores_con_planes)),l(14),x(G(99,41,e.estadisticas.inscripciones_confirmadas)),l(15),x(e.estadisticas.planes_por_estado.activos),l(2),J("width",e.getPercentage(e.estadisticas.planes_por_estado.activos,e.estadisticas.total_planes),"%"),l(8),x(e.estadisticas.planes_por_estado.inactivos),l(2),J("width",e.getPercentage(e.estadisticas.planes_por_estado.inactivos,e.estadisticas.total_planes),"%"),l(8),x(e.estadisticas.planes_por_estado.borradores),l(2),J("width",e.getPercentage(e.estadisticas.planes_por_estado.borradores,e.estadisticas.total_planes),"%"),l(13),x(e.estadisticas.planes_por_dificultad.facil),l(2),J("width",e.getPercentage(e.estadisticas.planes_por_dificultad.facil,e.estadisticas.total_planes),"%"),l(8),x(e.estadisticas.planes_por_dificultad.moderado),l(2),J("width",e.getPercentage(e.estadisticas.planes_por_dificultad.moderado,e.estadisticas.total_planes),"%"),l(8),x(e.estadisticas.planes_por_dificultad.dificil),l(2),J("width",e.getPercentage(e.estadisticas.planes_por_dificultad.dificil,e.estadisticas.total_planes),"%"),l(8),x(G(179,43,e.estadisticas.inscripciones_confirmadas)),l(6),x(G(185,45,e.estadisticas.inscripciones_pendientes)),l(6),x(G(191,47,e.estadisticas.total_inscripciones))}}function Qi(r,n){if(r&1){let e=C();t(0,"div",9)(1,"div",64),a(2,"No se pudieron cargar las estad\xEDsticas"),i(),t(3,"button",65),_("click",function(){v(e);let d=s();return b(d.loadEstadisticas())}),a(4," Reintentar "),i()()}}var Se=class r{planesService=w(R);themeService=w(q);estadisticas=null;loading=!0;ngOnInit(){this.loadEstadisticas()}loadEstadisticas(){this.loading=!0,this.planesService.getEstadisticasGenerales().subscribe({next:n=>{this.estadisticas=n,this.loading=!1},error:n=>{console.error("Error al cargar estad\xEDsticas:",n),this.loading=!1,alert("Error al cargar las estad\xEDsticas. Por favor, intente nuevamente.")}})}getPercentage(n,e){return e===0?0:Math.round(n/e*100)}isDarkMode(){return this.themeService.isDarkMode()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-planes-estadisticas"]],decls:14,vars:1,consts:[["title","Estad\xEDsticas de Planes","subtitle","An\xE1lisis general del sistema de planes tur\xEDsticos"],[1,"container","mx-auto","px-2","py-6","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"flex","items-center","space-x-2","pb-5"],["routerLink","/admin/planes",1,"inline-flex","items-center","rounded-md","bg-gray-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-0.5","mr-1.5","h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["routerLink","/admin/planes/inscripciones",1,"inline-flex","items-center","rounded-md","bg-green-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"flex","justify-center","items-center","p-8"],[1,"text-center","p-8"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","border-r-transparent"],[1,"ml-4","text-gray-600","dark:text-gray-300"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"bg-white","dark:bg-gray-800","overflow-hidden","shadow-sm","rounded-lg","transition-colors","duration-300"],[1,"p-5"],[1,"flex","items-center"],[1,"flex-shrink-0"],[1,"w-8","h-8","bg-blue-100","dark:bg-blue-900/40","rounded-md","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600","dark:text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"ml-5","w-0","flex-1"],[1,"text-sm","font-medium","text-gray-500","dark:text-gray-400","truncate"],[1,"text-lg","font-medium","text-gray-900","dark:text-white"],[1,"w-8","h-8","bg-green-100","dark:bg-green-900/40","rounded-md","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600","dark:text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-8","h-8","bg-purple-100","dark:bg-purple-900/40","rounded-md","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600","dark:text-purple-400"],[1,"w-8","h-8","bg-yellow-100","dark:bg-yellow-900/40","rounded-md","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-600","dark:text-yellow-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"w-8","h-8","bg-indigo-100","dark:bg-indigo-900/40","rounded-md","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-indigo-600","dark:text-indigo-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-8","h-8","bg-orange-100","dark:bg-orange-900/40","rounded-md","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-600","dark:text-orange-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"w-8","h-8","bg-pink-100","dark:bg-pink-900/40","rounded-md","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-pink-600","dark:text-pink-400"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","mb-8"],[1,"p-6"],[1,"text-lg","font-medium","text-gray-900","dark:text-white","mb-4"],[1,"space-y-3"],[1,"flex","items-center","justify-between"],[1,"w-4","h-4","bg-green-500","rounded","mr-3"],[1,"text-sm","text-gray-700","dark:text-gray-300"],[1,"text-sm","font-medium","text-gray-900","dark:text-white","mr-2"],[1,"w-24","bg-gray-200","dark:bg-gray-700","rounded-full","h-2"],[1,"bg-green-500","h-2","rounded-full"],[1,"w-4","h-4","bg-red-500","rounded","mr-3"],[1,"bg-red-500","h-2","rounded-full"],[1,"w-4","h-4","bg-yellow-500","rounded","mr-3"],[1,"bg-yellow-500","h-2","rounded-full"],[1,"w-4","h-4","bg-blue-500","rounded","mr-3"],[1,"bg-blue-500","h-2","rounded-full"],[1,"w-4","h-4","bg-orange-500","rounded","mr-3"],[1,"bg-orange-500","h-2","rounded-full"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"text-center"],[1,"text-2xl","font-bold","text-green-600","dark:text-green-400"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-2xl","font-bold","text-yellow-600","dark:text-yellow-400"],[1,"text-2xl","font-bold","text-gray-600","dark:text-gray-400"],[1,"text-gray-500","dark:text-gray-400"],[1,"mt-4","inline-flex","items-center","px-4","py-2","border","border-transparent","text-sm","font-medium","rounded-md","shadow-sm","text-white","bg-primary-600","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500",3,"click"]],template:function(e,o){e&1&&(m(0,"app-admin-header",0),t(1,"div",1)(2,"div",2)(3,"a",3),u(),t(4,"svg",4),m(5,"path",5),i(),a(6," Volver a Planes "),i(),h(),t(7,"a",6),u(),t(8,"svg",4),m(9,"path",7),i(),a(10," Ver Inscripciones "),i()(),g(11,Wi,4,0,"div",8)(12,Ui,194,49)(13,Qi,5,0,"div",9),i()),e&2&&(l(11),p(o.loading?11:o.estadisticas?12:13))},dependencies:[$,Q,O,W],encapsulation:2})};var Ji=r=>["/admin/planes",r,"detail"],Ki=(r,n,e,o,d,c,P,S,A,B)=>({"bg-primary-50":r,"bg-primary-900/40":n,"text-primary-600":e,"text-primary-300":o,"bg-white":d,"bg-gray-700":c,"text-gray-700":P,"text-gray-300":S,"hover:bg-gray-50":A,"hover:bg-gray-600":B}),Xi=(r,n,e,o,d)=>({"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":r,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":n,"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":e,"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":o,"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":d}),Ue=(r,n)=>n.id;function Yi(r,n){if(r&1&&a(0),r&2){let e=s(2);f(" Organizador: ",e.planSeleccionado.organizador_principal.nombre," ")}}function Zi(r,n){if(r&1&&a(0),r&2){let e=s(2);f(" Emprendedor: ",e.planSeleccionado.emprendedor.nombre," ")}}function en(r,n){if(r&1&&(t(0,"div",1)(1,"div",28),u(),t(2,"svg",29),m(3,"path",30),i(),h(),t(4,"div")(5,"div",31),a(6),i(),t(7,"div",32),g(8,Yi,1,1)(9,Zi,1,1),i()()()()),r&2){let e=s();l(6),x(e.planSeleccionado.nombre),l(2),p(e.planSeleccionado.organizador_principal?8:e.planSeleccionado.emprendedor?9:-1)}}function tn(r,n){if(r&1&&(t(0,"a",7),u(),t(1,"svg",5),m(2,"path",33),i(),a(3," Ver Detalle del Plan "),i()),r&2){let e=s();y("routerLink",K(1,Ji,e.planSeleccionado.id))}}function nn(r,n){if(r&1){let e=C();t(0,"button",34),_("click",function(){v(e);let d=s();return b(d.limpiarFiltroPlan())}),u(),t(1,"svg",5),m(2,"path",35),i(),a(3," Ver Todas las Inscripciones "),i()}}function rn(r,n){if(r&1&&(t(0,"div",9)(1,"div",36)(2,"div",37),a(3),i(),t(4,"div",38),a(5,"Total"),i()(),t(6,"div",36)(7,"div",39),a(8),i(),t(9,"div",38),a(10,"Pendientes"),i()(),t(11,"div",36)(12,"div",40),a(13),i(),t(14,"div",38),a(15,"Confirmadas"),i()(),t(16,"div",36)(17,"div",41),a(18),i(),t(19,"div",38),a(20,"En Progreso"),i()(),t(21,"div",36)(22,"div",42),a(23),i(),t(24,"div",38),a(25,"Completadas"),i()()()),r&2){let e=s();l(3),x(e.estadisticasRapidas.total),l(5),x(e.estadisticasRapidas.pendientes),l(5),x(e.estadisticasRapidas.confirmadas),l(5),x(e.estadisticasRapidas.en_progreso),l(5),x(e.estadisticasRapidas.completadas)}}function an(r,n){if(r&1&&(t(0,"option",43),a(1),i()),r&2){let e=n.$implicit;y("value",e.id),l(),x(e.nombre)}}function on(r,n){if(r&1){let e=C();t(0,"div")(1,"label",12),a(2,"Plan espec\xEDfico"),i(),t(3,"select",13),j("ngModelChange",function(d){v(e);let c=s();return L(c.filtros.plan_id,d)||(c.filtros.plan_id=d),b(d)}),_("change",function(){v(e);let d=s();return b(d.onFiltroChange())}),t(4,"option",14),a(5,"Todos los planes"),i(),F(6,an,2,2,"option",43,Ue),i()()}if(r&2){let e=s();l(3),z("ngModel",e.filtros.plan_id),l(3),T(e.planesDisponibles)}}function ln(r,n){r&1&&(t(0,"div",25),m(1,"div",44),t(2,"span",45),a(3,"Cargando inscripciones..."),i()())}function dn(r,n){r&1&&a(0," No hay inscripciones para este plan con los filtros seleccionados. ")}function sn(r,n){r&1&&a(0," No hay inscripciones que coincidan con los filtros seleccionados. ")}function cn(r,n){if(r&1&&(t(0,"div",26),u(),t(1,"svg",46),m(2,"path",47),i(),h(),t(3,"h3",48),a(4,"No se encontraron inscripciones"),i(),t(5,"p",49),g(6,dn,1,0)(7,sn,1,0),i()()),r&2){let e=s();l(6),p(e.planSeleccionado?6:7)}}function mn(r,n){r&1&&(t(0,"th",54),a(1,"Plan"),i())}function pn(r,n){if(r&1&&(t(0,"div",67),a(1),i()),r&2){let e=s().$implicit;l(),f(" \u{1F4DE} ",e.usuario==null?null:e.usuario.phone," ")}}function un(r,n){if(r&1&&(t(0,"div",95),a(1),i()),r&2){let e=s(2).$implicit;l(),f(" \u{1F464} ",e.plan==null||e.plan.organizador_principal==null?null:e.plan.organizador_principal.nombre," ")}}function gn(r,n){if(r&1&&(t(0,"div",95),a(1),i()),r&2){let e=s(2).$implicit;l(),f(" \u{1F464} ",e.plan==null||e.plan.emprendedor==null?null:e.plan.emprendedor.nombre," ")}}function _n(r,n){if(r&1&&(t(0,"td",68)(1,"div",93)(2,"div",94),a(3),i(),g(4,un,2,1,"div",95)(5,gn,2,1,"div",95),i()()),r&2){let e=s().$implicit;l(3),f(" ",(e.plan==null?null:e.plan.nombre)||"Plan no disponible"," "),l(),p(!(e.plan==null||e.plan.organizador_principal==null)&&e.plan.organizador_principal.nombre?4:!(e.plan==null||e.plan.emprendedor==null)&&e.plan.emprendedor.nombre?5:-1)}}function xn(r,n){if(r&1&&(t(0,"div",97),a(1),i()),r&2){let e=s(2).$implicit;l(),f(" ",e.metodo_pago," ")}}function fn(r,n){if(r&1&&(t(0,"div",96),a(1),E(2,"number"),i(),g(3,xn,2,1,"div",97)),r&2){let e=s().$implicit;l(),f(" S/ ",D(2,2,e.precio_pagado,"1.2-2")," "),l(2),p(e.metodo_pago?3:-1)}}function vn(r,n){r&1&&(t(0,"span",74),a(1,"Sin precio"),i())}function bn(r,n){if(r&1&&(t(0,"div",98),a(1),E(2,"date"),i(),t(3,"div",82),a(4),E(5,"date"),i()),r&2){let e=s().$implicit;l(),f(" ",D(2,2,e.fecha_inscripcion,"dd/MM/yyyy")," "),l(3),f(" ",D(5,5,e.fecha_inscripcion,"HH:mm")," ")}}function hn(r,n){r&1&&(t(0,"span",74),a(1,"No disponible"),i())}function yn(r,n){r&1&&(t(0,"span",76),u(),t(1,"svg",99),m(2,"path",100),i(),a(3," Pendiente "),i())}function Cn(r,n){r&1&&(t(0,"span",77),u(),t(1,"svg",99),m(2,"path",101),i(),a(3," Confirmada "),i())}function kn(r,n){r&1&&(t(0,"span",78),u(),t(1,"svg",99),m(2,"path",102),i(),a(3," Cancelada "),i())}function En(r,n){r&1&&(t(0,"span",79),u(),t(1,"svg",99),m(2,"path",103),i(),a(3," Completada "),i())}function Sn(r,n){r&1&&(t(0,"span",80),u(),t(1,"svg",104),m(2,"path",23),i(),a(3," En Progreso "),i())}function wn(r,n){if(r&1&&(t(0,"span",81),a(1),i()),r&2){let e=s().$implicit;l(),f(" ",e.estado," ")}}function Pn(r,n){if(r&1&&(t(0,"div",82),a(1),E(2,"date"),i()),r&2){let e=s().$implicit;l(),f(" \u{1F5D3}\uFE0F ",D(2,1,e.fecha_inicio_plan,"dd/MM/yyyy")," ")}}function Fn(r,n){if(r&1&&a(0),r&2){let e=s(2).$implicit;f(" \u23F0 En ",e.dias_para_inicio," d\xEDas ")}}function Tn(r,n){r&1&&a(0," \u{1F680} Hoy ")}function Dn(r,n){r&1&&a(0," \u2705 Iniciado ")}function Mn(r,n){if(r&1&&(t(0,"div",105),g(1,Fn,1,1)(2,Tn,1,0)(3,Dn,1,0),i()),r&2){let e=s().$implicit;I("text-red-600",e.dias_para_inicio<=3)("text-yellow-600",e.dias_para_inicio>3&&e.dias_para_inicio<=7)("text-green-600",e.dias_para_inicio>7),l(),p(e.dias_para_inicio>0?1:e.dias_para_inicio===0?2:3)}}function In(r,n){if(r&1){let e=C();t(0,"button",106),_("click",function(){v(e);let d=s().$implicit,c=s(2);return b(c.confirmarInscripcion(d))}),u(),t(1,"svg",87),m(2,"path",107),i()()}}function Vn(r,n){if(r&1){let e=C();t(0,"button",108),_("click",function(){v(e);let d=s().$implicit,c=s(2);return b(c.marcarCompletada(d))}),u(),t(1,"svg",87),m(2,"path",109),i()()}}function zn(r,n){if(r&1){let e=C();t(0,"button",110),_("click",function(){v(e);let d=s().$implicit,c=s(2);return b(c.cancelarInscripcion(d))}),u(),t(1,"svg",87),m(2,"path",35),i()()}}function Ln(r,n){if(r&1){let e=C();t(0,"tr",59)(1,"td",61)(2,"div",28)(3,"div",62)(4,"div",63)(5,"span",64),a(6),i()()(),t(7,"div",65)(8,"div",66),a(9),i(),t(10,"div",67),a(11),i(),g(12,pn,2,1,"div",67),i()()(),g(13,_n,6,2,"td",68),t(14,"td",69)(15,"div",28),u(),t(16,"svg",70),m(17,"path",47),i(),h(),t(18,"span",71),a(19),i()()(),t(20,"td",72)(21,"div",73),g(22,fn,4,5)(23,vn,2,0,"span",74),i()(),t(24,"td",72)(25,"div",73),g(26,bn,6,8)(27,hn,2,0,"span",74),i()(),t(28,"td",61)(29,"div",75),g(30,yn,4,0,"span",76)(31,Cn,4,0,"span",77)(32,kn,4,0,"span",78)(33,En,4,0,"span",79)(34,Sn,4,0,"span",80)(35,wn,2,1,"span",81)(36,Pn,3,4,"div",82)(37,Mn,4,7,"div",83),i()(),t(38,"td",84)(39,"div",85)(40,"button",86),_("click",function(){let d=v(e).$implicit,c=s(2);return b(c.verDetalle(d))}),u(),t(41,"svg",87),m(42,"path",88)(43,"path",89),i()(),g(44,In,3,0,"button",90)(45,Vn,3,0,"button",91)(46,zn,3,0,"button",92),i()()()}if(r&2){let e,o=n.$implicit,d=s(2);l(6),f(" ",d.getUserInitials((o.usuario==null?null:o.usuario.name)||"")," "),l(3),f(" ",(o.usuario==null?null:o.usuario.name)||"Usuario desconocido"," "),l(2),f(" ",o.usuario==null?null:o.usuario.email," "),l(),p(o.usuario!=null&&o.usuario.phone?12:-1),l(),p(d.planSeleccionado?-1:13),l(6),f(" ",o.numero_participantes," "),l(3),p(o.precio_pagado?22:23),l(4),p(o.fecha_inscripcion?26:27),l(4),p((e=o.estado)==="pendiente"?30:e==="confirmada"?31:e==="cancelada"?32:e==="completada"?33:e==="en_progreso"?34:35),l(6),p(o.fecha_inicio_plan?36:-1),l(),p(o.dias_para_inicio!==void 0?37:-1),l(7),p(o.estado==="pendiente"?44:-1),l(),p(o.estado==="confirmada"||o.estado==="en_progreso"?45:-1),l(),p(o.estado!=="completada"&&o.estado!=="cancelada"?46:-1)}}function jn(r,n){if(r&1){let e=C();t(0,"button",123),_("click",function(){v(e);let d=s().$implicit,c=s(3);return b(c.goToPage(+d.label))}),a(1),i()}if(r&2){let e=s().$implicit,o=s(3);y("ngClass",de(3,Ki,[e.active&&!o.isDarkMode(),e.active&&o.isDarkMode(),e.active&&!o.isDarkMode(),e.active&&o.isDarkMode(),!e.active&&!o.isDarkMode(),!e.active&&o.isDarkMode(),!e.active&&!o.isDarkMode(),!e.active&&o.isDarkMode(),!e.active&&!o.isDarkMode(),!e.active&&o.isDarkMode()]))("disabled",e.active),l(),f(" ",e.label," ")}}function An(r,n){if(r&1&&g(0,jn,2,14,"button",122),r&2){let e=n.$implicit,o=s(3);p(e.label!=="&laquo; Previous"&&e.label!=="Next &raquo;"&&o.isValidPageNumber(e.label)?0:-1)}}function Gn(r,n){if(r&1){let e=C();t(0,"div",60)(1,"div",111)(2,"div")(3,"p",112)(4,"span",113),a(5,"Mostrando"),i(),t(6,"span",114),a(7),i(),a(8," a "),t(9,"span",114),a(10),i(),a(11," de "),t(12,"span",114),a(13),i(),a(14," inscripciones "),i()(),t(15,"div",115)(16,"nav",116)(17,"button",117),_("click",function(){v(e);let d=s(2);return b(d.goToPage(d.currentPage-1))}),t(18,"span",118),a(19,"Anterior"),i(),u(),t(20,"svg",87),m(21,"path",119),i()(),F(22,An,1,1,null,null,H),h(),t(24,"button",120),_("click",function(){v(e);let d=s(2);return b(d.goToPage(d.currentPage+1))}),t(25,"span",118),a(26,"Siguiente"),i(),u(),t(27,"svg",87),m(28,"path",121),i()()()()()()}if(r&2){let e=s(2);l(7),x(e.pagination.from||0),l(3),x(e.pagination.to||0),l(3),x(e.pagination.total),l(4),I("opacity-50",!e.pagination.prev_page_url)("cursor-not-allowed",!e.pagination.prev_page_url),y("disabled",!e.pagination.prev_page_url),l(5),T(e.pagination.links),l(2),I("opacity-50",!e.pagination.next_page_url)("cursor-not-allowed",!e.pagination.next_page_url),y("disabled",!e.pagination.next_page_url)}}function Bn(r,n){if(r&1&&(t(0,"div",50)(1,"table",51)(2,"thead",52)(3,"tr")(4,"th",53),a(5,"Usuario"),i(),g(6,mn,2,0,"th",54),t(7,"th",55),a(8,"Participantes"),i(),t(9,"th",56),a(10,"Precio"),i(),t(11,"th",56),a(12,"Fecha Inscripci\xF3n"),i(),t(13,"th",53),a(14,"Estado"),i(),t(15,"th",57),a(16,"Acciones"),i()()(),t(17,"tbody",58),F(18,Ln,47,14,"tr",59,Ue),i()()(),g(20,Gn,29,13,"div",60)),r&2){let e=s();l(6),p(e.planSeleccionado?-1:6),l(12),T(e.pagination.data),l(2),p(e.pagination?20:-1)}}function Hn(r,n){if(r&1&&(t(0,"div")(1,"span",136),a(2,"Tel\xE9fono:"),i(),t(3,"p",137),a(4),i()()),r&2){let e=s(2);l(4),x(e.inscripcionSeleccionada.usuario==null?null:e.inscripcionSeleccionada.usuario.phone)}}function Nn(r,n){if(r&1&&(t(0,"div")(1,"span",136),a(2,"Organizador Principal:"),i(),t(3,"p",137),a(4),i()()),r&2){let e=s(2);l(4),x(e.inscripcionSeleccionada.plan==null||e.inscripcionSeleccionada.plan.organizador_principal==null?null:e.inscripcionSeleccionada.plan.organizador_principal.nombre)}}function $n(r,n){if(r&1&&(t(0,"div")(1,"span",136),a(2,"Emprendedor:"),i(),t(3,"p",137),a(4),i()()),r&2){let e=s(2);l(4),x(e.inscripcionSeleccionada.plan==null||e.inscripcionSeleccionada.plan.emprendedor==null?null:e.inscripcionSeleccionada.plan.emprendedor.nombre)}}function On(r,n){if(r&1&&(t(0,"div")(1,"span",136),a(2,"Duraci\xF3n:"),i(),t(3,"p",137),a(4),i()()),r&2){let e=s(2);l(4),f("",e.inscripcionSeleccionada.plan==null?null:e.inscripcionSeleccionada.plan.duracion_dias," d\xEDas")}}function qn(r,n){if(r&1&&(t(0,"div")(1,"span",136),a(2,"Precio Pagado:"),i(),t(3,"p",150),a(4),E(5,"number"),i()()),r&2){let e=s(2);l(4),f(" S/ ",D(5,1,e.inscripcionSeleccionada.precio_pagado,"1.2-2")," ")}}function Rn(r,n){if(r&1&&(t(0,"div")(1,"span",136),a(2,"M\xE9todo de pago:"),i(),t(3,"p",151),a(4),i()()),r&2){let e=s(2);l(4),x(e.inscripcionSeleccionada.metodo_pago)}}function Wn(r,n){if(r&1&&(t(0,"div")(1,"span",154),a(2,"Inicio:"),i(),t(3,"p",155),a(4),E(5,"date"),i()()),r&2){let e=s(3);l(4),x(D(5,1,e.inscripcionSeleccionada.fecha_inicio_plan,"dd/MM/yyyy"))}}function Un(r,n){if(r&1&&(t(0,"div")(1,"span",154),a(2,"Fin:"),i(),t(3,"p",155),a(4),E(5,"date"),i()()),r&2){let e=s(3);l(4),x(D(5,1,e.inscripcionSeleccionada.fecha_fin_plan,"dd/MM/yyyy"))}}function Qn(r,n){if(r&1&&(t(0,"div",142)(1,"h5",152),a(2,"\u{1F4C5} Fechas del Plan"),i(),t(3,"div",153),g(4,Wn,6,4,"div")(5,Un,6,4,"div"),i()()),r&2){let e=s(2);l(4),p(e.inscripcionSeleccionada.fecha_inicio_plan?4:-1),l(),p(e.inscripcionSeleccionada.fecha_fin_plan?5:-1)}}function Jn(r,n){if(r&1&&(t(0,"div",157)(1,"span",158),a(2,"Notas del usuario:"),i(),t(3,"p",159),a(4),i()()),r&2){let e=s(3);l(4),x(e.inscripcionSeleccionada.notas_usuario)}}function Kn(r,n){if(r&1&&(t(0,"div",157)(1,"span",158),a(2,"Requerimientos especiales:"),i(),t(3,"p",159),a(4),i()()),r&2){let e=s(3);l(4),x(e.inscripcionSeleccionada.requerimientos_especiales)}}function Xn(r,n){if(r&1&&(t(0,"div")(1,"span",158),a(2,"Comentarios adicionales:"),i(),t(3,"p",159),a(4),i()()),r&2){let e=s(3);l(4),x(e.inscripcionSeleccionada.comentarios_adicionales)}}function Yn(r,n){if(r&1&&(t(0,"div",143)(1,"h5",156),a(2,"\u{1F4AC} Notas y Comentarios"),i(),g(3,Jn,5,1,"div",157)(4,Kn,5,1,"div",157)(5,Xn,5,1,"div"),i()),r&2){let e=s(2);l(3),p(e.inscripcionSeleccionada.notas_usuario?3:-1),l(),p(e.inscripcionSeleccionada.requerimientos_especiales?4:-1),l(),p(e.inscripcionSeleccionada.comentarios_adicionales?5:-1)}}function Zn(r,n){if(r&1){let e=C();t(0,"button",160),_("click",function(){v(e);let d=s(2);return b(d.confirmarInscripcionDesdeModal())}),u(),t(1,"svg",161),m(2,"path",109),i(),a(3," Confirmar "),i()}}function er(r,n){if(r&1){let e=C();t(0,"button",162),_("click",function(){v(e);let d=s(2);return b(d.marcarCompletadaDesdeModal())}),u(),t(1,"svg",161),m(2,"path",109),i(),a(3," Marcar Completada "),i()}}function tr(r,n){if(r&1){let e=C();t(0,"button",163),_("click",function(){v(e);let d=s(2);return b(d.cancelarInscripcionDesdeModal())}),u(),t(1,"svg",161),m(2,"path",35),i(),a(3," Cancelar "),i()}}function ir(r,n){if(r&1){let e=C();t(0,"div",124),_("click",function(){v(e);let d=s();return b(d.cerrarModal())}),t(1,"div",125),_("click",function(d){return v(e),b(d.stopPropagation())}),t(2,"div",126)(3,"div")(4,"h3",127),a(5,"Detalle de Inscripci\xF3n"),i(),t(6,"p",128),a(7),E(8,"date"),i()(),t(9,"button",129),_("click",function(){v(e);let d=s();return b(d.cerrarModal())}),u(),t(10,"svg",130),m(11,"path",35),i()()(),h(),t(12,"div",131)(13,"div",132)(14,"div",133)(15,"h4",134),a(16," \u{1F464} Informaci\xF3n del Usuario "),i(),t(17,"div",135)(18,"div")(19,"span",136),a(20,"Nombre:"),i(),t(21,"p",137),a(22),i()(),t(23,"div")(24,"span",136),a(25,"Email:"),i(),t(26,"p",137),a(27),i()(),g(28,Hn,5,1,"div"),i()(),t(29,"div",133)(30,"h4",134),a(31," \u{1F3AF} Informaci\xF3n del Plan "),i(),t(32,"div",135)(33,"div")(34,"span",136),a(35,"Plan:"),i(),t(36,"p",137),a(37),i()(),g(38,Nn,5,1,"div")(39,$n,5,1,"div")(40,On,5,1,"div"),i()()(),t(41,"div",138)(42,"h4",134),a(43," \u{1F4CB} Detalles de la Inscripci\xF3n "),i(),t(44,"div",139)(45,"div")(46,"span",136),a(47,"Participantes:"),i(),t(48,"p",140),a(49),i()(),t(50,"div")(51,"span",136),a(52,"Estado:"),i(),t(53,"p",73)(54,"span",141),a(55),E(56,"titlecase"),i()()(),g(57,qn,6,4,"div"),i(),g(58,Rn,5,1,"div")(59,Qn,6,2,"div",142)(60,Yn,6,3,"div",143),i()(),t(61,"div",144)(62,"div",145),g(63,Zn,4,0,"button",146)(64,er,4,0,"button",147)(65,tr,4,0,"button",148),i(),t(66,"button",149),_("click",function(){v(e);let d=s();return b(d.cerrarModal())}),a(67," Cerrar "),i()()()()}if(r&2){let e=s();l(7),V(" ID: #",e.inscripcionSeleccionada.id," \u2022 ",D(8,18,e.inscripcionSeleccionada.fecha_inscripcion,"dd/MM/yyyy HH:mm")," "),l(15),x((e.inscripcionSeleccionada.usuario==null?null:e.inscripcionSeleccionada.usuario.name)||"No disponible"),l(5),x((e.inscripcionSeleccionada.usuario==null?null:e.inscripcionSeleccionada.usuario.email)||"No disponible"),l(),p(e.inscripcionSeleccionada.usuario!=null&&e.inscripcionSeleccionada.usuario.phone?28:-1),l(9),x((e.inscripcionSeleccionada.plan==null?null:e.inscripcionSeleccionada.plan.nombre)||"No disponible"),l(),p(!(e.inscripcionSeleccionada.plan==null||e.inscripcionSeleccionada.plan.organizador_principal==null)&&e.inscripcionSeleccionada.plan.organizador_principal.nombre?38:!(e.inscripcionSeleccionada.plan==null||e.inscripcionSeleccionada.plan.emprendedor==null)&&e.inscripcionSeleccionada.plan.emprendedor.nombre?39:-1),l(2),p(e.inscripcionSeleccionada.plan!=null&&e.inscripcionSeleccionada.plan.duracion_dias?40:-1),l(9),x(e.inscripcionSeleccionada.numero_participantes),l(5),y("ngClass",Le(23,Xi,e.inscripcionSeleccionada.estado==="pendiente",e.inscripcionSeleccionada.estado==="confirmada",e.inscripcionSeleccionada.estado==="en_progreso",e.inscripcionSeleccionada.estado==="completada",e.inscripcionSeleccionada.estado==="cancelada")),l(),f(" ",G(56,21,e.inscripcionSeleccionada.estado)," "),l(2),p(e.inscripcionSeleccionada.precio_pagado?57:-1),l(),p(e.inscripcionSeleccionada.metodo_pago?58:-1),l(),p(e.inscripcionSeleccionada.fecha_inicio_plan||e.inscripcionSeleccionada.fecha_fin_plan?59:-1),l(),p(e.inscripcionSeleccionada.notas_usuario||e.inscripcionSeleccionada.requerimientos_especiales||e.inscripcionSeleccionada.comentarios_adicionales?60:-1),l(3),p(e.inscripcionSeleccionada.estado==="pendiente"?63:-1),l(),p(e.inscripcionSeleccionada.estado==="confirmada"||e.inscripcionSeleccionada.estado==="en_progreso"?64:-1),l(),p(e.inscripcionSeleccionada.estado!=="completada"&&e.inscripcionSeleccionada.estado!=="cancelada"?65:-1)}}var we=class r{planesService=w(R);themeService=w(q);route=w(Y);router=w(Z);pagination=null;loading=!0;currentPage=1;inscripcionSeleccionada=null;planSeleccionado=null;planesDisponibles=[];estadisticasRapidas=null;filtros={page:1,per_page:15};filtroTimeout;ngOnInit(){this.route.queryParams.subscribe(n=>{if(n.planId){let e=+n.planId;this.filtros.plan_id=e,this.loadPlanSeleccionado(e)}}),this.loadPlanesDisponibles(),this.loadInscripciones(),this.loadEstadisticasRapidas()}loadPlanSeleccionado(n){this.planesService.getPlan(n).subscribe({next:e=>{this.planSeleccionado=e},error:e=>{console.error("Error al cargar plan seleccionado:",e)}})}loadPlanesDisponibles(){this.planesService.getPlanes({per_page:100,estado:"activo"}).subscribe({next:n=>{this.planesDisponibles=n.data},error:n=>{console.error("Error al cargar planes disponibles:",n)}})}loadEstadisticasRapidas(){let n=Pe({},this.filtros);delete n.page,delete n.per_page,this.planesService.getAllInscripciones(Ve(Pe({},n),{per_page:1e3})).subscribe({next:e=>{let o=e.data;this.estadisticasRapidas={total:o.length,pendientes:o.filter(d=>d.estado==="pendiente").length,confirmadas:o.filter(d=>d.estado==="confirmada").length,en_progreso:o.filter(d=>d.estado==="en_progreso").length,completadas:o.filter(d=>d.estado==="completada").length,canceladas:o.filter(d=>d.estado==="cancelada").length}},error:e=>{console.error("Error al cargar estad\xEDsticas r\xE1pidas:",e)}})}getPageTitle(){return this.planSeleccionado?`Inscripciones - ${this.planSeleccionado.nombre}`:"Gesti\xF3n de Inscripciones"}getPageSubtitle(){return this.planSeleccionado?"Administra las inscripciones de este plan espec\xEDfico":"Administra todas las inscripciones a planes tur\xEDsticos"}limpiarFiltroPlan(){this.planSeleccionado=null,this.filtros.plan_id=void 0,this.router.navigate([],{relativeTo:this.route,queryParams:{},queryParamsHandling:"replace"}),this.loadInscripciones(),this.loadEstadisticasRapidas()}confirmarInscripcionDesdeModal(){this.inscripcionSeleccionada&&this.confirmarInscripcion(this.inscripcionSeleccionada)}marcarCompletadaDesdeModal(){this.inscripcionSeleccionada&&this.marcarCompletada(this.inscripcionSeleccionada)}cancelarInscripcionDesdeModal(){this.inscripcionSeleccionada&&this.cancelarInscripcion(this.inscripcionSeleccionada)}isDarkMode(){return this.themeService.isDarkMode()}loadInscripciones(){this.loading=!0,this.filtros.page=this.currentPage,this.planesService.getAllInscripciones(this.filtros).subscribe({next:n=>{this.pagination=n,this.loading=!1},error:n=>{console.error("Error al cargar inscripciones:",n),this.loading=!1,alert("Error al cargar las inscripciones. Por favor, intente nuevamente.")}})}onFiltroChange(){this.filtroTimeout&&clearTimeout(this.filtroTimeout),this.filtroTimeout=setTimeout(()=>{this.currentPage=1,this.loadInscripciones(),this.loadEstadisticasRapidas()},500)}limpiarFiltros(){let n=this.filtros.plan_id;this.filtros={page:1,per_page:15},this.planSeleccionado&&(this.filtros.plan_id=n),this.currentPage=1,this.loadInscripciones(),this.loadEstadisticasRapidas()}goToPage(n){this.pagination&&(n<1||n>this.pagination.last_page||(this.currentPage=n,this.loadInscripciones()))}isValidPageNumber(n){return!isNaN(+n)}getUserInitials(n){if(!n)return"?";let e=n.trim().split(" ");return e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase()}verDetalle(n){n.id&&this.planesService.getInscripcion(n.id).subscribe({next:e=>{this.inscripcionSeleccionada=e,document.body.style.overflow="hidden"},error:e=>{console.error("Error al cargar detalle de inscripci\xF3n:",e),alert("Error al cargar el detalle de la inscripci\xF3n.")}})}confirmarInscripcion(n){if(!n.id)return;let e=`
      <div style="font-family: system-ui; padding: 20px;">
        <h3 style="margin-bottom: 15px; color: #1f2937;">Confirmar Inscripci\xF3n</h3>
        <p style="margin-bottom: 15px; color: #6b7280;">Ingresa las fechas del plan para ${n.usuario?.name}:</p>
        
        <div style="margin-bottom: 10px;">
          <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Fecha de inicio:</label>
          <input type="date" id="fechaInicio" style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
        </div>
        
        <div style="margin-bottom: 20px;">
          <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Fecha de fin (opcional):</label>
          <input type="date" id="fechaFin" style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
        </div>
        
        <div style="text-align: right;">
          <button onclick="this.closest('div').parentElement.remove()" style="margin-right: 10px; padding: 8px 16px; background: #6b7280; color: white; border: none; border-radius: 6px; cursor: pointer;">Cancelar</button>
          <button onclick="confirmarConFechas()" style="padding: 8px 16px; background: #059669; color: white; border: none; border-radius: 6px; cursor: pointer;">Confirmar</button>
        </div>
      </div>
    `,o=document.createElement("div");o.innerHTML=e,o.style.cssText="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;",window.confirmarConFechas=()=>{let d=document.getElementById("fechaInicio")?.value,c=document.getElementById("fechaFin")?.value;if(!d){alert("La fecha de inicio es obligatoria");return}let P={estado:"confirmada",fecha_inicio_plan:d};c&&(P.fecha_fin_plan=c),this.planesService.updateInscripcion(n.id,P).subscribe({next:S=>{Object.assign(n,S),this.inscripcionSeleccionada?.id===n.id&&(this.inscripcionSeleccionada=S),alert("Inscripci\xF3n confirmada correctamente"),o.remove(),delete window.confirmarConFechas,this.loadEstadisticasRapidas()},error:S=>{console.error("Error al confirmar inscripci\xF3n:",S),alert("Error al confirmar la inscripci\xF3n. Por favor, intente nuevamente.")}})},document.body.appendChild(o)}cancelarInscripcion(n){if(!n.id)return;let e=prompt("Motivo de la cancelaci\xF3n (opcional):");confirm(`\xBFEst\xE1 seguro de cancelar la inscripci\xF3n de ${n.usuario?.name}?`)&&this.planesService.cancelarInscripcion(n.id,e||void 0).subscribe({next:o=>{Object.assign(n,o),this.inscripcionSeleccionada?.id===n.id&&(this.inscripcionSeleccionada=o),alert("Inscripci\xF3n cancelada correctamente"),this.loadEstadisticasRapidas()},error:o=>{console.error("Error al cancelar inscripci\xF3n:",o),alert("Error al cancelar la inscripci\xF3n. Por favor, intente nuevamente.")}})}marcarCompletada(n){if(!n.id)return;let e=prompt("Comentarios finales sobre la experiencia (opcional):");confirm(`\xBFEst\xE1 seguro de marcar como completada la inscripci\xF3n de ${n.usuario?.name}?`)&&this.planesService.marcarCompletada(n.id,e||void 0).subscribe({next:o=>{Object.assign(n,o),this.inscripcionSeleccionada?.id===n.id&&(this.inscripcionSeleccionada=o),alert("Inscripci\xF3n marcada como completada"),this.loadEstadisticasRapidas()},error:o=>{console.error("Error al marcar como completada:",o),alert("Error al marcar la inscripci\xF3n como completada. Por favor, intente nuevamente.")}})}cerrarModal(){this.inscripcionSeleccionada=null,document.body.style.overflow="auto"}verPlanDetalle(n){this.router.navigate(["/admin/planes",n,"detail"])}exportarInscripciones(){alert("Funci\xF3n de exportaci\xF3n - Pr\xF3ximamente disponible")}enviarRecordatorio(n){if(!n.usuario?.email){alert("El usuario no tiene email registrado");return}confirm(`\xBFEnviar recordatorio por email a ${n.usuario.name}?`)&&alert("Funci\xF3n de env\xEDo de recordatorio - Pr\xF3ximamente disponible")}ngOnDestroy(){this.filtroTimeout&&clearTimeout(this.filtroTimeout),document.body.style.overflow="auto",window.confirmarConFechas&&delete window.confirmarConFechas}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-planes-inscripciones"]],decls:48,vars:12,consts:[[3,"title","subtitle"],[1,"bg-primary-50","dark:bg-primary-900/20","rounded-lg","p-3","border","border-primary-200","dark:border-primary-700"],[1,"container","mx-auto","px-2","py-6","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"flex","items-center","space-x-2","pb-4"],["routerLink","/admin/planes",1,"inline-flex","items-center","rounded-md","bg-gray-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-0.5","mr-1.5","h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"inline-flex","items-center","rounded-md","bg-primary-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300",3,"routerLink"],[1,"inline-flex","items-center","rounded-md","bg-yellow-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-yellow-700","focus:outline-none","focus:ring-2","focus:ring-yellow-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300"],[1,"grid","grid-cols-2","md:grid-cols-5","gap-4","mb-6"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","p-4","mb-6","transition-colors","duration-300"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-5","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500","text-sm",3,"ngModelChange","change","ngModel"],["value",""],["value","pendiente"],["value","confirmada"],["value","en_progreso"],["value","completada"],["value","cancelada"],["type","date",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500","text-sm",3,"ngModelChange","change","ngModel"],[1,"flex","items-end"],[1,"w-full","inline-flex","justify-center","items-center","rounded-md","bg-gray-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"rounded-lg","bg-white","dark:bg-gray-800","shadow-sm","overflow-hidden","transition-colors","duration-300"],[1,"flex","justify-center","items-center","p-8","dark:text-white","transition-colors","duration-300"],[1,"p-8","text-center"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50","p-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-primary-600","dark:text-primary-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-sm","font-semibold","text-primary-800","dark:text-primary-200"],[1,"text-xs","text-primary-600","dark:text-primary-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"inline-flex","items-center","rounded-md","bg-yellow-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-yellow-700","focus:outline-none","focus:ring-2","focus:ring-yellow-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","p-4","text-center","transition-colors","duration-300"],[1,"text-2xl","font-bold","text-blue-600","dark:text-blue-400"],[1,"text-xs","text-gray-600","dark:text-gray-400"],[1,"text-2xl","font-bold","text-yellow-600","dark:text-yellow-400"],[1,"text-2xl","font-bold","text-green-600","dark:text-green-400"],[1,"text-2xl","font-bold","text-purple-600","dark:text-purple-400"],[1,"text-2xl","font-bold","text-gray-600","dark:text-gray-400"],[3,"value"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","border-r-transparent"],[1,"ml-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400","dark:text-gray-500","transition-colors","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-2","text-sm","font-medium","text-gray-900","dark:text-white","transition-colors","duration-300"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400","transition-colors","duration-300"],[1,"overflow-x-auto"],[1,"w-full","divide-y","divide-gray-200","dark:divide-gray-700","transition-colors","duration-300"],[1,"bg-gray-50","dark:bg-gray-700","transition-colors","duration-300"],["scope","col",1,"p-2","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-300"],["scope","col",1,"hidden","md:table-cell","p-2","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-300"],["scope","col",1,"hidden","sm:table-cell","p-2","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-300"],["scope","col",1,"hidden","lg:table-cell","p-2","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-300"],["scope","col",1,"p-2","text-right","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-300"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700","transition-colors","duration-300"],[1,"hover:bg-gray-50","dark:hover:bg-gray-700","transition-colors","duration-300"],[1,"bg-white","dark:bg-gray-800","p-4","flex","items-center","justify-between","border-t","border-gray-200","dark:border-gray-700","transition-colors","duration-300"],[1,"p-2"],[1,"flex-shrink-0","mr-3"],[1,"h-8","w-8","rounded-full","bg-primary-100","dark:bg-primary-900/40","flex","items-center","justify-center"],[1,"text-primary-800","dark:text-primary-300","font-medium","text-xs"],[1,"min-w-0","flex-1"],[1,"text-sm","font-medium","text-gray-900","dark:text-white","transition-colors","duration-300"],[1,"text-xs","text-gray-500","dark:text-gray-400","transition-colors","duration-300"],[1,"hidden","md:table-cell","p-2"],[1,"hidden","sm:table-cell","p-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-gray-400","mr-1"],[1,"text-sm","text-gray-900","dark:text-white","transition-colors","duration-300"],[1,"hidden","lg:table-cell","p-2"],[1,"text-sm"],[1,"text-gray-500","dark:text-gray-400"],[1,"flex","flex-col","space-y-1"],[1,"inline-flex","items-center","rounded-full","bg-yellow-100","dark:bg-yellow-900","px-2","py-0.5","text-xs","font-medium","text-yellow-800","dark:text-yellow-200","transition-colors","duration-300"],[1,"inline-flex","items-center","rounded-full","bg-green-100","dark:bg-green-900","px-2","py-0.5","text-xs","font-medium","text-green-800","dark:text-green-200","transition-colors","duration-300"],[1,"inline-flex","items-center","rounded-full","bg-red-100","dark:bg-red-900","px-2","py-0.5","text-xs","font-medium","text-red-800","dark:text-red-200","transition-colors","duration-300"],[1,"inline-flex","items-center","rounded-full","bg-blue-100","dark:bg-blue-900","px-2","py-0.5","text-xs","font-medium","text-blue-800","dark:text-blue-200","transition-colors","duration-300"],[1,"inline-flex","items-center","rounded-full","bg-purple-100","dark:bg-purple-900","px-2","py-0.5","text-xs","font-medium","text-purple-800","dark:text-purple-200","transition-colors","duration-300"],[1,"inline-flex","items-center","rounded-full","bg-gray-100","dark:bg-gray-900","px-2","py-0.5","text-xs","font-medium","text-gray-800","dark:text-gray-200","transition-colors","duration-300"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"text-xs",3,"text-red-600","text-yellow-600","text-green-600"],[1,"p-2","text-right"],[1,"flex","items-center","justify-end","space-x-1"],["title","Ver detalle",1,"text-blue-600","hover:text-blue-900","dark:text-blue-400","dark:hover:text-blue-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-blue-50","dark:hover:bg-blue-900/20",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Confirmar inscripci\xF3n",1,"text-green-600","hover:text-green-900","dark:text-green-400","dark:hover:text-green-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-green-50","dark:hover:bg-green-900/20"],["title","Marcar como completada",1,"text-purple-600","hover:text-purple-900","dark:text-purple-400","dark:hover:text-purple-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-purple-50","dark:hover:bg-purple-900/20"],["title","Cancelar inscripci\xF3n",1,"text-red-600","hover:text-red-900","dark:text-red-400","dark:hover:text-red-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-red-50","dark:hover:bg-red-900/20"],[1,"max-w-xs"],[1,"text-sm","text-gray-900","dark:text-white","transition-colors","duration-300","truncate"],[1,"text-xs","text-gray-500","dark:text-gray-400","truncate"],[1,"font-semibold","text-green-600","dark:text-green-400"],[1,"text-xs","text-gray-500","dark:text-gray-400","capitalize"],[1,"text-gray-900","dark:text-white","transition-colors","duration-300"],["fill","currentColor","viewBox","0 0 20 20",1,"h-3","w-3","mr-1"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule","evenodd"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],["fill-rule","evenodd","d","M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-3","w-3","mr-1","animate-spin"],[1,"text-xs"],["title","Confirmar inscripci\xF3n",1,"text-green-600","hover:text-green-900","dark:text-green-400","dark:hover:text-green-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-green-50","dark:hover:bg-green-900/20",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["title","Marcar como completada",1,"text-purple-600","hover:text-purple-900","dark:text-purple-400","dark:hover:text-purple-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-purple-50","dark:hover:bg-purple-900/20",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["title","Cancelar inscripci\xF3n",1,"text-red-600","hover:text-red-900","dark:text-red-400","dark:hover:text-red-300","transition-colors","duration-300","p-1","rounded-md","hover:bg-red-50","dark:hover:bg-red-900/20",3,"click"],[1,"flex","sm:flex-1","sm:flex","sm:items-center","sm:justify-between","flex-col","sm:flex-row"],[1,"text-xs","sm:text-sm","text-gray-700","dark:text-gray-300","transition-colors","duration-300"],[1,"hidden","sm:inline"],[1,"font-medium"],[1,"mt-2","sm:mt-0"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-1.5","rounded-l-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-sm","font-medium","text-gray-500","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-600","transition-colors","duration-300",3,"click","disabled"],[1,"sr-only"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"relative","inline-flex","items-center","px-2","py-1.5","rounded-r-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-sm","font-medium","text-gray-500","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-600","transition-colors","duration-300",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"relative","inline-flex","items-center","px-2.5","py-1.5","border","border-gray-300","dark:border-gray-600","text-sm","font-medium","transition-colors","duration-300",3,"ngClass","disabled"],[1,"relative","inline-flex","items-center","px-2.5","py-1.5","border","border-gray-300","dark:border-gray-600","text-sm","font-medium","transition-colors","duration-300",3,"click","ngClass","disabled"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50","p-4",3,"click"],[1,"relative","top-10","mx-auto","border","w-full","max-w-4xl","shadow-lg","rounded-lg","bg-white","dark:bg-gray-800","transition-colors","duration-300",3,"click"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200","dark:border-gray-700"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","p-2","rounded-md","hover:bg-gray-100","dark:hover:bg-gray-700","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6"],[1,"p-6","max-h-96","overflow-y-auto"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-4"],[1,"text-lg","font-medium","text-gray-900","dark:text-white","border-b","border-gray-200","dark:border-gray-700","pb-2"],[1,"space-y-3"],[1,"text-sm","font-medium","text-gray-500","dark:text-gray-400"],[1,"text-sm","text-gray-900","dark:text-white"],[1,"mt-6","space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"bg-blue-50","dark:bg-blue-900/20","p-4","rounded-lg"],[1,"bg-gray-50","dark:bg-gray-700/50","p-4","rounded-lg"],[1,"flex","justify-between","items-center","p-6","border-t","border-gray-200","dark:border-gray-700"],[1,"flex","space-x-2"],[1,"inline-flex","items-center","px-4","py-2","bg-green-600","text-white","text-sm","font-medium","rounded-md","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-colors","duration-200"],[1,"inline-flex","items-center","px-4","py-2","bg-purple-600","text-white","text-sm","font-medium","rounded-md","hover:bg-purple-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","transition-colors","duration-200"],[1,"inline-flex","items-center","px-4","py-2","bg-red-600","text-white","text-sm","font-medium","rounded-md","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-colors","duration-200"],[1,"px-4","py-2","bg-gray-500","text-white","text-sm","font-medium","rounded-md","hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-colors","duration-200",3,"click"],[1,"text-lg","font-semibold","text-green-600","dark:text-green-400"],[1,"text-sm","text-gray-900","dark:text-white","capitalize"],[1,"text-sm","font-medium","text-blue-800","dark:text-blue-200","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"text-sm","font-medium","text-blue-600","dark:text-blue-400"],[1,"text-sm","text-blue-800","dark:text-blue-200"],[1,"text-sm","font-medium","text-gray-800","dark:text-gray-200","mb-3"],[1,"mb-3"],[1,"text-sm","font-medium","text-gray-600","dark:text-gray-400"],[1,"text-sm","text-gray-900","dark:text-white","mt-1","p-2","bg-white","dark:bg-gray-800","rounded","border"],[1,"inline-flex","items-center","px-4","py-2","bg-green-600","text-white","text-sm","font-medium","rounded-md","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-2"],[1,"inline-flex","items-center","px-4","py-2","bg-purple-600","text-white","text-sm","font-medium","rounded-md","hover:bg-purple-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","transition-colors","duration-200",3,"click"],[1,"inline-flex","items-center","px-4","py-2","bg-red-600","text-white","text-sm","font-medium","rounded-md","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-colors","duration-200",3,"click"]],template:function(e,o){e&1&&(t(0,"app-admin-header",0),g(1,en,10,2,"div",1),i(),t(2,"div",2)(3,"div",3)(4,"a",4),u(),t(5,"svg",5),m(6,"path",6),i(),a(7," Volver a Planes "),i(),g(8,tn,4,3,"a",7)(9,nn,4,0,"button",8),i(),g(10,rn,26,5,"div",9),h(),t(11,"div",10)(12,"div",11)(13,"div")(14,"label",12),a(15,"Estado"),i(),t(16,"select",13),j("ngModelChange",function(c){return L(o.filtros.estado,c)||(o.filtros.estado=c),c}),_("change",function(){return o.onFiltroChange()}),t(17,"option",14),a(18,"Todos los estados"),i(),t(19,"option",15),a(20,"\u{1F4CB} Pendientes"),i(),t(21,"option",16),a(22,"\u2705 Confirmadas"),i(),t(23,"option",17),a(24,"\u{1F504} En Progreso"),i(),t(25,"option",18),a(26,"\u{1F3AF} Completadas"),i(),t(27,"option",19),a(28,"\u274C Canceladas"),i()()(),t(29,"div")(30,"label",12),a(31,"Fecha desde"),i(),t(32,"input",20),j("ngModelChange",function(c){return L(o.filtros.fecha_desde,c)||(o.filtros.fecha_desde=c),c}),_("change",function(){return o.onFiltroChange()}),i()(),t(33,"div")(34,"label",12),a(35,"Fecha hasta"),i(),t(36,"input",20),j("ngModelChange",function(c){return L(o.filtros.fecha_hasta,c)||(o.filtros.fecha_hasta=c),c}),_("change",function(){return o.onFiltroChange()}),i()(),g(37,on,8,1,"div"),t(38,"div",21)(39,"button",22),_("click",function(){return o.limpiarFiltros()}),u(),t(40,"svg",5),m(41,"path",23),i(),a(42," Limpiar "),i()()()(),h(),t(43,"div",24),g(44,ln,4,0,"div",25)(45,cn,8,1,"div",26)(46,Bn,21,2),i()(),g(47,ir,68,29,"div",27)),e&2&&(y("title",o.getPageTitle())("subtitle",o.getPageSubtitle()),l(),p(o.planSeleccionado?1:-1),l(7),p(o.planSeleccionado?8:-1),l(),p(o.filtros.plan_id?9:-1),l(),p(o.estadisticasRapidas?10:-1),l(6),z("ngModel",o.filtros.estado),l(16),z("ngModel",o.filtros.fecha_desde),l(4),z("ngModel",o.filtros.fecha_hasta),l(),p(o.planSeleccionado?-1:37),l(7),p(o.loading?44:!o.pagination||o.pagination.data.length===0?45:46),l(3),p(o.inscripcionSeleccionada?47:-1))},dependencies:[$,X,Q,je,se,O,ve,ne,re,ee,ie,te,ue,W],encapsulation:2})};var Me=(r,n)=>n.id;function nr(r,n){if(r&1&&(t(0,"div",2),m(1,"div",3),t(2,"span",4),a(3),i()()),r&2){let e=s();l(3),f(" ",e.isEditMode?"Cargando plan...":"Preparando formulario..."," ")}}function rr(r,n){r&1&&(t(0,"p",19),a(1,"El nombre del plan es obligatorio"),i())}function ar(r,n){if(r&1&&(t(0,"option",22),a(1),i()),r&2){let e=n.$implicit;y("value",e.id),l(),V("",e.nombre," - ",e.ubicacion,"")}}function or(r,n){r&1&&(t(0,"p",19),a(1,"La descripci\xF3n es obligatoria"),i())}function lr(r,n){r&1&&(t(0,"p",19),a(1,"La duraci\xF3n debe ser entre 1 y 365 d\xEDas"),i())}function dr(r,n){r&1&&(t(0,"p",19),a(1,"La capacidad debe ser entre 1 y 1000 personas"),i())}function sr(r,n){r&1&&(t(0,"p",19),a(1,"Selecciona el nivel de dificultad"),i())}function cr(r,n){r&1&&(t(0,"span",69),a(1," Organizador Principal "),i())}function mr(r,n){if(r&1&&(t(0,"option",22),a(1),i()),r&2){let e=n.$implicit;y("value",e.id),l(),x(e.nombre)}}function pr(r,n){if(r&1){let e=C();t(0,"div",46)(1,"div",67)(2,"h4",68),a(3),g(4,cr,2,0,"span",69),i(),t(5,"button",70),_("click",function(){let d=v(e).$index,c=s(2);return b(c.removeEmprendedor(d))}),u(),t(6,"svg",71),m(7,"path",72),i()()(),h(),t(8,"div",73)(9,"div")(10,"label",16),a(11," Emprendedor "),t(12,"span",17),a(13,"*"),i()(),t(14,"select",74),_("change",function(){let d=v(e).$index,c=s(2);return b(c.onEmprendedorChange(d))}),t(15,"option",21),a(16,"Seleccionar emprendedor..."),i(),F(17,mr,2,2,"option",22,Me),i()(),t(19,"div")(20,"label",16),a(21," Rol "),t(22,"span",17),a(23,"*"),i()(),t(24,"select",75),_("change",function(){let d=v(e).$index,c=s(2);return b(c.onRolChange(d))}),t(25,"option",76),a(26,"\u{1F3AF} Organizador"),i(),t(27,"option",77),a(28,"\u{1F91D} Colaborador"),i()()(),t(29,"div")(30,"label",16),a(31," Porcentaje Ganancia (%) "),i(),m(32,"input",78),t(33,"p",23),a(34),i()()(),t(35,"div",79)(36,"label",16),a(37," Descripci\xF3n de Participaci\xF3n "),i(),m(38,"textarea",80),i(),t(39,"div",81)(40,"input",82),_("change",function(){let d=v(e).$index,c=s(2);return b(c.onOrganizadorPrincipalChange(d))}),i(),t(41,"label",83),a(42," Es el organizador principal del plan "),i()()()}if(r&2){let e,o=n.$implicit,d=n.$index,c=s(2);y("formGroupName",d),l(3),f(" Emprendedor ",d+1," "),l(),p((e=o.get("es_organizador_principal"))!=null&&e.value?4:-1),l(),I("opacity-50",c.getEmprendedoresFormArray().length===1)("cursor-not-allowed",c.getEmprendedoresFormArray().length===1),y("disabled",c.getEmprendedoresFormArray().length===1),l(12),T(c.emprendedoresDisponibles),l(17),f(" Total actual: ",c.getTotalPorcentajes(),"% "),l(6),y("id","organizador_principal_"+d),l(),y("for","organizador_principal_"+d)}}function ur(r,n){if(r&1&&(t(0,"div",51),a(1),i()),r&2){let e=s(2);l(),f(" \u26A0\uFE0F El total de porcentajes (",e.getTotalPorcentajes(),"%) excede el 100% ")}}function gr(r,n){if(r&1){let e=C();t(0,"div",52),u(),t(1,"svg",84),m(2,"path",85),i(),h(),t(3,"h3",86),a(4,"Sin emprendedores"),i(),t(5,"p",87),a(6,"Agrega al menos un emprendedor organizador para crear el plan"),i(),t(7,"div",88)(8,"button",89),_("click",function(){v(e);let d=s(2);return b(d.addEmprendedor())}),u(),t(9,"svg",90),m(10,"path",50),i(),a(11," Agregar Primer Emprendedor "),i()()()}}function _r(r,n){if(r&1&&(t(0,"div",54),m(1,"img",91),i()),r&2){let e=s(2);l(),y("src",e.imagenPrincipalPreview,U)}}function xr(r,n){if(r&1){let e=C();t(0,"div",92),m(1,"img",93),t(2,"button",94),_("click",function(){let d=v(e).$index,c=s(3);return b(c.removeImagenGaleria(d))}),a(3," \xD7 "),i()()}if(r&2){let e=n.$implicit;l(),y("src",e,U)}}function fr(r,n){if(r&1&&(t(0,"div",56),F(1,xr,4,1,"div",92,H),i()),r&2){let e=s(2);l(),T(e.imagenesGaleriaPreviews)}}function vr(r,n){if(r&1&&(t(0,"option",22),a(1),i()),r&2){let e=n.$implicit;y("value",e.id),l(),V("",e.nombre," - ",e.emprendedor==null?null:e.emprendedor.nombre,"")}}function br(r,n){if(r&1){let e=C();t(0,"div",112)(1,"div",108)(2,"span",113),a(3),i(),t(4,"button",114),_("click",function(){let d=v(e).$index,c=s().$index,P=s(3);return b(P.removeServicio(c,d))}),u(),t(5,"svg",115),m(6,"path",72),i()()(),h(),t(7,"div",116)(8,"div")(9,"label",117),a(10," Servicio "),t(11,"span",17),a(12,"*"),i()(),t(13,"select",118)(14,"option",21),a(15,"Seleccionar servicio..."),i(),F(16,vr,2,3,"option",22,Me),i()(),t(18,"div",101)(19,"div")(20,"label",117),a(21," Hora inicio "),i(),m(22,"input",119),i(),t(23,"div")(24,"label",117),a(25," Hora fin "),i(),m(26,"input",120),i()()(),t(27,"div",121)(28,"div")(29,"label",117),a(30," Duraci\xF3n (min) "),i(),m(31,"input",122),i(),t(32,"div")(33,"label",117),a(34," Precio adicional (S/) "),i(),m(35,"input",123),i(),t(36,"div",124)(37,"label",37),m(38,"input",125),t(39,"span",126),a(40,"Es opcional"),i()()()(),t(41,"div",127)(42,"label",117),a(43," Notas del servicio "),i(),m(44,"input",128),i()()}if(r&2){let e=n.$index,o=s(4);y("formGroupName",e),l(3),f("Servicio ",e+1,""),l(13),T(o.serviciosDisponibles)}}function hr(r,n){if(r&1){let e=C();t(0,"div",95)(1,"div",96)(2,"span",97),a(3),i(),t(4,"h4",98),a(5),i()(),t(6,"div",99)(7,"div")(8,"label",16),a(9," T\xEDtulo del d\xEDa "),t(10,"span",17),a(11,"*"),i()(),m(12,"input",100),i(),t(13,"div",101)(14,"div")(15,"label",16),a(16," Hora inicio "),i(),m(17,"input",102),i(),t(18,"div")(19,"label",16),a(20," Hora fin "),i(),m(21,"input",103),i()()(),t(22,"div",104)(23,"label",16),a(24," Descripci\xF3n del d\xEDa "),t(25,"span",17),a(26,"*"),i()(),m(27,"textarea",105),i(),t(28,"div",104)(29,"label",16),a(30," Notas adicionales "),i(),m(31,"textarea",106),i(),t(32,"div",107)(33,"div",108)(34,"h5",68),a(35,"Servicios/Actividades"),i(),t(36,"button",109),_("click",function(){let d=v(e).$index,c=s(3);return b(c.addServicio(d))}),u(),t(37,"svg",110),m(38,"path",50),i(),a(39," Agregar Servicio "),i()(),h(),t(40,"div",111),F(41,br,45,2,"div",112,H),i()()()}if(r&2){let e=n.$index,o=s(3);y("formGroupName",e),l(3),f(" ",e+1," "),l(2),f("D\xEDa ",e+1,""),l(36),T(o.getServiciosFormArray(e).controls)}}function yr(r,n){if(r&1&&(t(0,"div",57),F(1,hr,43,3,"div",95,H),i()),r&2){let e=s(2);l(),T(e.getDiasFormArray().controls)}}function Cr(r,n){r&1&&(t(0,"div",58),u(),t(1,"svg",84),m(2,"path",129),i(),h(),t(3,"h3",86),a(4,"Define la duraci\xF3n del plan"),i(),t(5,"p",87),a(6,"Especifica cu\xE1ntos d\xEDas durar\xE1 el plan para crear el itinerario"),i()())}function kr(r,n){r&1&&(u(),t(0,"svg",64),m(1,"circle",131)(2,"path",132),i())}function Er(r,n){if(r&1){let e=C();t(0,"button",130),_("click",function(){v(e);let d=s(2);return b(d.saveDraft())}),g(1,kr,3,0,":svg:svg",64),a(2," Guardar como Borrador "),i()}if(r&2){let e=s(2);y("disabled",e.saving||!e.hasValidEmprendedores()),l(),p(e.saving?1:-1)}}function Sr(r,n){r&1&&(u(),t(0,"svg",64),m(1,"circle",131)(2,"path",132),i())}function wr(r,n){r&1&&(t(0,"div",65),a(1," \u26A0\uFE0F Debes agregar al menos un emprendedor organizador "),i())}function Pr(r,n){r&1&&(t(0,"div",66),a(1," \u26A0\uFE0F Debe haber exactamente un organizador principal "),i())}function Fr(r,n){r&1&&(t(0,"div",66),a(1," \u26A0\uFE0F El total de porcentajes de ganancia no puede exceder 100% "),i())}function Tr(r,n){if(r&1){let e=C();t(0,"div",5)(1,"a",6),u(),t(2,"svg",7),m(3,"path",8),i(),a(4," Cancelar "),i()(),h(),t(5,"form",9),_("ngSubmit",function(){v(e);let d=s();return b(d.onSubmit())}),t(6,"div",10)(7,"div",11)(8,"h3",12),a(9,"Informaci\xF3n B\xE1sica"),i(),t(10,"p",13),a(11,"Datos principales del plan tur\xEDstico"),i()(),t(12,"div",14)(13,"div",15)(14,"div")(15,"label",16),a(16," Nombre del Plan "),t(17,"span",17),a(18,"*"),i()(),m(19,"input",18),g(20,rr,2,0,"p",19),i(),t(21,"div")(22,"label",16),a(23," Emprendedor Principal (Legacy) "),i(),t(24,"select",20),_("change",function(){v(e);let d=s();return b(d.onEmprendedorLegacyChange())}),t(25,"option",21),a(26,"Seleccionar emprendedor..."),i(),F(27,ar,2,3,"option",22,Me),i(),t(29,"p",23),a(30,' Este campo se mantiene por compatibilidad. Usa la secci\xF3n "Emprendedores Participantes" para gesti\xF3n completa. '),i()()(),t(31,"div")(32,"label",16),a(33," Descripci\xF3n "),t(34,"span",17),a(35,"*"),i()(),m(36,"textarea",24),g(37,or,2,0,"p",19),i(),t(38,"div")(39,"label",16),a(40," Qu\xE9 Incluye "),i(),m(41,"textarea",25),i(),t(42,"div",26)(43,"div")(44,"label",16),a(45," Duraci\xF3n (d\xEDas) "),t(46,"span",17),a(47,"*"),i()(),t(48,"input",27),_("blur",function(){v(e);let d=s();return b(d.updateDiasArray())}),i(),g(49,lr,2,0,"p",19),i(),t(50,"div")(51,"label",16),a(52," Capacidad "),t(53,"span",17),a(54,"*"),i()(),m(55,"input",28),g(56,dr,2,0,"p",19),i(),t(57,"div")(58,"label",16),a(59," Precio Total (S/) "),i(),m(60,"input",29),i(),t(61,"div")(62,"label",16),a(63," Dificultad "),t(64,"span",17),a(65,"*"),i()(),t(66,"select",30)(67,"option",21),a(68,"Seleccionar..."),i(),t(69,"option",31),a(70,"\u{1F7E2} F\xE1cil"),i(),t(71,"option",32),a(72,"\u{1F7E1} Moderado"),i(),t(73,"option",33),a(74,"\u{1F534} Dif\xEDcil"),i()(),g(75,sr,2,0,"p",19),i()(),t(76,"div",15)(77,"div")(78,"label",16),a(79," Requerimientos "),i(),m(80,"textarea",34),i(),t(81,"div")(82,"label",16),a(83," Qu\xE9 Llevar "),i(),m(84,"textarea",35),i()(),t(85,"div",36)(86,"div",37),m(87,"input",38),t(88,"label",39),a(89," Plan p\xFAblico (visible para todos los usuarios) "),i()(),t(90,"div")(91,"label",16),a(92," Estado "),t(93,"span",17),a(94,"*"),i()(),t(95,"select",40)(96,"option",41),a(97,"\u{1F4DD} Borrador"),i(),t(98,"option",42),a(99,"\u2705 Activo"),i(),t(100,"option",43),a(101,"\u274C Inactivo"),i()()()()()(),t(102,"div",10)(103,"div",11)(104,"h3",12),a(105,"Emprendedores Participantes"),i(),t(106,"p",13),a(107," Gestiona los emprendedores que participan en este plan y sus roles "),i()(),t(108,"div",44)(109,"div",45),F(110,pr,43,11,"div",46,H),i(),t(112,"div",47)(113,"button",48),_("click",function(){v(e);let d=s();return b(d.addEmprendedor())}),u(),t(114,"svg",49),m(115,"path",50),i(),a(116," Agregar Emprendedor "),i(),g(117,ur,2,1,"div",51),i(),g(118,gr,12,0,"div",52),i()(),h(),t(119,"div",10)(120,"div",11)(121,"h3",12),a(122,"Im\xE1genes"),i(),t(123,"p",13),a(124,"Sube im\xE1genes atractivas del plan"),i()(),t(125,"div",14)(126,"div")(127,"label",16),a(128," Imagen Principal "),i(),t(129,"input",53),_("change",function(d){v(e);let c=s();return b(c.onImagenPrincipalSelected(d))}),i(),g(130,_r,2,1,"div",54),i(),t(131,"div")(132,"label",16),a(133," Galer\xEDa de Im\xE1genes (m\xE1ximo 10) "),i(),t(134,"input",55),_("change",function(d){v(e);let c=s();return b(c.onImagenesGaleriaSelected(d))}),i(),g(135,fr,3,0,"div",56),i()()(),t(136,"div",10)(137,"div",11)(138,"h3",12),a(139,"Itinerario por D\xEDas"),i(),t(140,"p",13),a(141,"Define las actividades para cada d\xEDa del plan"),i()(),t(142,"div",44),g(143,yr,3,0,"div",57)(144,Cr,7,0,"div",58),i()(),t(145,"div",59)(146,"div",60)(147,"a",61),a(148," Cancelar "),i(),g(149,Er,3,2,"button",62),t(150,"button",63),g(151,Sr,3,0,":svg:svg",64),a(152),i()(),g(153,wr,2,0,"div",65)(154,Pr,2,0,"div",66)(155,Fr,2,0,"div",66),i()()}if(r&2){let e,o,d,c,P,S,A,B,oe,le,Ie,k=s();l(5),y("formGroup",k.planForm),l(14),I("border-red-500",((e=k.planForm.get("nombre"))==null?null:e.invalid)&&((e=k.planForm.get("nombre"))==null?null:e.touched)),l(),p((o=k.planForm.get("nombre"))!=null&&o.invalid&&((o=k.planForm.get("nombre"))!=null&&o.touched)?20:-1),l(7),T(k.emprendedoresDisponibles),l(9),I("border-red-500",((d=k.planForm.get("descripcion"))==null?null:d.invalid)&&((d=k.planForm.get("descripcion"))==null?null:d.touched)),l(),p((c=k.planForm.get("descripcion"))!=null&&c.invalid&&((c=k.planForm.get("descripcion"))!=null&&c.touched)?37:-1),l(11),I("border-red-500",((P=k.planForm.get("duracion_dias"))==null?null:P.invalid)&&((P=k.planForm.get("duracion_dias"))==null?null:P.touched)),l(),p((S=k.planForm.get("duracion_dias"))!=null&&S.invalid&&((S=k.planForm.get("duracion_dias"))!=null&&S.touched)?49:-1),l(6),I("border-red-500",((A=k.planForm.get("capacidad"))==null?null:A.invalid)&&((A=k.planForm.get("capacidad"))==null?null:A.touched)),l(),p((B=k.planForm.get("capacidad"))!=null&&B.invalid&&((B=k.planForm.get("capacidad"))!=null&&B.touched)?56:-1),l(10),I("border-red-500",((oe=k.planForm.get("dificultad"))==null?null:oe.invalid)&&((oe=k.planForm.get("dificultad"))==null?null:oe.touched)),l(9),p((le=k.planForm.get("dificultad"))!=null&&le.invalid&&((le=k.planForm.get("dificultad"))!=null&&le.touched)?75:-1),l(35),T(k.getEmprendedoresFormArray().controls),l(3),y("disabled",k.getEmprendedoresFormArray().length>=10),l(4),p(k.getTotalPorcentajes()>100?117:-1),l(),p(k.getEmprendedoresFormArray().length===0?118:-1),l(12),p(k.imagenPrincipalPreview?130:-1),l(5),p(k.imagenesGaleriaPreviews.length>0?135:-1),l(8),p(((Ie=k.planForm.get("duracion_dias"))==null?null:Ie.value)>0?143:144),l(6),p(k.isEditMode?149:-1),l(),y("disabled",k.planForm.invalid||k.saving||!k.hasValidEmprendedores()||k.getTotalPorcentajes()>100),l(),p(k.saving?151:-1),l(),f(" ",k.isEditMode?"Actualizar Plan":"Crear Plan"," "),l(),p(k.hasValidEmprendedores()?-1:153),l(),p(k.hasOrganizadorPrincipal()?-1:154),l(),p(k.getTotalPorcentajes()>100?155:-1)}}var ae=class r{planesService=w(R);turismoService=w(be);themeService=w(q);fb=w(qe);router=w(Z);route=w(Y);planForm;loading=!0;saving=!1;isEditMode=!1;planId=null;emprendedoresDisponibles=[];serviciosDisponibles=[];imagenPrincipalFile=null;imagenPrincipalPreview=null;imagenesGaleriaFiles=[];imagenesGaleriaPreviews=[];ngOnInit(){this.initForm(),this.loadData(),this.route.params.subscribe(n=>{n.id?(this.isEditMode=!0,this.planId=+n.id,this.loadPlan(this.planId)):(this.addEmprendedor(),this.loading=!1)})}initForm(){this.planForm=this.fb.group({nombre:["",[M.required,M.maxLength(255)]],descripcion:["",[M.required]],que_incluye:[""],capacidad:[1,[M.required,M.min(1),M.max(1e3)]],duracion_dias:[1,[M.required,M.min(1),M.max(365)]],es_publico:[!0],estado:["borrador",[M.required]],emprendedor_id:[""],precio_total:[""],dificultad:["",[M.required]],requerimientos:[""],que_llevar:[""],emprendedores:this.fb.array([]),dias:this.fb.array([])})}loadData(){this.turismoService.getEmprendedores(1,100).subscribe({next:n=>{this.emprendedoresDisponibles=n.data,this.loadAllServicios()},error:n=>{console.error("Error al cargar emprendedores:",n),alert("Error al cargar los emprendedores disponibles")}})}loadAllServicios(){this.turismoService.getServicios(1,500).subscribe({next:n=>{this.serviciosDisponibles=n.data},error:n=>{console.error("Error al cargar servicios:",n)}})}loadPlan(n){this.planesService.getPlan(n).subscribe({next:e=>{this.fillForm(e),this.loading=!1},error:e=>{console.error("Error al cargar plan:",e),this.loading=!1,alert("Error al cargar el plan"),this.router.navigate(["/admin/planes"])}})}fillForm(n){if(this.planForm.patchValue({nombre:n.nombre,descripcion:n.descripcion,que_incluye:n.que_incluye,capacidad:n.capacidad,duracion_dias:n.duracion_dias,es_publico:n.es_publico,estado:n.estado,emprendedor_id:n.emprendedor_id,precio_total:n.precio_total,dificultad:n.dificultad,requerimientos:n.requerimientos,que_llevar:n.que_llevar}),n.imagen_principal_url&&(this.imagenPrincipalPreview=n.imagen_principal_url),n.imagenes_galeria_urls&&(this.imagenesGaleriaPreviews=[...n.imagenes_galeria_urls]),n.emprendedores&&n.emprendedores.length>0){let e=this.getEmprendedoresFormArray();for(;e.length!==0;)e.removeAt(0);n.emprendedores.forEach(o=>{e.push(this.createEmprendedorFormGroup({emprendedor_id:o.id,rol:o.rol,es_organizador_principal:o.es_organizador_principal,descripcion_participacion:o.descripcion_participacion,porcentaje_ganancia:o.porcentaje_ganancia}))})}else n.emprendedor_id&&(this.addEmprendedor(),this.getEmprendedoresFormArray().at(0).patchValue({emprendedor_id:n.emprendedor_id,rol:"organizador",es_organizador_principal:!0}));this.updateDiasArray(),n.dias&&n.dias.length>0&&n.dias.forEach((e,o)=>{let d=this.getDiasFormArray().at(o);if(d&&(d.patchValue({titulo:e.titulo,descripcion:e.descripcion,hora_inicio:e.hora_inicio,hora_fin:e.hora_fin,notas_adicionales:e.notas_adicionales}),e.servicios&&e.servicios.length>0)){let c=d.get("servicios");e.servicios.forEach(P=>{c.push(this.createServicioFormGroup(P))})}})}getEmprendedoresFormArray(){return this.planForm.get("emprendedores")}createEmprendedorFormGroup(n){return this.fb.group({emprendedor_id:[n?.emprendedor_id||"",[M.required]],rol:[n?.rol||"organizador",[M.required]],es_organizador_principal:[n?.es_organizador_principal||!1],descripcion_participacion:[n?.descripcion_participacion||""],porcentaje_ganancia:[n?.porcentaje_ganancia||0,[M.min(0),M.max(100)]]})}addEmprendedor(){let n=this.getEmprendedoresFormArray();if(n.length>=10){alert("No puedes agregar m\xE1s de 10 emprendedores por plan");return}let e=n.length===0;n.push(this.createEmprendedorFormGroup({rol:"organizador",es_organizador_principal:e}))}removeEmprendedor(n){let e=this.getEmprendedoresFormArray();if(e.length<=1){alert("Debe haber al menos un emprendedor en el plan");return}let d=e.at(n).get("es_organizador_principal")?.value;e.removeAt(n),d&&this.assignNewOrganizadorPrincipal()}onEmprendedorChange(n){this.getEmprendedoresFormArray().at(n).get("emprendedor_id")?.value&&this.checkDuplicateEmprendedores(n)}onRolChange(n){let e=this.getEmprendedoresFormArray().at(n);e.get("rol")?.value==="colaborador"&&(e.get("es_organizador_principal")?.setValue(!1),this.assignNewOrganizadorPrincipal())}onOrganizadorPrincipalChange(n){let e=this.getEmprendedoresFormArray().at(n);e.get("es_organizador_principal")?.value&&(this.getEmprendedoresFormArray().controls.forEach((d,c)=>{c!==n&&d.get("es_organizador_principal")?.setValue(!1)}),e.get("rol")?.setValue("organizador"))}onEmprendedorLegacyChange(){let n=this.planForm.get("emprendedor_id")?.value,e=this.getEmprendedoresFormArray();n&&e.length>0&&e.at(0).get("emprendedor_id")?.setValue(n)}checkDuplicateEmprendedores(n){let e=this.getEmprendedoresFormArray(),o=e.at(n).get("emprendedor_id")?.value;e.controls.filter((c,P)=>P!==n&&c.get("emprendedor_id")?.value===o).length>0&&(alert("Este emprendedor ya est\xE1 agregado al plan"),e.at(n).get("emprendedor_id")?.setValue(""))}assignNewOrganizadorPrincipal(){let n=this.getEmprendedoresFormArray();if(!n.controls.some(o=>o.get("es_organizador_principal")?.value)){let o=n.controls.find(d=>d.get("rol")?.value==="organizador");o&&o.get("es_organizador_principal")?.setValue(!0)}}getTotalPorcentajes(){let n=this.getEmprendedoresFormArray(),e=0;return n.controls.forEach(o=>{let d=o.get("porcentaje_ganancia")?.value||0;e+=parseFloat(d)}),Math.round(e*100)/100}hasValidEmprendedores(){let n=this.getEmprendedoresFormArray();return n.length===0?!1:n.controls.every(e=>{let o=e.get("emprendedor_id")?.value,d=e.get("rol")?.value;return o&&d})}hasOrganizadorPrincipal(){return this.getEmprendedoresFormArray().controls.filter(o=>o.get("es_organizador_principal")?.value).length===1}getDiasFormArray(){return this.planForm.get("dias")}createDiaFormGroup(n){return this.fb.group({numero_dia:[n?.numero_dia||1],titulo:[n?.titulo||"",[M.required]],descripcion:[n?.descripcion||"",[M.required]],hora_inicio:[n?.hora_inicio||""],hora_fin:[n?.hora_fin||""],duracion_estimada_minutos:[n?.duracion_estimada_minutos||""],notas_adicionales:[n?.notas_adicionales||""],orden:[n?.orden||1],servicios:this.fb.array([])})}updateDiasArray(){let n=this.planForm.get("duracion_dias")?.value||0,e=this.getDiasFormArray();for(;e.length!==0;)e.removeAt(0);for(let o=1;o<=n;o++)e.push(this.createDiaFormGroup({numero_dia:o,orden:o}))}getServiciosFormArray(n){return this.getDiasFormArray().at(n).get("servicios")}createServicioFormGroup(n){return this.fb.group({servicio_id:[n?.servicio_id||"",[M.required]],hora_inicio:[n?.hora_inicio||""],hora_fin:[n?.hora_fin||""],duracion_minutos:[n?.duracion_minutos||""],notas:[n?.notas||""],orden:[n?.orden||1],es_opcional:[n?.es_opcional||!1],precio_adicional:[n?.precio_adicional||""]})}addServicio(n){let e=this.getServiciosFormArray(n);e.push(this.createServicioFormGroup({orden:e.length+1}))}removeServicio(n,e){let o=this.getServiciosFormArray(n);o.removeAt(e),o.controls.forEach((d,c)=>{d.get("orden")?.setValue(c+1)})}onImagenPrincipalSelected(n){let e=n.target.files[0];if(e){if(!e.type.startsWith("image/")){alert("Por favor selecciona un archivo de imagen v\xE1lido");return}if(e.size>5*1024*1024){alert("El archivo es demasiado grande. M\xE1ximo 5MB permitido");return}this.imagenPrincipalFile=e;let o=new FileReader;o.onload=d=>{this.imagenPrincipalPreview=d.target.result},o.readAsDataURL(e)}}onImagenesGaleriaSelected(n){let e=Array.from(n.target.files);if(e.length!==0){if(this.imagenesGaleriaFiles.length+e.length>10){alert("M\xE1ximo 10 im\xE1genes permitidas en la galer\xEDa");return}e.forEach(o=>{if(!o.type.startsWith("image/")){alert(`${o.name} no es un archivo de imagen v\xE1lido`);return}if(o.size>5*1024*1024){alert(`${o.name} es demasiado grande. M\xE1ximo 5MB permitido`);return}this.imagenesGaleriaFiles.push(o);let d=new FileReader;d.onload=c=>{this.imagenesGaleriaPreviews.push(c.target.result)},d.readAsDataURL(o)}),n.target.value=""}}removeImagenGaleria(n){this.imagenesGaleriaFiles.splice(n,1),this.imagenesGaleriaPreviews.splice(n,1)}canSubmitForm(){return this.planForm.valid&&this.hasValidEmprendedores()&&this.hasOrganizadorPrincipal()&&this.getTotalPorcentajes()<=100}showValidationDetails(){return!this.canSubmitForm()&&this.hasUserInteracted()}hasUserInteracted(){return this.planForm.touched||this.getEmprendedoresFormArray().length>0}isFormSectionValid(n){switch(n){case"basic":return["nombre","descripcion","capacidad","duracion_dias","dificultad","estado"].every(o=>this.planForm.get(o)?.valid||!1);default:return!1}}getValidationErrors(){let n=[];if(this.planForm.get("nombre")?.invalid&&this.planForm.get("nombre")?.touched&&n.push("El nombre del plan es obligatorio"),this.planForm.get("descripcion")?.invalid&&this.planForm.get("descripcion")?.touched&&n.push("La descripci\xF3n del plan es obligatoria"),this.planForm.get("capacidad")?.invalid&&this.planForm.get("capacidad")?.touched&&n.push("La capacidad debe ser entre 1 y 1000 personas"),this.planForm.get("duracion_dias")?.invalid&&this.planForm.get("duracion_dias")?.touched&&n.push("La duraci\xF3n debe ser entre 1 y 365 d\xEDas"),this.planForm.get("dificultad")?.invalid&&this.planForm.get("dificultad")?.touched&&n.push("Debes seleccionar el nivel de dificultad"),!this.hasValidEmprendedores())if(this.getEmprendedoresFormArray().length===0)n.push("Debes agregar al menos un emprendedor al plan");else{let o=this.getEmprendedoresFormArray().controls.filter(d=>{let c=d.get("emprendedor_id")?.value,P=d.get("rol")?.value;return!c||!P});o.length>0&&n.push(`Hay ${o.length} emprendedor(es) con datos incompletos`)}if(!this.hasOrganizadorPrincipal()){let o=this.getEmprendedoresFormArray().controls.filter(d=>d.get("es_organizador_principal")?.value).length;o===0?n.push("Debe haber al menos un organizador principal"):o>1&&n.push("Solo puede haber un organizador principal")}return this.getTotalPorcentajes()>100&&n.push(`El total de porcentajes (${this.getTotalPorcentajes()}%) excede el 100% permitido`),this.getDiasFormArray().controls.forEach((o,d)=>{let c=o;c.get("titulo")?.invalid&&c.get("titulo")?.touched&&n.push(`El t\xEDtulo del d\xEDa ${d+1} es obligatorio`),c.get("descripcion")?.invalid&&c.get("descripcion")?.touched&&n.push(`La descripci\xF3n del d\xEDa ${d+1} es obligatoria`),c.get("servicios").controls.forEach((S,A)=>{let B=S;B.get("servicio_id")?.invalid&&B.get("servicio_id")?.touched&&n.push(`El servicio ${A+1} del d\xEDa ${d+1} debe tener un servicio seleccionado`)})}),n}getSubmitButtonTitle(){if(this.saving)return"Guardando...";if(!this.canSubmitForm()){let n=this.getValidationErrors();return n.length>0?`No se puede enviar: ${n[0]}`:"Completa todos los campos obligatorios"}return this.isEditMode?"Actualizar el plan":"Crear el plan"}validateForm(){if(this.planForm.invalid)return this.markFormGroupTouched(this.planForm),!1;if(!this.hasValidEmprendedores())return alert("Debes agregar al menos un emprendedor v\xE1lido"),!1;if(!this.hasOrganizadorPrincipal())return alert("Debe haber exactamente un organizador principal"),!1;if(this.getTotalPorcentajes()>100)return alert("El total de porcentajes de ganancia no puede exceder 100%"),!1;let n=this.getDiasFormArray();for(let e=0;e<n.length;e++){let o=n.at(e);if(o.invalid)return this.markFormGroupTouched(o),alert(`Hay errores en el d\xEDa ${e+1}. Por favor revisa los campos obligatorios.`),!1}return!0}markFormGroupTouched(n){Object.keys(n.controls).forEach(e=>{let o=n.get(e);o?.markAsTouched(),o instanceof Fe?this.markFormGroupTouched(o):o instanceof Oe&&o.controls.forEach(d=>{d instanceof Fe&&this.markFormGroupTouched(d)})})}preparePlanFormData(){let n=this.planForm.value,e=n.emprendedores.filter(c=>c.emprendedor_id&&c.rol).map(c=>({emprendedor_id:parseInt(c.emprendedor_id),rol:c.rol,es_organizador_principal:c.es_organizador_principal||!1,descripcion_participacion:c.descripcion_participacion||void 0,porcentaje_ganancia:c.porcentaje_ganancia?parseFloat(c.porcentaje_ganancia):void 0})),o=n.dias.map((c,P)=>({numero_dia:P+1,titulo:c.titulo,descripcion:c.descripcion,hora_inicio:c.hora_inicio||void 0,hora_fin:c.hora_fin||void 0,duracion_estimada_minutos:c.duracion_estimada_minutos?parseInt(c.duracion_estimada_minutos):void 0,notas_adicionales:c.notas_adicionales||void 0,orden:P+1,servicios:c.servicios.filter(S=>S.servicio_id).map((S,A)=>({servicio_id:parseInt(S.servicio_id),hora_inicio:S.hora_inicio||void 0,hora_fin:S.hora_fin||void 0,duracion_minutos:S.duracion_minutos?parseInt(S.duracion_minutos):void 0,notas:S.notas||void 0,orden:A+1,es_opcional:S.es_opcional||!1,precio_adicional:S.precio_adicional?parseFloat(S.precio_adicional):void 0}))}));return{nombre:n.nombre,descripcion:n.descripcion,que_incluye:n.que_incluye||void 0,capacidad:parseInt(n.capacidad),duracion_dias:parseInt(n.duracion_dias),es_publico:n.es_publico||!1,estado:n.estado,emprendedor_id:n.emprendedor_id?parseInt(n.emprendedor_id):void 0,precio_total:n.precio_total?parseFloat(n.precio_total):void 0,dificultad:n.dificultad,requerimientos:n.requerimientos||void 0,que_llevar:n.que_llevar||void 0,imagen_principal:this.imagenPrincipalFile||void 0,imagenes_galeria:this.imagenesGaleriaFiles.length>0?this.imagenesGaleriaFiles:void 0,emprendedores:e,dias:o}}onSubmit(){if(!this.validateForm())return;this.saving=!0;let n=this.preparePlanFormData();(this.isEditMode?this.planesService.updatePlan(this.planId,n):this.planesService.createPlan(n)).subscribe({next:o=>{this.saving=!1;let d=this.isEditMode?"Plan actualizado exitosamente":"Plan creado exitosamente";alert(d),this.router.navigate(["/admin/planes",o.id,"detail"])},error:o=>{this.saving=!1,console.error("Error al guardar plan:",o);let d="Error al guardar el plan";if(o.error?.message)d=o.error.message;else if(o.error?.errors){let c=Object.values(o.error.errors)[0];Array.isArray(c)&&(d=c[0])}alert(d)}})}saveDraft(){if(!this.hasValidEmprendedores()){alert("Debes agregar al menos un emprendedor v\xE1lido para guardar como borrador");return}let n=this.planForm.get("estado")?.value;this.planForm.get("estado")?.setValue("borrador"),this.saving=!0;let e=this.preparePlanFormData();this.isEditMode&&this.planId&&this.planesService.updatePlan(this.planId,e).subscribe({next:o=>{this.saving=!1,alert("Borrador guardado exitosamente"),n!=="borrador"&&this.planForm.get("estado")?.setValue(n)},error:o=>{this.saving=!1,console.error("Error al guardar borrador:",o),alert("Error al guardar el borrador"),this.planForm.get("estado")?.setValue(n)}})}getEmprendedorNombre(n){let e=this.emprendedoresDisponibles.find(o=>o.id===n);return e?e.nombre:""}getServicioNombre(n){let e=this.serviciosDisponibles.find(o=>o.id===n);return e?`${e.nombre} - ${e.emprendedor?.nombre}`:""}isDarkMode(){return this.themeService.isDarkMode()}ngOnDestroy(){this.imagenPrincipalPreview&&this.imagenPrincipalPreview.startsWith("blob:")&&URL.revokeObjectURL(this.imagenPrincipalPreview),this.imagenesGaleriaPreviews.forEach(n=>{n.startsWith("blob:")&&URL.revokeObjectURL(n)})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-planes-form"]],decls:4,vars:3,consts:[[3,"title","subtitle"],[1,"container","mx-auto","px-2","py-6","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"flex","justify-center","items-center","p-8"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","border-r-transparent"],[1,"ml-4","text-gray-600","dark:text-gray-300"],[1,"flex","items-center","space-x-2","pb-5"],["routerLink","/admin/planes",1,"inline-flex","items-center","rounded-md","bg-gray-600","px-3","py-2","text-sm","font-medium","text-white","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-0.5","mr-1.5","h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","transition-colors","duration-300"],[1,"px-6","py-4","border-b","border-gray-200","dark:border-gray-700"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400","mt-1"],[1,"p-6","space-y-4"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"text-red-500"],["type","text","formControlName","nombre","placeholder","Ej: Tour M\xE1gico por el Lago Titicaca",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],[1,"text-red-500","text-xs","mt-1"],["formControlName","emprendedor_id",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500",3,"change"],["value",""],[3,"value"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],["formControlName","descripcion","rows","3","placeholder","Describe la experiencia que ofrece este plan...",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["formControlName","que_incluye","rows","3","placeholder","Alojamiento, alimentaci\xF3n, transporte, gu\xEDa, etc...",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],["type","number","formControlName","duracion_dias","min","1","max","365","placeholder","3",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500",3,"blur"],["type","number","formControlName","capacidad","min","1","max","1000","placeholder","20",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["type","number","formControlName","precio_total","min","0","step","0.01","placeholder","450.00",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["formControlName","dificultad",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["value","facil"],["value","moderado"],["value","dificil"],["formControlName","requerimientos","rows","2","placeholder","Documento de identidad, edad m\xEDnima, etc...",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["formControlName","que_llevar","rows","2","placeholder","Mochila, ropa abrigada, protector solar, etc...",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex","items-center"],["type","checkbox","formControlName","es_publico","id","es_publico",1,"h-4","w-4","text-primary-600","focus:ring-primary-500","border-gray-300","dark:border-gray-600","dark:bg-gray-700","rounded"],["for","es_publico",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300"],["formControlName","estado",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["value","borrador"],["value","activo"],["value","inactivo"],[1,"p-6"],["formArrayName","emprendedores",1,"space-y-4"],[1,"border","border-gray-200","dark:border-gray-600","rounded-lg","p-4","bg-gray-50","dark:bg-gray-700",3,"formGroupName"],[1,"mt-4","flex","justify-between","items-center"],["type","button",1,"inline-flex","items-center","px-4","py-2","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-primary-600","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"text-red-600","text-sm"],[1,"text-center","py-8","border-2","border-dashed","border-gray-300","dark:border-gray-600","rounded-lg"],["type","file","accept","image/*",1,"w-full","text-sm","text-gray-500","dark:text-gray-400","file:mr-4","file:py-2","file:px-4","file:rounded-md","file:border-0","file:text-sm","file:font-medium","file:bg-primary-50","dark:file:bg-primary-900","file:text-primary-700","dark:file:text-primary-300","hover:file:bg-primary-100","dark:hover:file:bg-primary-800",3,"change"],[1,"mt-2"],["type","file","accept","image/*","multiple","",1,"w-full","text-sm","text-gray-500","dark:text-gray-400","file:mr-4","file:py-2","file:px-4","file:rounded-md","file:border-0","file:text-sm","file:font-medium","file:bg-primary-50","dark:file:bg-primary-900","file:text-primary-700","dark:file:text-primary-300","hover:file:bg-primary-100","dark:hover:file:bg-primary-800",3,"change"],[1,"mt-2","grid","grid-cols-2","md:grid-cols-4","lg:grid-cols-6","gap-2"],["formArrayName","dias",1,"space-y-6"],[1,"text-center","py-8"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","p-6","transition-colors","duration-300"],[1,"flex","flex-col","sm:flex-row","justify-end","space-y-2","sm:space-y-0","sm:space-x-3"],["routerLink","/admin/planes",1,"w-full","sm:w-auto","inline-flex","justify-center","items-center","px-4","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","bg-white","dark:bg-gray-700","text-sm","font-medium","text-gray-700","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500"],["type","button",1,"w-full","sm:w-auto","inline-flex","justify-center","items-center","px-4","py-2","border","border-yellow-300","dark:border-yellow-600","rounded-md","shadow-sm","bg-yellow-50","dark:bg-yellow-900/20","text-sm","font-medium","text-yellow-700","dark:text-yellow-400","hover:bg-yellow-100","dark:hover:bg-yellow-900/40","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-yellow-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["type","submit",1,"w-full","sm:w-auto","inline-flex","justify-center","items-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","bg-primary-600","text-sm","font-medium","text-white","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4"],[1,"mt-3","text-red-600","text-sm"],[1,"mt-1","text-red-600","text-sm"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-md","font-medium","text-gray-900","dark:text-white"],[1,"ml-2","inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-primary-100","dark:bg-primary-900","text-primary-800","dark:text-primary-200"],["type","button","title","Eliminar emprendedor",1,"text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["formControlName","emprendedor_id",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-600","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500",3,"change"],["formControlName","rol",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-600","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500",3,"change"],["value","organizador"],["value","colaborador"],["type","number","formControlName","porcentaje_ganancia","min","0","max","100","step","0.01","placeholder","0.00",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-600","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],[1,"mt-4"],["formControlName","descripcion_participacion","rows","2","placeholder","Describe el rol espec\xEDfico de este emprendedor en el plan...",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-600","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],[1,"mt-4","flex","items-center"],["type","checkbox","formControlName","es_organizador_principal",1,"h-4","w-4","text-primary-600","focus:ring-primary-500","border-gray-300","dark:border-gray-600","dark:bg-gray-600","rounded",3,"change","id"],[1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300",3,"for"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400","dark:text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-2","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400"],[1,"mt-6"],["type","button",1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-primary-600","hover:bg-primary-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],["alt","Vista previa",1,"h-32","w-48","object-cover","rounded-md","border","border-gray-200","dark:border-gray-600",3,"src"],[1,"relative"],["alt","Vista previa",1,"h-20","w-20","object-cover","rounded-md","border","border-gray-200","dark:border-gray-600",3,"src"],["type","button",1,"absolute","-top-1","-right-1","bg-red-500","text-white","rounded-full","w-5","h-5","flex","items-center","justify-center","text-xs","hover:bg-red-600",3,"click"],[1,"border","border-gray-200","dark:border-gray-600","rounded-lg","p-4",3,"formGroupName"],[1,"flex","items-center","mb-4"],[1,"inline-flex","items-center","justify-center","w-8","h-8","bg-primary-100","dark:bg-primary-900","text-primary-800","dark:text-primary-200","rounded-full","text-sm","font-medium","mr-3"],[1,"text-lg","font-medium","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4","mb-4"],["type","text","formControlName","titulo","placeholder","Ej: Bienvenida y exploraci\xF3n inicial",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],[1,"grid","grid-cols-2","gap-2"],["type","time","formControlName","hora_inicio",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["type","time","formControlName","hora_fin",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],[1,"mb-4"],["formControlName","descripcion","rows","2","placeholder","Describe las actividades y experiencias de este d\xEDa...",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["formControlName","notas_adicionales","rows","1","placeholder","Informaci\xF3n extra, recomendaciones especiales...",1,"w-full","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],[1,"border-t","border-gray-200","dark:border-gray-600","pt-4"],[1,"flex","items-center","justify-between","mb-3"],["type","button",1,"inline-flex","items-center","px-3","py-1","bg-primary-600","text-white","text-sm","rounded-md","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["formArrayName","servicios",1,"space-y-3"],[1,"bg-gray-50","dark:bg-gray-700","rounded-md","p-3",3,"formGroupName"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","button",1,"text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400","mb-1"],["formControlName","servicio_id",1,"w-full","text-sm","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-600","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["type","time","formControlName","hora_inicio",1,"w-full","text-sm","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-600","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["type","time","formControlName","hora_fin",1,"w-full","text-sm","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-600","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-3","mt-3"],["type","number","formControlName","duracion_minutos","min","0","placeholder","60",1,"w-full","text-sm","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-600","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["type","number","formControlName","precio_adicional","min","0","step","0.01","placeholder","0.00",1,"w-full","text-sm","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-600","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],[1,"flex","items-center","justify-center"],["type","checkbox","formControlName","es_opcional",1,"h-4","w-4","text-primary-600","focus:ring-primary-500","border-gray-300","dark:border-gray-600","dark:bg-gray-600","rounded"],[1,"ml-2","text-xs","text-gray-700","dark:text-gray-300"],[1,"mt-3"],["type","text","formControlName","notas","placeholder","Notas espec\xEDficas para este servicio...",1,"w-full","text-sm","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-600","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["type","button",1,"w-full","sm:w-auto","inline-flex","justify-center","items-center","px-4","py-2","border","border-yellow-300","dark:border-yellow-600","rounded-md","shadow-sm","bg-yellow-50","dark:bg-yellow-900/20","text-sm","font-medium","text-yellow-700","dark:text-yellow-400","hover:bg-yellow-100","dark:hover:bg-yellow-900/40","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-yellow-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,o){e&1&&(m(0,"app-admin-header",0),t(1,"div",1),g(2,nr,4,1,"div",2)(3,Tr,156,29),i()),e&2&&(y("title",o.isEditMode?"Editar Plan":"Crear Nuevo Plan")("subtitle",o.isEditMode?"Modifica la informaci\xF3n del plan tur\xEDstico":"Crea un nuevo plan tur\xEDstico paso a paso"),l(2),p(o.loading?2:3))},dependencies:[$,O,Re,ge,ne,re,ee,_e,me,ie,te,pe,fe,xe,Ge,Ne,Be,He,W],encapsulation:2})};var za=[{path:"",component:he,title:"Gesti\xF3n de Planes"},{path:"create",component:ae,title:"Crear Plan"},{path:"edit/:id",component:ae,title:"Editar Plan"},{path:":id/detail",component:ke,title:"Detalle del Plan"},{path:"estadisticas",component:Se,title:"Estad\xEDsticas de Planes"},{path:"inscripciones",component:we,title:"Gesti\xF3n de Inscripciones"}];export{za as PLANES_ROUTES};
