import{a as L}from"./chunk-XKQSEP7P.js";import{a as F}from"./chunk-JPXMOWFC.js";import{a as M}from"./chunk-UD255BT3.js";import{b as A,c as H,d as R,e as U,i as B,l as O,o as P,x as q,z as $}from"./chunk-DV54EIF6.js";import{d as N,f as z,g as E}from"./chunk-ZI6AQ4XN.js";import{Ga as C,Gb as a,Hb as x,Hc as w,Ib as G,La as s,Qb as v,Va as k,_ as m,_a as c,fb as g,ga as y,ha as b,ia as d,ja as f,jb as u,mb as I,nb as D,ob as t,pb as i,qb as n,tb as _,ub as S,uc as j,vb as l}from"./chunk-T2OCC6GX.js";import"./chunk-4CLCTAJ7.js";var W=r=>["/admin/categorias/edit",r],X=(r,o)=>o.id;function Y(r,o){r&1&&(t(0,"div",9),n(1,"div",12),t(2,"span",13),a(3,"Cargando categor\xEDas..."),i()())}function Z(r,o){r&1&&(t(0,"div",10),d(),t(1,"svg",14),n(2,"path",15),i(),f(),t(3,"h3",16),a(4,"No se encontraron categor\xEDas"),i(),t(5,"p",17),a(6,"Comienza creando una nueva categor\xEDa."),i(),t(7,"div",18)(8,"a",5),d(),t(9,"svg",6),n(10,"path",7),i(),a(11," Nueva Categor\xEDa "),i()()())}function ee(r,o){if(r&1&&(t(0,"div",29)(1,"div",38),n(2,"img",39),i()()),r&2){let e=l().$implicit;s(2),g("src",e.icono_url,C)}}function te(r,o){r&1&&(t(0,"span",30),a(1,"Sin icono"),i())}function re(r,o){if(r&1){let e=_();t(0,"tr",24)(1,"td",25)(2,"div",26),a(3),i()(),t(4,"td",27)(5,"div",28),a(6),i()(),t(7,"td",25),c(8,ee,3,1,"div",29)(9,te,2,0,"span",30),i(),t(10,"td",31)(11,"div",32)(12,"a",33),d(),t(13,"svg",34),n(14,"path",35),i()(),f(),t(15,"button",36),S("click",function(){let V=y(e).$implicit,J=l(2);return b(J.deleteCategoria(V))}),d(),t(16,"svg",34),n(17,"path",37),i()()()()()}if(r&2){let e=o.$implicit;s(3),x(e.nombre),s(3),x(e.descripcion||"Sin descripci\xF3n"),s(2),u(e.icono_url?8:9),s(4),g("routerLink",v(4,W,e.id))}}function ie(r,o){if(r&1&&(t(0,"div",11)(1,"table",19)(2,"thead",20)(3,"tr")(4,"th",21),a(5,"Nombre"),i(),t(6,"th",21),a(7,"Descripci\xF3n"),i(),t(8,"th",21),a(9,"Icono"),i(),t(10,"th",22),a(11,"Acciones"),i()()(),t(12,"tbody",23),I(13,re,18,6,"tr",24,X),i()()()),r&2){let e=l();s(13),D(e.categorias)}}var T=class r{turismoService=m(M);themeService=m(F);categorias=[];loading=!0;ngOnInit(){this.loadCategorias()}isDarkMode(){return this.themeService.isDarkMode()}loadCategorias(){this.loading=!0,this.turismoService.getCategorias().subscribe({next:o=>{this.categorias=o,this.loading=!1},error:o=>{console.error("Error al cargar categor\xEDas:",o),this.loading=!1}})}deleteCategoria(o){o.id&&confirm(`\xBFEst\xE1 seguro de eliminar la categor\xEDa "${o.nombre}"? Esta acci\xF3n no se puede deshacer.`)&&this.turismoService.deleteCategoria(o.id).subscribe({next:()=>{this.categorias=this.categorias.filter(e=>e.id!==o.id),alert("Categor\xEDa eliminada correctamente")},error:e=>{console.error("Error al eliminar categor\xEDa:",e),alert("Error al eliminar la categor\xEDa. Por favor, intente nuevamente.")}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=k({type:r,selectors:[["app-categoria-list"]],decls:14,vars:1,consts:[["title","Gesti\xF3n de Categorias","subtitle","Administra y gestiona las categorias que dividiran los servicios de tu organizaci\xF3n"],[1,"container","mx-auto","px-2","sm:px-4","py-6","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","transition-colors","duration-200"],[1,"mt-4","sm:mt-0"],["routerLink","/admin/categorias/create",1,"inline-flex","items-center","rounded-md","bg-primary-600","dark:bg-primary-700","px-4","py-2","text-sm","font-medium","text-white","hover:bg-primary-700","dark:hover:bg-primary-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"rounded-lg","bg-white","dark:bg-gray-800","shadow-sm","overflow-hidden","mt-6","transition-colors","duration-200"],[1,"flex","justify-center","items-center","p-8"],[1,"p-8","text-center"],[1,"overflow-x-auto"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","border-r-transparent"],[1,"ml-4","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400","dark:text-gray-500","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"mt-2","text-sm","font-medium","text-gray-900","dark:text-white","transition-colors","duration-200"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400","transition-colors","duration-200"],[1,"mt-6"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700","transition-colors","duration-200"],[1,"bg-gray-50","dark:bg-gray-700","transition-colors","duration-200"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-200"],["scope","col",1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider","transition-colors","duration-200"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700","transition-colors","duration-200"],[1,"hover:bg-gray-50","dark:hover:bg-gray-700","transition-colors","duration-200"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900","dark:text-white","transition-colors","duration-200"],[1,"px-6","py-4"],[1,"text-sm","text-gray-500","dark:text-gray-400","truncate","max-w-xs","transition-colors","duration-200"],[1,"flex","items-center"],[1,"text-sm","text-gray-500","dark:text-gray-400","transition-colors","duration-200"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","items-center","justify-end","space-x-3"],["title","Editar",1,"p-2","rounded-full","text-primary-600","dark:text-primary-400","hover:bg-primary-50","dark:hover:bg-primary-900/20","hover:text-primary-900","dark:hover:text-primary-300","transition-colors","duration-200",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Eliminar",1,"p-2","rounded-full","text-red-600","dark:text-red-400","hover:bg-red-50","dark:hover:bg-red-900/20","hover:text-red-900","dark:hover:text-red-300","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"h-10","w-10","flex-shrink-0","bg-gray-100","dark:bg-gray-700","rounded-full","overflow-hidden","border","border-gray-200","dark:border-gray-600","transition-colors","duration-200"],["alt","Icono de categor\xEDa",1,"h-full","w-full","object-cover",3,"src"]],template:function(e,p){e&1&&(n(0,"app-admin-header",0),t(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Gesti\xF3n de Categor\xEDas"),i(),t(5,"div",4)(6,"a",5),d(),t(7,"svg",6),n(8,"path",7),i(),a(9," Nueva Categor\xEDa "),i()()(),f(),t(10,"div",8),c(11,Y,4,0,"div",9)(12,Z,12,0,"div",10)(13,ie,15,0,"div",11),i()()),e&2&&(s(11),u(p.loading?11:p.categorias.length===0?12:13))},dependencies:[w,E,L],encapsulation:2})};var oe=r=>({"border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500":r}),ae=r=>({"opacity-70 cursor-not-allowed":r});function ne(r,o){r&1&&(t(0,"div",9),n(1,"div",11),t(2,"span",12),a(3,"Cargando..."),i()())}function se(r,o){r&1&&(t(0,"p",19)(1,"span",25),d(),t(2,"svg",35),n(3,"path",36),i(),a(4," El nombre es requerido "),i()())}function de(r,o){if(r&1&&n(0,"img",29),r&2){let e=l(2);g("src",e.previewUrl,C)}}function le(r,o){r&1&&(d(),t(0,"svg",30),n(1,"path",37),i())}function me(r,o){if(r&1&&(t(0,"div",31)(1,"div",38)(2,"div",39),d(),t(3,"svg",40),n(4,"path",41),i()(),f(),t(5,"div",42)(6,"h3",43),a(7),i()()()()),r&2){let e=l(2);s(7),x(e.error)}}function ce(r,o){r&1&&(d(),t(0,"svg",44),n(1,"circle",45)(2,"path",46),i(),a(3," Guardando... "))}function ue(r,o){if(r&1&&a(0),r&2){let e=l(2);G(" ",e.isEditMode?"Actualizar":"Crear"," ")}}function ge(r,o){if(r&1){let e=_();t(0,"form",13),S("ngSubmit",function(){y(e);let V=l();return b(V.onSubmit())}),t(1,"div",14)(2,"div",15)(3,"label",16),a(4,"Nombre"),i(),t(5,"div",17),n(6,"input",18),c(7,se,5,0,"p",19),i()(),t(8,"div",15)(9,"label",20),a(10,"Descripci\xF3n"),i(),t(11,"div",17),n(12,"textarea",21),i()(),t(13,"div",15)(14,"label",22),a(15,"URL del Icono"),i(),t(16,"div",17),n(17,"input",23),i(),t(18,"p",24),a(19,"URL a una imagen que representa esta categor\xEDa"),i()(),t(20,"div",15)(21,"div",25)(22,"div",26)(23,"label",27),a(24,"Vista previa"),i(),t(25,"div",28),c(26,de,1,1,"img",29)(27,le,2,0,":svg:svg",30),i()()()()(),c(28,me,8,1,"div",31),t(29,"div",32)(30,"button",33),a(31," Cancelar "),i(),t(32,"button",34),c(33,ce,4,0)(34,ue,1,1),i()()()}if(r&2){let e=l();g("formGroup",e.categoriaForm),s(6),g("ngClass",v(8,oe,e.isFieldInvalid("nombre"))),s(),u(e.isFieldInvalid("nombre")?7:-1),s(19),u(e.previewUrl?26:27),s(2),u(e.error?28:-1),s(4),g("disabled",e.saving||e.categoriaForm.invalid)("ngClass",v(10,ae,e.saving||e.categoriaForm.invalid)),s(),u(e.saving?33:34)}}var h=class r{fb=m(q);turismoService=m(M);route=m(N);router=m(z);themeService=m(F);categoriaForm;categoriaId=null;loading=!1;saving=!1;submitted=!1;error="";previewUrl="";get isEditMode(){return this.categoriaId!==null}isDarkMode(){return this.themeService.isDarkMode()}ngOnInit(){this.initForm();let o=this.route.snapshot.paramMap.get("id");o&&(this.categoriaId=+o,this.loadCategoria(this.categoriaId)),this.categoriaForm.get("icono_url")?.valueChanges.subscribe(e=>{this.previewUrl=e})}initForm(){this.categoriaForm=this.fb.group({nombre:["",H.required],descripcion:[""],icono_url:[""]})}loadCategoria(o){this.loading=!0,this.turismoService.getCategoria(o).subscribe({next:e=>{this.categoriaForm.patchValue({nombre:e.nombre,descripcion:e.descripcion||"",icono_url:e.icono_url||""}),this.previewUrl=e.icono_url||"",this.loading=!1},error:e=>{console.error("Error al cargar categor\xEDa:",e),this.error="Error al cargar los datos de la categor\xEDa. Por favor, intente nuevamente.",this.loading=!1}})}isFieldInvalid(o){let e=this.categoriaForm.get(o);return e?.invalid&&(e?.dirty||e?.touched||this.submitted)||!1}onSubmit(){if(this.submitted=!0,this.error="",this.categoriaForm.invalid)return;let o=this.categoriaForm.value;this.saving=!0,this.isEditMode&&this.categoriaId?this.turismoService.updateCategoria(this.categoriaId,o).subscribe({next:()=>{this.saving=!1,alert("Categor\xEDa actualizada correctamente"),this.router.navigate(["/admin/categorias"])},error:e=>{console.error("Error al actualizar categor\xEDa:",e),this.error=e.error?.message||"Error al actualizar la categor\xEDa. Por favor, intente nuevamente.",this.saving=!1}}):this.turismoService.createCategoria(o).subscribe({next:()=>{this.saving=!1,alert("Categor\xEDa creada correctamente"),this.router.navigate(["/admin/categorias"])},error:e=>{console.error("Error al crear categor\xEDa:",e),this.error=e.error?.message||"Error al crear la categor\xEDa. Por favor, intente nuevamente.",this.saving=!1}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=k({type:r,selectors:[["app-categoria-form"]],decls:13,vars:2,consts:[["title","Gesti\xF3n de Categorias","subtitle","Administra y gestiona las categorias que dividiran los servicios de tu organizaci\xF3n"],[1,"container","mx-auto","px-2","sm:px-4","py-6","bg-gray-50","dark:bg-gray-900","min-h-screen","transition-colors","duration-200"],[1,"sm:flex","sm:items-center","sm:justify-between"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","transition-colors","duration-200"],[1,"mt-4","sm:mt-0"],["routerLink","/admin/categorias",1,"inline-flex","items-center","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-200","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5","text-gray-500","dark:text-gray-400","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"bg-white","dark:bg-gray-800","shadow-sm","rounded-lg","mt-6","transition-colors","duration-200"],[1,"flex","justify-center","items-center","p-8"],[1,"space-y-6","p-6",3,"formGroup"],[1,"inline-block","h-8","w-8","animate-spin","rounded-full","border-4","border-solid","border-primary-400","border-r-transparent"],[1,"ml-4","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],[1,"space-y-6","p-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","gap-y-6","gap-x-4","sm:grid-cols-6"],[1,"sm:col-span-6"],["for","nombre",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],[1,"mt-2"],["type","text","id","nombre","formControlName","nombre",1,"block","w-full","h-10","px-3","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200",3,"ngClass"],[1,"mt-2","text-sm","text-red-600","dark:text-red-400","transition-colors","duration-200"],["for","descripcion",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["id","descripcion","formControlName","descripcion","rows","4",1,"block","w-full","px-3","py-2","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],["for","icono_url",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],["type","text","id","icono_url","formControlName","icono_url",1,"block","w-full","h-10","px-3","rounded-md","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","shadow-sm","focus:border-primary-500","focus:ring-primary-500","sm:text-sm","transition-colors","duration-200"],[1,"mt-2","text-xs","text-gray-500","dark:text-gray-400","transition-colors","duration-200"],[1,"flex","items-center"],[1,"mr-3"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","transition-colors","duration-200"],[1,"mt-2","h-24","w-24","rounded-md","border","border-gray-200","dark:border-gray-700","bg-gray-100","dark:bg-gray-700","flex","items-center","justify-center","overflow-hidden","transition-colors","duration-200"],["alt","Vista previa",1,"h-20","w-20","object-contain",3,"src"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-12","w-12","text-gray-300","dark:text-gray-500","transition-colors","duration-200"],[1,"rounded-md","bg-red-50","dark:bg-red-900/30","p-4","my-4","transition-colors","duration-200"],[1,"flex","justify-end","space-x-3","pt-4","border-t","border-gray-200","dark:border-gray-700","transition-colors","duration-200"],["type","button","routerLink","/admin/categorias",1,"inline-flex","justify-center","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-200","shadow-sm","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-200"],["type","submit",1,"inline-flex","justify-center","rounded-md","border","border-transparent","bg-primary-600","px-4","py-2","text-sm","font-medium","text-white","shadow-sm","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:ring-offset-2","dark:focus:ring-offset-gray-800","transition-colors","duration-200",3,"disabled","ngClass"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"flex"],[1,"flex-shrink-0"],["viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-red-400","dark:text-red-300"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800","dark:text-red-200","transition-colors","duration-200"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,p){e&1&&(n(0,"app-admin-header",0),t(1,"div",1)(2,"div",2)(3,"h1",3),a(4),i(),t(5,"div",4)(6,"a",5),d(),t(7,"svg",6),n(8,"path",7),i(),a(9," Volver al listado "),i()()(),f(),t(10,"div",8),c(11,ne,4,0,"div",9)(12,ge,35,12,"form",10),i()()),e&2&&(s(4),x(p.isEditMode?"Editar Categor\xEDa":"Crear Categor\xEDa"),s(7),u(p.loading?11:12))},dependencies:[w,j,E,$,B,A,R,U,O,P,L],encapsulation:2})};var Re=[{path:"",component:T},{path:"create",component:h},{path:"edit/:id",component:h}];export{Re as CATEGORIAS_ROUTES};
