import{a as L}from"./chunk-PYGBUVLC.js";import{a as P}from"./chunk-TFAAEB5J.js";import{a as _e,b as R,c as v,d as V,e as G,h as we,i as N,l as z,o as D,p as ye,q as Ce,r as ke,x as B,y as Me,z as j}from"./chunk-KTW5JVGU.js";import{d as I,f as O,g as Y}from"./chunk-XR3SD2KY.js";import{A as me,Bb as ge,Cb as pe,Db as ue,G as ie,Gb as i,Hb as b,Hc as E,Ka as U,La as a,Lb as fe,Mb as xe,Nb as be,Pb as ve,Pc as he,Qb as y,Sc as q,U as ce,Va as M,_ as u,_a as c,fb as s,ga as h,ha as _,ia as f,ja as w,m as se,ob as t,p as de,pb as r,qb as d,tb as C,ub as x,uc as T,vb as g,wc as S}from"./chunk-ETYZCZA5.js";import{a as oe,b as ne}from"./chunk-4CLCTAJ7.js";var A=class o{http=u(he);authService=u(P);API_URL=q.apiUrl;CLIENT_ID=q.googleClientId;initGoogleOneTap(n=!1){if(!window.google?.accounts?.id){console.error("Google Accounts script not loaded");return}window.google.accounts.id.initialize({client_id:this.CLIENT_ID,callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),n||window.google.accounts.id.disableAutoSelect()}renderGoogleButton(n){let e=document.getElementById(n);if(!e){console.error(`Button element with id "${n}" not found`);return}if(!window.google?.accounts?.id){console.error("Google Accounts script not loaded");return}window.google.accounts.id.renderButton(e,{theme:"outline",size:"large",type:"standard",text:"signin_with",shape:"rectangular",logo_alignment:"left",width:e.offsetWidth})}promptGoogleOneTap(){if(!window.google?.accounts?.id){console.error("Google Accounts script not loaded");return}window.google.accounts.id.prompt(n=>{(n.isNotDisplayed()||n.isSkippedMoment())&&console.log("One Tap not displayed:",n.getNotDisplayedReason())})}handleCredentialResponse(n){console.log("Google credential response:",n),this.verifyGoogleToken(n.credential).subscribe({next:e=>{console.log("Google auth successful:",e),window.location.href="/dashboard"},error:e=>{console.error("Error authenticating with Google:",e)}})}verifyGoogleToken(n){return this.http.post(`${this.API_URL}/auth/google/verify-token`,{token:n}).pipe(de(e=>{if(e.success&&e.data)return e.data.access_token&&localStorage.setItem("auth_token",e.data.access_token),e.data;throw new Error("Invalid response from server")}),me(e=>(console.error("Error verifying Google token:",e),se(()=>e))))}signOutFromGoogle(){this.authService.logout()}static \u0275fac=function(e){return new(e||o)};static \u0275prov=ce({token:o,factory:o.\u0275fac,providedIn:"root"})};var Pe=["googleBtnRef"];function Oe(o,n){if(o&1){let e=C();t(0,"button",4),x("click",function(){h(e);let m=g();return _(m.handleFallbackClick())}),f(),t(1,"svg",5),d(2,"path",6)(3,"path",7)(4,"path",8)(5,"path",9),r(),i(6," Iniciar con Google "),r()}}var W=class o{googleBtnRef;googleAuthService=u(A);showFallbackButton=!1;buttonInitAttempts=0;maxInitAttempts=3;ngOnInit(){this.googleAuthService.initGoogleOneTap(!1),setTimeout(()=>this.initGoogleButton(),100)}initGoogleButton(){if(!window.google?.accounts?.id){if(this.buttonInitAttempts++,this.buttonInitAttempts>=this.maxInitAttempts){console.error("Google SDK no se pudo cargar despu\xE9s de varios intentos. Mostrando bot\xF3n de respaldo."),this.showFallbackButton=!0;return}setTimeout(()=>this.initGoogleButton(),1e3);return}try{this.googleAuthService.renderGoogleButton("googleBtn")}catch(n){console.error("Error al renderizar el bot\xF3n de Google:",n),this.showFallbackButton=!0}}handleFallbackClick(){window.location.href=`${q.apiUrl}/auth/google`}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-google-login-button"]],viewQuery:function(e,l){if(e&1&&ge(Pe,5),e&2){let m;pe(m=ue())&&(l.googleBtnRef=m.first)}},decls:4,vars:1,consts:[["googleBtnRef",""],[1,"google-login-container","w-full"],["id","googleBtn",1,"w-full","h-10","flex","items-center","justify-center"],["type","button","class","w-full flex justify-center items-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",3,"click",4,"ngIf"],["type","button",1,"w-full","flex","justify-center","items-center","gap-2","py-2","px-4","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500",3,"click"],["viewBox","0 0 24 24",1,"h-5","w-5"],["d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z","fill","#4285F4"],["d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z","fill","#34A853"],["d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z","fill","#FBBC05"],["d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z","fill","#EA4335"]],template:function(e,l){e&1&&(t(0,"div",1),d(1,"div",2,0),c(3,Oe,7,0,"button",3),r()),e&2&&(a(3),s("ngIf",l.showFallbackButton))},dependencies:[E,S],styles:[".google-login-container[_ngcontent-%COMP%]{min-height:40px;position:relative}"]})};var Se=o=>({"border-red-500 focus:border-red-500 focus:ring-red-500":o}),Ie=()=>({standalone:!0});function Fe(o,n){o&1&&(f(),t(0,"svg",55),d(1,"path",56),r())}function Te(o,n){o&1&&(f(),t(0,"svg",57),d(1,"path",58),r())}function Le(o,n){o&1&&(t(0,"p",61),i(1,"El correo electr\xF3nico es requerido"),r())}function Re(o,n){o&1&&(t(0,"p",61),i(1,"Ingrese un correo electr\xF3nico v\xE1lido"),r())}function Ve(o,n){if(o&1&&(t(0,"div",59),c(1,Le,2,0,"p",60)(2,Re,2,0,"p",60),r()),o&2){let e=g();a(),s("ngIf",e.f.email.errors.required),a(),s("ngIf",e.f.email.errors.email)}}function Ge(o,n){o&1&&(f(),t(0,"svg",62),d(1,"path",63)(2,"path",64),r())}function Ne(o,n){o&1&&(f(),t(0,"svg",62),d(1,"path",65),r())}function ze(o,n){o&1&&(t(0,"p",66),i(1," La contrase\xF1a es requerida "),r())}function De(o,n){if(o&1){let e=C();t(0,"div",67)(1,"div",68)(2,"div",69),f(),t(3,"svg",70),d(4,"path",71),r()(),w(),t(5,"div",72)(6,"h3",73),i(7," Verificaci\xF3n de correo requerida "),r(),t(8,"div",74)(9,"p"),i(10,"Necesitas verificar tu direcci\xF3n de correo electr\xF3nico."),r(),t(11,"button",75),x("click",function(){h(e);let m=g();return _(m.resendVerificationEmail())}),i(12," Reenviar correo de verificaci\xF3n "),r()()()()()}}function Be(o,n){if(o&1&&(t(0,"div",76)(1,"div",68)(2,"div",69),f(),t(3,"svg",77),d(4,"path",78),r()(),w(),t(5,"div",72)(6,"h3",79),i(7),r()()()()),o&2){let e=g();a(7),b(e.error)}}function je(o,n){o&1&&d(0,"span",80)}function Ae(o,n){o&1&&(t(0,"span"),i(1,"Comenzar"),r())}var K=class o{fb=u(B);authService=u(P);googleAuthService=u(A);router=u(O);route=u(I);themeService=u(L);loginForm;loading=!1;googleLoading=!1;submitted=!1;error="";rememberMe=!1;emailVerificationNeeded=!1;showPassword=!1;isFirstClick=!0;constructor(){this.loginForm=this.fb.group({email:["",[v.required,v.email]],password:["",v.required]})}ngOnInit(){this.googleAuthService.initGoogleOneTap(!1),this.route.queryParams.subscribe(n=>{let e=n.token;e&&(localStorage.setItem("auth_token",e),this.authService.loadUserProfile(!0).subscribe({next:()=>{this.router.navigate(["/dashboard"])},error:()=>{this.error="Error al cargar el perfil de usuario"}}))})}get f(){return this.loginForm.controls}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleDarkMode(){this.themeService.toggleDarkMode()}isDarkMode(){return this.themeService.isDarkMode()}onSubmit(){this.submitted=!0,this.error="",this.emailVerificationNeeded=!1,!this.loginForm.invalid&&(this.loading=!0,this.authService.login(this.loginForm.value).subscribe({next:n=>{if(n.email_verified===!1){this.emailVerificationNeeded=!0,this.error="Por favor, verifica tu correo electr\xF3nico antes de iniciar sesi\xF3n.",this.loading=!1;return}this.authService.loadUserProfile(!0).subscribe({next:()=>{this.loading=!1,this.authService.handlePostLoginRedirectWithParams(this.router,this.route)},error:()=>{this.error="Error al cargar el perfil de usuario",this.loading=!1}})},error:n=>{this.error=n.error?.message||"Credenciales inv\xE1lidas",this.loading=!1}}))}resendVerificationEmail(){if(!this.loginForm.get("email")?.value){this.error="Por favor, ingresa tu correo electr\xF3nico.";return}this.loading=!0,this.authService.resendVerificationEmail().subscribe({next:()=>{this.error="",this.emailVerificationNeeded=!0,this.loading=!1,alert("Se ha enviado un nuevo correo de verificaci\xF3n. Por favor, revisa tu bandeja de entrada.")},error:e=>{this.error=e.error?.message||"Error al enviar el correo de verificaci\xF3n",this.loading=!1}})}onDocumentClick(n){if(this.isFirstClick){this.isFirstClick=!1;return}let e=document.querySelector(".mx-auto.w-full.max-w-6xl.overflow-hidden.rounded-2xl");if(!e)return;e.contains(n.target)||this.router.navigate(["/"])}preventPropagation(n){n.stopPropagation()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-login"]],hostBindings:function(e,l){e&1&&x("click",function(p){return l.onDocumentClick(p)},!1,U)},decls:74,vars:22,consts:[[1,"flex","min-h-screen","items-center","justify-center","py-6","sm:py-12","px-4","sm:px-6","lg:px-8",2,"background-image","url('/assets/images/foto05.jpg')","background-size","cover","background-position","center"],[1,"mx-auto","w-full","max-w-6xl","overflow-hidden","rounded-2xl","sm:rounded-3xl","bg-white","dark:bg-gray-800","shadow-xl","lg:flex",2,"height","520px","max-height","520px"],[1,"w-full","p-4","sm:p-5","md:p-6","lg:p-8","lg:w-1/2","h-full","flex","flex-col"],[1,"flex","justify-between","items-center","mb-3"],[1,"mb-1","text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-gray-600","dark:text-gray-300","text-sm"],[1,"p-2","rounded-full","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-gray-600","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-yellow-300","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],[1,"mb-3","flex","border-b","border-gray-200","dark:border-gray-700"],[1,"flex-1","border-b-2","border-orange-500","py-2","text-center","font-semibold","transition-colors","dark:text-white"],["routerLink","/register",1,"flex-1","border-b-0","py-2","text-center","font-semibold","text-gray-400","hover:text-gray-600","transition-colors","dark:hover:text-gray-300"],[1,"mb-2","text-lg","font-bold","text-gray-900","dark:text-white"],[1,"mb-2","text-gray-600","dark:text-gray-300","text-sm"],[1,"mb-3","flex","justify-center","space-x-4"],[1,"w-98","h-10","rounded-2xl"],[1,"relative","mb-3"],[1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-gray-300","dark:border-gray-700"],[1,"relative","flex","justify-center","text-sm"],[1,"bg-white","dark:bg-gray-800","px-4","text-gray-500","dark:text-gray-400"],[1,"space-y-2","flex-grow",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","email","type","email","formControlName","email","autocomplete","email","placeholder","admin@ejemplo.com",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["class","mt-1",4,"ngIf"],[1,"password-field"],["for","password",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"relative"],["id","password","formControlName","password","autocomplete","current-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"type","ngClass"],[1,"password-toggle",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-gray-400 dark:text-gray-300","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["class","text-sm text-red-600 dark:text-red-400 mt-1",4,"ngIf"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["id","remember_me","type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-orange-500","focus:ring-orange-500",3,"ngModelChange","ngModel","ngModelOptions"],["for","remember_me",1,"ml-2","block","text-sm","text-gray-700","dark:text-gray-300"],["routerLink","/forgot-password",1,"text-sm","font-medium","text-orange-500","hover:text-orange-600","dark:hover:text-orange-400"],["class","rounded-md border border-yellow-300 bg-yellow-50 dark:bg-yellow-900 dark:border-yellow-800 p-2",4,"ngIf"],["class","rounded-md border border-red-300 bg-red-50 dark:bg-red-900 dark:border-red-800 p-2",4,"ngIf"],[1,"pt-1","mt-auto"],["type","submit",1,"w-full","rounded-lg","bg-orange-500","py-2","text-center","font-semibold","text-white","hover:bg-orange-600","active:bg-orange-700",3,"disabled"],["class","inline-block h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent",4,"ngIf"],[4,"ngIf"],[1,"hidden","lg:block","lg:w-1/2","relative"],["src","/assets/images/foto01.jpg","alt","Capachica Travel",1,"h-full","w-full","object-cover"],[1,"absolute","top-10","right-10","max-w-sm","rounded-xl","bg-white","dark:bg-gray-800","p-4","shadow-lg"],[1,"flex","justify-between","items-start"],[1,"text-xl","font-bold","dark:text-white"],[1,"ml-4"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-6","w-6","text-orange-500"],["fill-rule","evenodd","d","M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule","evenodd"],[1,"mt-2","text-gray-600","dark:text-gray-300"],[1,"absolute","bottom-16","inset-x-0","text-center","text-white"],[1,"text-3xl","font-bold","mb-2"],[1,"text-xl"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-yellow-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"],[1,"mt-1"],["class","text-sm text-red-600 dark:text-red-400",4,"ngIf"],[1,"text-sm","text-red-600","dark:text-red-400"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-400","dark:text-gray-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"],[1,"text-sm","text-red-600","dark:text-red-400","mt-1"],[1,"rounded-md","border","border-yellow-300","bg-yellow-50","dark:bg-yellow-900","dark:border-yellow-800","p-2"],[1,"flex"],[1,"flex-shrink-0"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-yellow-400"],["fill-rule","evenodd","d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-yellow-800","dark:text-yellow-300"],[1,"mt-1","text-sm","text-yellow-700","dark:text-yellow-400"],["type","button",1,"mt-1","text-sm","font-medium","text-yellow-800","dark:text-yellow-300","underline","hover:text-yellow-900","dark:hover:text-yellow-200",3,"click"],[1,"rounded-md","border","border-red-300","bg-red-50","dark:bg-red-900","dark:border-red-800","p-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L10 8.586 8.293 6.879a1 1 0 10-1.414 1.414L8.586 10l-1.707 1.707a1 1 0 101.414 1.414L10 11.414l1.707 1.707a1 1 0 101.414-1.414L11.414 10l1.707-1.707a1 1 0 000-1.414z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800","dark:text-red-300"],[1,"inline-block","h-5","w-5","animate-spin","rounded-full","border-2","border-white","border-t-transparent"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),i(6,"Capachica Travel"),r(),t(7,"p",5),i(8,"Explora m\xE1s. Vive experiencias."),r()(),t(9,"button",6),x("click",function(){return l.toggleDarkMode()}),c(10,Fe,2,0,"svg",7)(11,Te,2,0,"svg",8),r()(),t(12,"div",9)(13,"button",10),i(14," Iniciar sesi\xF3n "),r(),t(15,"a",11),i(16," Registrarse "),r()(),t(17,"h2",12),i(18," Comienza tu aventura "),r(),t(19,"p",13),i(20," Inicia sesi\xF3n con cuenta externa "),r(),t(21,"div",14),d(22,"app-google-login-button",15),r(),t(23,"div",16)(24,"div",17),d(25,"div",18),r(),t(26,"div",19)(27,"span",20),i(28,"o"),r()()(),t(29,"form",21),x("ngSubmit",function(){return l.onSubmit()}),t(30,"div")(31,"label",22),i(32,"Correo electr\xF3nico"),r(),d(33,"input",23),c(34,Ve,3,2,"div",24),r(),t(35,"div",25)(36,"label",26),i(37,"Contrase\xF1a"),r(),t(38,"div",27),d(39,"input",28),t(40,"span",29),x("click",function(){return l.togglePasswordVisibility()}),c(41,Ge,3,0,"svg",30)(42,Ne,2,0,"svg",30),r()(),c(43,ze,2,0,"p",31),r(),t(44,"div",32)(45,"div",33)(46,"input",34),be("ngModelChange",function(p){return xe(l.rememberMe,p)||(l.rememberMe=p),p}),r(),t(47,"label",35),i(48," Recordarme "),r()(),t(49,"div")(50,"a",36),i(51," \xBFOlvidaste tu contrase\xF1a? "),r()()(),c(52,De,13,0,"div",37)(53,Be,8,1,"div",38),t(54,"div",39)(55,"button",40),c(56,je,1,0,"span",41)(57,Ae,2,0,"span",42),r()()()(),t(58,"div",43),d(59,"img",44),t(60,"div",45)(61,"div",46)(62,"h3",47),i(63,"\xA1Viaja por el mundo, a tu manera!"),r(),t(64,"div",48),f(),t(65,"svg",49),d(66,"path",50),r()()(),w(),t(67,"p",51),i(68," Explora destinos a tu ritmo con viajes personalizados y experiencias inolvidables. "),r()(),t(69,"div",52)(70,"h2",53),i(71,"\xA1Explora el mundo, sin l\xEDmites!"),r(),t(72,"p",54),i(73,"\xA1Comienza tu aventura hoy!"),r()()()()()),e&2&&(a(10),s("ngIf",!l.isDarkMode()),a(),s("ngIf",l.isDarkMode()),a(18),s("formGroup",l.loginForm),a(4),s("ngClass",y(17,Se,l.submitted&&l.f.email.errors)),a(),s("ngIf",l.submitted&&l.f.email.errors),a(5),s("type",l.showPassword?"text":"password")("ngClass",y(19,Se,l.submitted&&l.f.password.errors)),a(2),s("ngIf",!l.showPassword),a(),s("ngIf",l.showPassword),a(),s("ngIf",l.submitted&&(l.f.password.errors==null?null:l.f.password.errors.required)),a(3),fe("ngModel",l.rememberMe),s("ngModelOptions",ve(21,Ie)),a(6),s("ngIf",l.emailVerificationNeeded),a(),s("ngIf",l.error&&!l.emailVerificationNeeded),a(2),s("disabled",l.loading),a(),s("ngIf",l.loading),a(),s("ngIf",!l.loading))},dependencies:[E,T,S,j,N,R,_e,V,G,z,D,Y,Me,we,W],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-image:url(/assets/images/foto01.jpg);background-size:cover;background-position:center;position:relative;overflow-x:hidden}.background-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.login-wrapper[_ngcontent-%COMP%]{position:relative;z-index:10;padding:2rem}.logo[_ngcontent-%COMP%]{max-width:120px;margin:0 auto}.title-animated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown 1s ease}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.mx-auto[_ngcontent-%COMP%]{height:520px!important;max-height:520px!important}.password-field[_ngcontent-%COMP%]{position:relative}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;color:#6b7280}.bg-green-600[_ngcontent-%COMP%]{background-color:#16a34a}.bg-green-600[_ngcontent-%COMP%]:hover{background-color:#15803d}.bg-green-600[_ngcontent-%COMP%]:active{background-color:#166534}.btn-orange[_ngcontent-%COMP%]{background-color:orange;color:#fff;transition:all .2s ease;padding:.5rem 1rem;border-radius:.25rem}.btn-orange[_ngcontent-%COMP%]:hover{background-color:#e69500}.btn-orange[_ngcontent-%COMP%]:active{background-color:#cc8400}.btn-orange[_ngcontent-%COMP%]:disabled{background-color:#ffd280;cursor:not-allowed}.capachica-title[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-weight:800;font-size:3.5rem;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.5);letter-spacing:-1px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.rounded-3xl[_ngcontent-%COMP%]{border-radius:1.5rem}button[type=submit][_ngcontent-%COMP%]{transition:all .2s ease;background-color:orange}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#e69500}button[type=submit][_ngcontent-%COMP%]:active{background-color:#cc8400}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ffd280;cursor:not-allowed}.border-b-2.border-orange-500[_ngcontent-%COMP%]{border-bottom-width:2px;border-color:orange;font-weight:600}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.overflow-y-auto[_ngcontent-%COMP%]{overflow-y:auto;scrollbar-width:thin;scrollbar-color:#FFA500 #f1f1f1}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:orange;border-radius:4px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#e69500}@media (max-width: 768px){.space-y-4[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){margin-top:.75rem}.rounded-3xl[_ngcontent-%COMP%]{border-radius:1rem}.py-3[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.mx-auto[_ngcontent-%COMP%]{height:520px!important;max-height:520px!important}}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 640px){input[_ngcontent-%COMP%], button[type=submit][_ngcontent-%COMP%]{padding-top:.625rem;padding-bottom:.625rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}}.flex-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-grow[_ngcontent-%COMP%]{flex-grow:1}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}.space-y-3[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.75rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:.75rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.dark[_ngcontent-%COMP%]   .text-gray-900[_ngcontent-%COMP%]{color:#fff}.dark[_ngcontent-%COMP%]   .text-gray-600[_ngcontent-%COMP%]{color:#d1d5db}.dark[_ngcontent-%COMP%]   .border-gray-200[_ngcontent-%COMP%]{border-color:#374151}.dark[_ngcontent-%COMP%]   .bg-white[_ngcontent-%COMP%]{background-color:#1f2937}.dark[_ngcontent-%COMP%]   .shadow-xl[_ngcontent-%COMP%]{box-shadow:0 20px 25px -5px #0003,0 10px 10px -5px #0000001a}h1.text-2xl[_ngcontent-%COMP%]{font-size:1.375rem}h2.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-sm[_ngcontent-%COMP%]{font-size:.8125rem}.p-4[_ngcontent-%COMP%], .p-5[_ngcontent-%COMP%], .p-6[_ngcontent-%COMP%], .p-8[_ngcontent-%COMP%]{padding:1rem}"]})};var F=o=>({"border-red-500 focus:border-red-500 focus:ring-red-500":o});function qe(o,n){o&1&&(f(),t(0,"svg",35),d(1,"path",36),r())}function He(o,n){o&1&&(f(),t(0,"svg",37),d(1,"path",38),r())}function Ue(o,n){if(o&1){let e=C();t(0,"div",39)(1,"div",40)(2,"div",41),f(),t(3,"svg",42),d(4,"path",43),r()(),w(),t(5,"div",44)(6,"h3",45),i(7,"Registro exitoso"),r(),t(8,"div",46)(9,"p"),i(10,"Tu cuenta ha sido creada correctamente. Revisa tu correo para verificar tu cuenta."),r()(),t(11,"div",47)(12,"button",48),x("click",function(){h(e);let m=g();return _(m.navigateToLogin())}),i(13," Ir a iniciar sesi\xF3n "),r()()()()()}}function Ye(o,n){o&1&&(t(0,"p",92),i(1,"El nombre completo es requerido"),r())}function We(o,n){if(o&1&&(t(0,"p",92),i(1),r()),o&2){let e=g(2);a(),b(e.f.name.errors==null?null:e.f.name.errors.serverError)}}function $e(o,n){o&1&&(t(0,"p",92),i(1,"El correo electr\xF3nico es requerido"),r())}function Qe(o,n){o&1&&(t(0,"p",92),i(1,"Ingrese un correo electr\xF3nico v\xE1lido"),r())}function Ke(o,n){if(o&1&&(t(0,"p",92),i(1),r()),o&2){let e=g(2);a(),b(e.f.email.errors==null?null:e.f.email.errors.serverError)}}function Je(o,n){o&1&&(t(0,"p",92),i(1,"El tel\xE9fono es requerido"),r())}function Xe(o,n){if(o&1&&(t(0,"p",92),i(1),r()),o&2){let e=g(2);a(),b(e.f.phone.errors==null?null:e.f.phone.errors.serverError)}}function Ze(o,n){if(o&1&&(t(0,"p",92),i(1),r()),o&2){let e=g(2);a(),b(e.f.country.errors==null?null:e.f.country.errors.serverError)}}function et(o,n){if(o&1&&(t(0,"p",92),i(1),r()),o&2){let e=g(2);a(),b(e.f.birth_date.errors==null?null:e.f.birth_date.errors.serverError)}}function tt(o,n){if(o&1&&(t(0,"p",92),i(1),r()),o&2){let e=g(2);a(),b(e.f.address.errors==null?null:e.f.address.errors.serverError)}}function rt(o,n){if(o&1&&(t(0,"p",92),i(1),r()),o&2){let e=g(2);a(),b(e.f.gender.errors==null?null:e.f.gender.errors.serverError)}}function ot(o,n){if(o&1&&(t(0,"p",92),i(1),r()),o&2){let e=g(2);a(),b(e.f.preferred_language.errors==null?null:e.f.preferred_language.errors.serverError)}}function nt(o,n){if(o&1&&(t(0,"p",92),i(1),r()),o&2){let e=g(2);a(),b(e.fileError)}}function it(o,n){o&1&&(f(),t(0,"svg",93),d(1,"path",94)(2,"path",95),r())}function at(o,n){o&1&&(f(),t(0,"svg",93),d(1,"path",96),r())}function lt(o,n){o&1&&(t(0,"p",92),i(1,"La contrase\xF1a es requerida"),r())}function st(o,n){o&1&&(t(0,"p",92),i(1,"La contrase\xF1a debe tener al menos 8 caracteres"),r())}function dt(o,n){if(o&1&&(t(0,"p",92),i(1),r()),o&2){let e=g(2);a(),b(e.f.password.errors==null?null:e.f.password.errors.serverError)}}function mt(o,n){o&1&&(f(),t(0,"svg",93),d(1,"path",94)(2,"path",95),r())}function ct(o,n){o&1&&(f(),t(0,"svg",93),d(1,"path",96),r())}function gt(o,n){o&1&&(t(0,"p",92),i(1,"La confirmaci\xF3n de contrase\xF1a es requerida"),r())}function pt(o,n){o&1&&(t(0,"p",92),i(1,"Las contrase\xF1as no coinciden"),r())}function ut(o,n){if(o&1&&(t(0,"div",97)(1,"div",40)(2,"div",41),f(),t(3,"svg",98),d(4,"path",99),r()(),w(),t(5,"div",44)(6,"h3",100),i(7),r()()()()),o&2){let e=g(2);a(7),b(e.error)}}function ft(o,n){o&1&&d(0,"span",101)}function xt(o,n){o&1&&(t(0,"span"),i(1,"Registrarse"),r())}function bt(o,n){if(o&1){let e=C();t(0,"form",49),x("ngSubmit",function(){h(e);let m=g();return _(m.onSubmit())}),t(1,"div")(2,"label",50),i(3,"Nombre completo"),r(),d(4,"input",51),c(5,Ye,2,0,"p",52)(6,We,2,1,"p",52),r(),t(7,"div")(8,"label",53),i(9,"Correo electr\xF3nico"),r(),d(10,"input",54),c(11,$e,2,0,"p",52)(12,Qe,2,0,"p",52)(13,Ke,2,1,"p",52),r(),t(14,"div")(15,"label",55),i(16,"Tel\xE9fono"),r(),d(17,"input",56),c(18,Je,2,0,"p",52)(19,Xe,2,1,"p",52),r(),t(20,"div")(21,"label",57),i(22,"Pa\xEDs"),r(),d(23,"input",58),c(24,Ze,2,1,"p",52),r(),t(25,"div")(26,"label",59),i(27,"Fecha de nacimiento"),r(),d(28,"input",60),c(29,et,2,1,"p",52),r(),t(30,"div")(31,"label",61),i(32,"Direcci\xF3n"),r(),d(33,"input",62),c(34,tt,2,1,"p",52),r(),t(35,"div")(36,"label",63),i(37,"G\xE9nero"),r(),t(38,"select",64)(39,"option",65),i(40,"Seleccionar"),r(),t(41,"option",66),i(42,"Masculino"),r(),t(43,"option",67),i(44,"Femenino"),r(),t(45,"option",68),i(46,"Otro"),r(),t(47,"option",69),i(48,"Prefiero no decir"),r()(),c(49,rt,2,1,"p",52),r(),t(50,"div")(51,"label",70),i(52,"Idioma preferido"),r(),t(53,"select",71)(54,"option",65),i(55,"Seleccionar"),r(),t(56,"option",72),i(57,"Espa\xF1ol"),r(),t(58,"option",73),i(59,"Ingl\xE9s"),r(),t(60,"option",74),i(61,"Portugu\xE9s"),r(),t(62,"option",75),i(63,"Franc\xE9s"),r(),t(64,"option",76),i(65,"Alem\xE1n"),r()(),c(66,ot,2,1,"p",52),r(),t(67,"div")(68,"label",77),i(69,"Foto de perfil (Opcional)"),r(),t(70,"input",78),x("change",function(m){h(e);let p=g();return _(p.onFileChange(m))}),r(),c(71,nt,2,1,"p",52),r(),t(72,"div",79)(73,"label",80),i(74,"Contrase\xF1a"),r(),t(75,"div",81),d(76,"input",82),t(77,"span",83),x("click",function(){h(e);let m=g();return _(m.togglePasswordVisibility())}),c(78,it,3,0,"svg",84)(79,at,2,0,"svg",84),r()(),c(80,lt,2,0,"p",52)(81,st,2,0,"p",52)(82,dt,2,1,"p",52),r(),t(83,"div",79)(84,"label",85),i(85,"Confirmar contrase\xF1a"),r(),t(86,"div",81),d(87,"input",86),t(88,"span",83),x("click",function(){h(e);let m=g();return _(m.toggleConfirmPasswordVisibility())}),c(89,mt,3,0,"svg",84)(90,ct,2,0,"svg",84),r()(),c(91,gt,2,0,"p",52)(92,pt,2,0,"p",52),r(),c(93,ut,8,1,"div",87),t(94,"div",88)(95,"button",89),c(96,ft,1,0,"span",90)(97,xt,2,0,"span",91),r()()()}if(o&2){let e=g();s("formGroup",e.registerForm),a(4),s("ngClass",y(39,F,e.submitted&&e.f.name.errors)),a(),s("ngIf",e.submitted&&(e.f.name.errors==null?null:e.f.name.errors.required)),a(),s("ngIf",e.f.name.errors==null?null:e.f.name.errors.serverError),a(4),s("ngClass",y(41,F,e.submitted&&e.f.email.errors)),a(),s("ngIf",e.submitted&&(e.f.email.errors==null?null:e.f.email.errors.required)),a(),s("ngIf",e.submitted&&(e.f.email.errors==null?null:e.f.email.errors.email)),a(),s("ngIf",e.f.email.errors==null?null:e.f.email.errors.serverError),a(4),s("ngClass",y(43,F,e.submitted&&e.f.phone.errors)),a(),s("ngIf",e.submitted&&(e.f.phone.errors==null?null:e.f.phone.errors.required)),a(),s("ngIf",e.f.phone.errors==null?null:e.f.phone.errors.serverError),a(4),s("ngClass",y(45,F,e.f.country.errors)),a(),s("ngIf",e.f.country.errors==null?null:e.f.country.errors.serverError),a(4),s("ngClass",y(47,F,e.f.birth_date.errors)),a(),s("ngIf",e.f.birth_date.errors==null?null:e.f.birth_date.errors.serverError),a(4),s("ngClass",y(49,F,e.f.address.errors)),a(),s("ngIf",e.f.address.errors==null?null:e.f.address.errors.serverError),a(4),s("ngClass",y(51,F,e.f.gender.errors)),a(11),s("ngIf",e.f.gender.errors==null?null:e.f.gender.errors.serverError),a(4),s("ngClass",y(53,F,e.f.preferred_language.errors)),a(13),s("ngIf",e.f.preferred_language.errors==null?null:e.f.preferred_language.errors.serverError),a(5),s("ngIf",e.fileError),a(5),s("type",e.showPassword?"text":"password")("ngClass",y(55,F,e.submitted&&e.f.password.errors)),a(2),s("ngIf",!e.showPassword),a(),s("ngIf",e.showPassword),a(),s("ngIf",e.submitted&&(e.f.password.errors==null?null:e.f.password.errors.required)),a(),s("ngIf",e.submitted&&(e.f.password.errors==null?null:e.f.password.errors.minlength)),a(),s("ngIf",e.f.password.errors==null?null:e.f.password.errors.serverError),a(5),s("type",e.showConfirmPassword?"text":"password")("ngClass",y(57,F,e.submitted&&e.f.password_confirmation.errors)),a(2),s("ngIf",!e.showConfirmPassword),a(),s("ngIf",e.showConfirmPassword),a(),s("ngIf",e.submitted&&(e.f.password_confirmation.errors==null?null:e.f.password_confirmation.errors.required)),a(),s("ngIf",e.submitted&&(e.f.password_confirmation.errors==null?null:e.f.password_confirmation.errors.mustMatch)),a(),s("ngIf",e.error&&!e.registrationSuccess),a(2),s("disabled",e.loading),a(),s("ngIf",e.loading),a(),s("ngIf",!e.loading)}}function vt(o,n){return e=>{let l=e.controls[o],m=e.controls[n];m.errors&&!m.errors.mustMatch||(l.value!==m.value?m.setErrors({mustMatch:!0}):m.setErrors(null))}}var J=class o{fb=u(B);authService=u(P);googleAuthService=u(A);router=u(O);route=u(I);themeService=u(L);registerForm;loading=!1;googleLoading=!1;submitted=!1;error="";fileError="";registrationSuccess=!1;selectedFile=null;showPassword=!1;showConfirmPassword=!1;isFirstClick=!0;constructor(){this.registerForm=this.fb.group({name:["",v.required],email:["",[v.required,v.email]],phone:["",v.required],country:[""],birth_date:[""],address:[""],gender:[""],preferred_language:[""],password:["",[v.required,v.minLength(8)]],password_confirmation:["",v.required]},{validators:vt("password","password_confirmation")})}ngOnInit(){this.googleAuthService.initGoogleOneTap(!1),this.route.queryParams.subscribe(n=>{let e=n.token;e&&(localStorage.setItem("auth_token",e),this.authService.loadUserProfile(!0).subscribe({next:()=>this.router.navigate(["/dashboard"]),error:()=>this.error="Error al cargar perfil tras inicio con Google."}))})}get f(){return this.registerForm.controls}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}onFileChange(n){let e=n.target;if(this.fileError="",this.selectedFile=null,e.files&&e.files.length){let l=e.files[0];if(!l.type.startsWith("image/")){this.fileError="El archivo debe ser una imagen.",e.value="";return}if(l.size>5*1024*1024){this.fileError="La imagen no debe superar los 5MB.",e.value="";return}this.selectedFile=l}}onSubmit(){if(this.submitted=!0,this.error="",this.fileError="",Object.keys(this.f).forEach(e=>{this.f[e].setErrors(this.f[e].errors?ne(oe({},this.f[e].errors),{serverError:null}):null),this.f[e].updateValueAndValidity({onlySelf:!0,emitEvent:!1})}),this.registerForm.invalid){let e=Object.keys(this.f).find(l=>this.f[l].invalid);e&&document.getElementById(e)?.focus();return}this.loading=!0;let n={name:this.registerForm.value.name,email:this.registerForm.value.email,password:this.registerForm.value.password,password_confirmation:this.registerForm.value.password_confirmation,phone:this.registerForm.value.phone,country:this.registerForm.value.country||null,birth_date:this.registerForm.value.birth_date||null,address:this.registerForm.value.address||null,gender:this.registerForm.value.gender||null,preferred_language:this.registerForm.value.preferred_language||null,foto_perfil:this.selectedFile};this.authService.register(n).subscribe({next:()=>{this.registrationSuccess=!0,this.loading=!1,this.registerForm.reset(),this.submitted=!1,this.selectedFile=null;let e=document.getElementById("foto_perfil");e&&(e.value="")},error:e=>{let l="Ha ocurrido un error durante el registro.";if(this.error=e.error?.message||l,e.error?.errors){let m=!1,p=e.error.errors;if(Object.keys(p).forEach(k=>{let re=this.registerForm.get(k),le=Array.isArray(p[k])?p[k][0]:p[k];k==="foto_perfil"?(this.fileError=le,m=!0):re&&(re.setErrors(ne(oe({},re.errors),{serverError:le})),m=!0)}),!m&&typeof p=="object"&&p!==null){let k=Object.keys(p)[0];k&&Array.isArray(p[k])&&p[k].length>0?this.error=p[k][0]:k&&typeof p[k]=="string"&&(this.error=p[k])}}this.loading=!1}})}navigateToLogin(){this.router.navigate(["/login"])}onDocumentClick(n){if(this.isFirstClick){this.isFirstClick=!1;return}let e=document.querySelector(".mx-auto.w-full.max-w-6xl.overflow-hidden.rounded-2xl");if(!e)return;e.contains(n.target)||this.router.navigate(["/"])}preventPropagation(n){n.stopPropagation()}toggleDarkMode(){this.themeService.toggleDarkMode()}isDarkMode(){return this.themeService.isDarkMode()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-register"]],hostBindings:function(e,l){e&1&&x("click",function(p){return l.onDocumentClick(p)},!1,U)},decls:47,vars:4,consts:[[1,"flex","min-h-screen","items-center","justify-center","py-6","sm:py-12","px-4","sm:px-6","lg:px-8",2,"background-image","url('/assets/images/foto05.jpg')","background-size","cover","background-position","center"],[1,"mx-auto","w-full","max-w-6xl","overflow-hidden","rounded-2xl","sm:rounded-3xl","bg-white","dark:bg-gray-800","shadow-xl","lg:flex",2,"height","520px","max-height","520px",3,"click"],[1,"w-full","p-4","sm:p-5","md:p-6","lg:p-8","lg:w-1/2","h-full","overflow-y-auto","custom-scrollbar",2,"height","100%","max-height","100%","box-sizing","border-box"],[1,"flex","justify-between","items-center","mb-3"],[1,"mb-1","text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-gray-600","dark:text-gray-300","text-sm"],[1,"p-2","rounded-full","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-gray-600","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-yellow-300","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],[1,"mb-3","flex","border-b","border-gray-200","dark:border-gray-700"],["routerLink","/login",1,"flex-1","border-b-0","py-2","text-center","font-semibold","text-gray-400","hover:text-gray-600","dark:hover:text-gray-300","transition-colors"],[1,"flex-1","border-b-2","border-orange-500","py-2","text-center","font-semibold","transition-colors","dark:text-white"],[1,"mb-2","text-gray-600","dark:text-gray-300","text-sm"],[1,"mb-3","flex","justify-center","space-x-4"],[1,"w-98","h-10","rounded-2xl"],[1,"relative","mb-3"],[1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-gray-300","dark:border-gray-700"],[1,"relative","flex","justify-center","text-sm"],[1,"bg-white","dark:bg-gray-800","px-4","text-gray-500","dark:text-gray-400"],[1,"mb-2","text-lg","font-bold","text-gray-900","dark:text-white"],["class","rounded-md border border-green-300 bg-green-50 dark:bg-green-900 dark:border-green-800 p-4",4,"ngIf"],["class","space-y-2 flex-grow",3,"formGroup","ngSubmit",4,"ngIf"],[1,"hidden","lg:block","lg:w-1/2","relative"],["src","/assets/images/foto01.jpg","alt","Capachica Travel",1,"h-full","w-full","object-cover"],[1,"absolute","top-10","right-10","max-w-sm","rounded-xl","bg-white","dark:bg-gray-800","p-4","shadow-lg"],[1,"flex","justify-between","items-start"],[1,"text-xl","font-bold","dark:text-white"],[1,"ml-4"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-6","w-6","text-orange-500"],["fill-rule","evenodd","d","M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule","evenodd"],[1,"mt-2","text-gray-600","dark:text-gray-300"],[1,"absolute","bottom-16","inset-x-0","text-center","text-white"],[1,"text-3xl","font-bold","mb-2"],[1,"text-xl"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-yellow-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"],[1,"rounded-md","border","border-green-300","bg-green-50","dark:bg-green-900","dark:border-green-800","p-4"],[1,"flex"],[1,"flex-shrink-0"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-green-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-green-800","dark:text-green-300"],[1,"mt-2","text-sm","text-green-700","dark:text-green-400"],[1,"mt-4"],["type","button",1,"rounded-lg","bg-orange-500","py-2","px-4","text-sm","font-medium","text-white","hover:bg-orange-600",3,"click"],[1,"space-y-2","flex-grow",3,"ngSubmit","formGroup"],["for","name",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","name","type","text","formControlName","name","autocomplete","name","placeholder","Tu nombre completo",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["class","text-sm text-red-600 dark:text-red-400 mt-1",4,"ngIf"],["for","email",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","email","type","email","formControlName","email","autocomplete","email","placeholder","ejemplo@correo.com",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["for","phone",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","phone","type","tel","formControlName","phone","autocomplete","tel","placeholder","987654321",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["for","country",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","country","type","text","formControlName","country","placeholder","Tu pa\xEDs",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["for","birth_date",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","birth_date","type","date","formControlName","birth_date",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["for","address",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","address","type","text","formControlName","address","placeholder","Tu direcci\xF3n",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["for","gender",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","gender","formControlName","gender",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["value",""],["value","male"],["value","female"],["value","other"],["value","prefer_not_to_say"],["for","preferred_language",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","preferred_language","formControlName","preferred_language",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["value","es"],["value","en"],["value","pt"],["value","fr"],["value","de"],["for","foto_perfil",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","foto_perfil","type","file","accept","image/*",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","px-3","py-2","text-sm","text-gray-700","dark:text-gray-300","file:mr-4","file:rounded-md","file:border-0","file:bg-orange-50","dark:file:bg-orange-900","file:py-2","file:px-4","file:text-sm","file:font-medium","file:text-orange-700","dark:file:text-orange-300","hover:file:bg-orange-100","dark:hover:file:bg-orange-800",3,"change"],[1,"password-field"],["for","password",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"relative"],["id","password","formControlName","password","autocomplete","new-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"type","ngClass"],[1,"password-toggle",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-gray-400 dark:text-gray-300","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["for","password_confirmation",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","password_confirmation","formControlName","password_confirmation","autocomplete","new-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"type","ngClass"],["class","rounded-md border border-red-300 bg-red-50 dark:bg-red-900 dark:border-red-800 p-2",4,"ngIf"],[1,"pt-1","mt-auto"],["type","submit",1,"w-full","rounded-lg","bg-orange-500","py-2","text-center","font-semibold","text-white","hover:bg-orange-600","active:bg-orange-700",3,"disabled"],["class","inline-block h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent",4,"ngIf"],[4,"ngIf"],[1,"text-sm","text-red-600","dark:text-red-400","mt-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-400","dark:text-gray-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"],[1,"rounded-md","border","border-red-300","bg-red-50","dark:bg-red-900","dark:border-red-800","p-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L10 8.586 8.293 6.879a1 1 0 10-1.414 1.414L8.586 10l-1.707 1.707a1 1 0 101.414 1.414L10 11.414l1.707 1.707a1 1 0 101.414-1.414L11.414 10l1.707-1.707a1 1 0 000-1.414z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800","dark:text-red-300"],[1,"inline-block","h-5","w-5","animate-spin","rounded-full","border-2","border-white","border-t-transparent"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1),x("click",function(p){return l.preventPropagation(p)}),t(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),i(6,"Capachica Travel"),r(),t(7,"p",5),i(8,"Explora m\xE1s. Vive experiencias."),r()(),t(9,"button",6),x("click",function(){return l.toggleDarkMode()}),c(10,qe,2,0,"svg",7)(11,He,2,0,"svg",8),r()(),t(12,"div",9)(13,"a",10),i(14," Iniciar sesi\xF3n "),r(),t(15,"button",11),i(16," Registrarse "),r()(),t(17,"p",12),i(18," Inicia sesi\xF3n con cuenta externa "),r(),t(19,"div",13),d(20,"app-google-login-button",14),r(),t(21,"div",15)(22,"div",16),d(23,"div",17),r(),t(24,"div",18)(25,"span",19),i(26,"o"),r()()(),t(27,"h2",20),i(28," Crea tu cuenta "),r(),c(29,Ue,14,0,"div",21)(30,bt,98,59,"form",22),r(),t(31,"div",23),d(32,"img",24),t(33,"div",25)(34,"div",26)(35,"h3",27),i(36,"\xA1Viaja por el mundo, a tu manera!"),r(),t(37,"div",28),f(),t(38,"svg",29),d(39,"path",30),r()()(),w(),t(40,"p",31),i(41," Explora destinos a tu ritmo con viajes personalizados y experiencias inolvidables. "),r()(),t(42,"div",32)(43,"h2",33),i(44,"\xA1Explora el mundo, sin l\xEDmites!"),r(),t(45,"p",34),i(46,"\xA1Comienza tu aventura hoy!"),r()()()()()),e&2&&(a(10),s("ngIf",!l.isDarkMode()),a(),s("ngIf",l.isDarkMode()),a(18),s("ngIf",l.registrationSuccess),a(),s("ngIf",!l.registrationSuccess))},dependencies:[E,T,S,j,N,Ce,ke,R,ye,V,G,z,D,Y,W],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-image:url(/assets/images/foto01.jpg);background-size:cover;background-position:center;position:relative;overflow-x:hidden}.background-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#fffc;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);z-index:0}.register-wrapper[_ngcontent-%COMP%]{position:relative;z-index:10;padding:2rem}.logo[_ngcontent-%COMP%]{max-width:120px;margin:0 auto}.title-animated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown 1s ease}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.mx-auto[_ngcontent-%COMP%]{height:520px!important;max-height:520px!important}.overflow-y-auto[_ngcontent-%COMP%]{max-height:520px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:#FFA500 rgba(0,0,0,.05)}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d;border-radius:4px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:orange;border-radius:4px}.space-y-3[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.75rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:.75rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.password-field[_ngcontent-%COMP%]{position:relative}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;color:#6b7280}button[type=submit][_ngcontent-%COMP%]{transition:all .2s ease;background-color:orange}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#e69500}button[type=submit][_ngcontent-%COMP%]:active{background-color:#cc8400}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ffd280;cursor:not-allowed}.border-b-2.border-orange-500[_ngcontent-%COMP%]{border-bottom-width:2px;border-color:orange;font-weight:600}.dark[_ngcontent-%COMP%]   .text-gray-900[_ngcontent-%COMP%]{color:#fff}.dark[_ngcontent-%COMP%]   .text-gray-600[_ngcontent-%COMP%]{color:#d1d5db}.dark[_ngcontent-%COMP%]   .border-gray-200[_ngcontent-%COMP%]{border-color:#374151}.dark[_ngcontent-%COMP%]   .bg-white[_ngcontent-%COMP%]{background-color:#1f2937}.dark[_ngcontent-%COMP%]   .shadow-xl[_ngcontent-%COMP%]{box-shadow:0 20px 25px -5px #0003,0 10px 10px -5px #0000001a}.custom-scrollbar[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#FFA500 rgba(0,0,0,.05)}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d;border-radius:4px;margin:8px 0}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:orange;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#e69500}.flex-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-grow[_ngcontent-%COMP%]{flex-grow:1}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}form.space-y-3[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.65rem}label.mb-1[_ngcontent-%COMP%]{margin-bottom:.15rem}input.py-2[_ngcontent-%COMP%]{padding-top:.4rem;padding-bottom:.4rem}.w-full.p-4.custom-scrollbar[_ngcontent-%COMP%]{box-sizing:border-box}h1.text-2xl[_ngcontent-%COMP%]{font-size:1.375rem}h2.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-sm[_ngcontent-%COMP%]{font-size:.8125rem}.p-4[_ngcontent-%COMP%], .p-5[_ngcontent-%COMP%], .p-6[_ngcontent-%COMP%], .p-8[_ngcontent-%COMP%]{padding:1rem}"]})};var ht=o=>({"border-red-500 focus:border-red-500 focus:ring-red-500":o});function _t(o,n){o&1&&(f(),t(0,"svg",28),d(1,"path",29),r())}function wt(o,n){o&1&&(f(),t(0,"svg",30),d(1,"path",31),r())}function yt(o,n){o&1&&(t(0,"p",43),i(1,"El correo electr\xF3nico es requerido"),r())}function Ct(o,n){o&1&&(t(0,"p",43),i(1,"Ingrese un correo electr\xF3nico v\xE1lido"),r())}function kt(o,n){if(o&1&&(t(0,"div",41),c(1,yt,2,0,"p",42)(2,Ct,2,0,"p",42),r()),o&2){let e=g(2);a(),s("ngIf",e.f.email.errors.required),a(),s("ngIf",e.f.email.errors.email)}}function Mt(o,n){if(o&1&&(t(0,"div",44)(1,"div",45)(2,"div",46),f(),t(3,"svg",47),d(4,"path",48),r()(),w(),t(5,"div",49)(6,"h3",50),i(7),r()()()()),o&2){let e=g(2);a(7),b(e.error)}}function St(o,n){o&1&&d(0,"span",51)}function Et(o,n){o&1&&(t(0,"span"),i(1,"Enviar enlace de recuperaci\xF3n"),r())}function Pt(o,n){if(o&1){let e=C();t(0,"form",32),x("ngSubmit",function(){h(e);let m=g();return _(m.onSubmit())}),t(1,"div")(2,"label",33),i(3,"Correo electr\xF3nico"),r(),d(4,"input",34),c(5,kt,3,2,"div",35),r(),c(6,Mt,8,1,"div",36),t(7,"div",37)(8,"button",38),c(9,St,1,0,"span",39)(10,Et,2,0,"span",40),r()()()}if(o&2){let e=g();s("formGroup",e.forgotForm),a(4),s("ngClass",y(7,ht,e.submitted&&e.f.email.errors)),a(),s("ngIf",e.submitted&&e.f.email.errors),a(),s("ngIf",e.error),a(2),s("disabled",e.loading),a(),s("ngIf",e.loading),a(),s("ngIf",!e.loading)}}function Ot(o,n){if(o&1&&(t(0,"div",52)(1,"div",45)(2,"div",46),f(),t(3,"svg",53),d(4,"path",54),r()(),w(),t(5,"div",49)(6,"h3",55),i(7," Correo enviado "),r(),t(8,"div",56)(9,"p"),i(10," Hemos enviado un enlace de recuperaci\xF3n a "),t(11,"strong"),i(12),r(),i(13,". Por favor, revisa tu bandeja de entrada y sigue las instrucciones para restablecer tu contrase\xF1a. "),r()(),t(14,"div",57)(15,"button",58),i(16," Volver al inicio de sesi\xF3n "),r()()()()()),o&2){let e,l=g();a(12),b((e=l.forgotForm.get("email"))==null?null:e.value)}}var X=class o{fb=u(B);authService=u(P);router=u(O);themeService=u(L);forgotForm;loading=!1;submitted=!1;error="";emailSent=!1;isFirstClick=!0;constructor(){this.forgotForm=this.fb.group({email:["",[v.required,v.email]]})}get f(){return this.forgotForm.controls}onSubmit(){this.submitted=!0,this.error="",!this.forgotForm.invalid&&(this.loading=!0,this.authService.forgotPassword(this.forgotForm.value.email).subscribe({next:()=>{this.emailSent=!0,this.loading=!1},error:n=>{this.error=n.error?.message||"Error al enviar el correo de recuperaci\xF3n.",this.loading=!1}}))}onDocumentClick(n){if(this.isFirstClick){this.isFirstClick=!1;return}let e=document.querySelector(".mx-auto.w-full.max-w-6xl.overflow-hidden.rounded-2xl");if(!e)return;e.contains(n.target)||this.router.navigate(["/"])}preventPropagation(n){n.stopPropagation()}toggleDarkMode(){this.themeService.toggleDarkMode()}isDarkMode(){return this.themeService.isDarkMode()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-forgot-password"]],hostBindings:function(e,l){e&1&&x("click",function(p){return l.onDocumentClick(p)},!1,U)},decls:39,vars:4,consts:[[1,"flex","min-h-screen","items-center","justify-center","py-6","sm:py-12","px-4","sm:px-6","lg:px-8",2,"background-image","url('/assets/images/foto05.jpg')","background-size","cover","background-position","center"],[1,"mx-auto","w-full","max-w-6xl","overflow-hidden","rounded-2xl","sm:rounded-3xl","bg-white","dark:bg-gray-800","shadow-xl","lg:flex",2,"height","520px","max-height","520px",3,"click"],[1,"w-full","p-4","sm:p-5","md:p-6","lg:p-8","lg:w-1/2","h-full","flex","flex-col"],[1,"flex","justify-between","items-center","mb-3"],[1,"mb-1","text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-gray-600","dark:text-gray-300","text-sm"],[1,"p-2","rounded-full","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-gray-600","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-yellow-300","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],[1,"mb-3","flex","border-b","border-gray-200","dark:border-gray-700"],["routerLink","/login",1,"flex-1","border-b-0","py-2","text-center","font-semibold","text-gray-400","hover:text-gray-600","dark:hover:text-gray-300","transition-colors"],["routerLink","/register",1,"flex-1","border-b-0","py-2","text-center","font-semibold","text-gray-400","hover:text-gray-600","dark:hover:text-gray-300","transition-colors"],[1,"mb-2","text-lg","font-bold","text-gray-900","dark:text-white"],[1,"mb-3","text-sm","text-gray-600","dark:text-gray-300"],["class","space-y-3 flex-grow",3,"formGroup","ngSubmit",4,"ngIf"],["class","rounded-md border border-green-300 bg-green-50 dark:bg-green-900 dark:border-green-800 p-4 flex-grow",4,"ngIf"],[1,"hidden","lg:block","lg:w-1/2","relative"],["src","/assets/images/foto01.jpg","alt","Capachica Travel",1,"h-full","w-full","object-cover"],[1,"absolute","top-10","right-10","max-w-sm","rounded-xl","bg-white","dark:bg-gray-800","p-4","shadow-lg"],[1,"flex","justify-between","items-start"],[1,"text-xl","font-bold","dark:text-white"],[1,"ml-4"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-6","w-6","text-orange-500"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule","evenodd"],[1,"mt-2","text-gray-600","dark:text-gray-300"],[1,"absolute","bottom-16","inset-x-0","text-center","text-white"],[1,"text-3xl","font-bold","mb-2"],[1,"text-xl"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-yellow-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"],[1,"space-y-3","flex-grow",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","email","type","email","formControlName","email","autocomplete","email","placeholder","ejemplo@correo.com",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["class","mt-1",4,"ngIf"],["class","rounded-md border border-red-300 bg-red-50 dark:bg-red-900 dark:border-red-800 p-2",4,"ngIf"],[1,"pt-1","mt-auto"],["type","submit",1,"w-full","rounded-lg","bg-orange-500","py-2","text-center","font-semibold","text-white","hover:bg-orange-600","active:bg-orange-700",3,"disabled"],["class","inline-block h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent",4,"ngIf"],[4,"ngIf"],[1,"mt-1"],["class","text-sm text-red-600 dark:text-red-400",4,"ngIf"],[1,"text-sm","text-red-600","dark:text-red-400"],[1,"rounded-md","border","border-red-300","bg-red-50","dark:bg-red-900","dark:border-red-800","p-2"],[1,"flex"],[1,"flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L10 8.586 8.293 6.879a1 1 0 10-1.414 1.414L8.586 10l-1.707 1.707a1 1 0 101.414 1.414L10 11.414l1.707 1.707a1 1 0 101.414-1.414L11.414 10l1.707-1.707a1 1 0 000-1.414z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800","dark:text-red-300"],[1,"inline-block","h-5","w-5","animate-spin","rounded-full","border-2","border-white","border-t-transparent"],[1,"rounded-md","border","border-green-300","bg-green-50","dark:bg-green-900","dark:border-green-800","p-4","flex-grow"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-green-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-green-800","dark:text-green-300"],[1,"mt-2","text-sm","text-green-700","dark:text-green-400"],[1,"mt-4"],["type","button","routerLink","/login",1,"rounded-lg","bg-orange-500","py-2","px-4","text-sm","font-medium","text-white","hover:bg-orange-600"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1),x("click",function(p){return l.preventPropagation(p)}),t(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),i(6,"Capachica Travel"),r(),t(7,"p",5),i(8,"Explora m\xE1s. Vive experiencias."),r()(),t(9,"button",6),x("click",function(){return l.toggleDarkMode()}),c(10,_t,2,0,"svg",7)(11,wt,2,0,"svg",8),r()(),t(12,"div",9)(13,"a",10),i(14," Iniciar sesi\xF3n "),r(),t(15,"a",11),i(16," Registrarse "),r()(),t(17,"h2",12),i(18," Recuperar contrase\xF1a "),r(),t(19,"p",13),i(20," Ingresa tu correo electr\xF3nico y te enviaremos instrucciones para restablecer tu contrase\xF1a. "),r(),c(21,Pt,11,9,"form",14)(22,Ot,17,1,"div",15),r(),t(23,"div",16),d(24,"img",17),t(25,"div",18)(26,"div",19)(27,"h3",20),i(28,"\xBFOlvidaste tu contrase\xF1a?"),r(),t(29,"div",21),f(),t(30,"svg",22),d(31,"path",23),r()()(),w(),t(32,"p",24),i(33," No te preocupes, te ayudaremos a recuperar el acceso a tu cuenta r\xE1pidamente. "),r()(),t(34,"div",25)(35,"h2",26),i(36,"\xA1Recupera tu acceso ahora!"),r(),t(37,"p",27),i(38,"Y contin\xFAa disfrutando de tus viajes"),r()()()()()),e&2&&(a(10),s("ngIf",!l.isDarkMode()),a(),s("ngIf",l.isDarkMode()),a(10),s("ngIf",!l.emailSent),a(),s("ngIf",l.emailSent))},dependencies:[E,T,S,j,N,R,V,G,z,D,Y],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-image:url(/assets/images/foto01.jpg);background-size:cover;background-position:center;position:relative;overflow-x:hidden}.background-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.login-wrapper[_ngcontent-%COMP%]{position:relative;z-index:10;padding:2rem}.logo[_ngcontent-%COMP%]{max-width:120px;margin:0 auto}.title-animated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown 1s ease}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.mx-auto[_ngcontent-%COMP%]{height:520px!important;max-height:520px!important}.password-field[_ngcontent-%COMP%]{position:relative}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;color:#6b7280}.bg-green-600[_ngcontent-%COMP%]{background-color:#16a34a}.bg-green-600[_ngcontent-%COMP%]:hover{background-color:#15803d}.bg-green-600[_ngcontent-%COMP%]:active{background-color:#166534}.capachica-title[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-weight:800;font-size:3.5rem;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.5);letter-spacing:-1px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.rounded-3xl[_ngcontent-%COMP%]{border-radius:1.5rem}button[type=submit][_ngcontent-%COMP%]{transition:all .2s ease;background-color:orange}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#e69500}button[type=submit][_ngcontent-%COMP%]:active{background-color:#cc8400}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ffd280;cursor:not-allowed}.border-b-2.border-black[_ngcontent-%COMP%]{border-bottom-width:2px;border-color:#000;font-weight:600}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.overflow-y-auto[_ngcontent-%COMP%]{overflow-y:auto;scrollbar-width:thin;scrollbar-color:#FFA500 #f1f1f1}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:orange;border-radius:4px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#e69500}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#374151;margin-bottom:.25rem}.form-input[_ngcontent-%COMP%]{display:block;width:100%;padding:.5rem .75rem;border-radius:.375rem;border:1px solid #d1d5db;box-shadow:0 1px 2px #0000000d;font-size:.875rem;color:#1f2937}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#93c5fd;box-shadow:0 0 0 3px #3b82f640}.form-error[_ngcontent-%COMP%]{font-size:.75rem;color:#ef4444;margin-top:.25rem}.bg-orange-500[_ngcontent-%COMP%]{background-color:orange}.bg-orange-500[_ngcontent-%COMP%]:active{background-color:#cc8400}.hover\\:bg-orange-600[_ngcontent-%COMP%]:hover{background-color:#e69400}.btn-orange[_ngcontent-%COMP%]{background-color:orange;color:#fff;transition:all .2s ease;padding:.5rem 1rem;border-radius:.25rem;font-weight:500;text-align:center;cursor:pointer}.btn-orange[_ngcontent-%COMP%]:hover{background-color:#e69500}.btn-orange[_ngcontent-%COMP%]:active{background-color:#cc8400}.btn-orange[_ngcontent-%COMP%]:disabled{background-color:#ffd280;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#6b7280;color:#fff;transition:all .2s ease;padding:.5rem 1rem;border-radius:.25rem;font-weight:500;text-align:center;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#4b5563}.text-primary-600[_ngcontent-%COMP%]{color:orange}.text-primary-500[_ngcontent-%COMP%]{color:#e69500}@media (max-width: 768px){.space-y-4[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){margin-top:.75rem}.rounded-3xl[_ngcontent-%COMP%]{border-radius:1rem}.py-3[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.mx-auto[_ngcontent-%COMP%]{height:520px!important;max-height:520px!important}}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 640px){input[_ngcontent-%COMP%], button[type=submit][_ngcontent-%COMP%]{padding-top:.625rem;padding-bottom:.625rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}}.flex-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-grow[_ngcontent-%COMP%]{flex-grow:1}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}.space-y-4[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:.75rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.dark[_ngcontent-%COMP%]   .text-gray-900[_ngcontent-%COMP%]{color:#fff}.dark[_ngcontent-%COMP%]   .text-gray-600[_ngcontent-%COMP%]{color:#d1d5db}.dark[_ngcontent-%COMP%]   .border-gray-200[_ngcontent-%COMP%]{border-color:#374151}.dark[_ngcontent-%COMP%]   .bg-white[_ngcontent-%COMP%]{background-color:#1f2937}.dark[_ngcontent-%COMP%]   .shadow-xl[_ngcontent-%COMP%]{box-shadow:0 20px 25px -5px #0003,0 10px 10px -5px #0000001a}h1.text-2xl[_ngcontent-%COMP%]{font-size:1.375rem}h2.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-sm[_ngcontent-%COMP%]{font-size:.8125rem}.p-4[_ngcontent-%COMP%], .p-5[_ngcontent-%COMP%], .p-6[_ngcontent-%COMP%], .p-8[_ngcontent-%COMP%]{padding:1rem}"]})};var Ee=o=>({"border-red-500 focus:border-red-500 focus:ring-red-500":o});function It(o,n){o&1&&(f(),t(0,"svg",10),d(1,"path",11),r())}function Ft(o,n){o&1&&(f(),t(0,"svg",12),d(1,"path",13),r())}function Tt(o,n){o&1&&(t(0,"p",27),i(1,"La contrase\xF1a es requerida"),r())}function Lt(o,n){o&1&&(t(0,"p",27),i(1,"La contrase\xF1a debe tener al menos 8 caracteres"),r())}function Rt(o,n){if(o&1&&(t(0,"div"),c(1,Tt,2,0,"p",26)(2,Lt,2,0,"p",26),r()),o&2){let e=g(2);a(),s("ngIf",e.f.password.errors.required),a(),s("ngIf",e.f.password.errors.minlength)}}function Vt(o,n){o&1&&(t(0,"p",27),i(1,"La confirmaci\xF3n de contrase\xF1a es requerida"),r())}function Gt(o,n){o&1&&(t(0,"p",27),i(1,"Las contrase\xF1as no coinciden"),r())}function Nt(o,n){if(o&1&&(t(0,"div"),c(1,Vt,2,0,"p",26)(2,Gt,2,0,"p",26),r()),o&2){let e=g(2);a(),s("ngIf",e.f.password_confirmation.errors.required),a(),s("ngIf",e.f.password_confirmation.errors.mustMatch)}}function zt(o,n){if(o&1&&(t(0,"div",28)(1,"div",29)(2,"div",30)(3,"h3",31),i(4),r()()()()),o&2){let e=g(2);a(4),b(e.error)}}function Dt(o,n){o&1&&d(0,"span",32)}function Bt(o,n){o&1&&(t(0,"span"),i(1,"Restablecer contrase\xF1a"),r())}function jt(o,n){if(o&1){let e=C();t(0,"form",14),x("ngSubmit",function(){h(e);let m=g();return _(m.onSubmit())}),t(1,"div",15),d(2,"input",16)(3,"input",17),t(4,"div")(5,"label",18),i(6,"Nueva contrase\xF1a"),r(),d(7,"input",19),c(8,Rt,3,2,"div",20),r(),t(9,"div")(10,"label",21),i(11,"Confirmar contrase\xF1a"),r(),d(12,"input",22),c(13,Nt,3,2,"div",20),r()(),c(14,zt,5,1,"div",23),t(15,"div")(16,"button",24),c(17,Dt,1,0,"span",25)(18,Bt,2,0,"span",20),r()()()}if(o&2){let e=g();s("formGroup",e.resetForm),a(7),s("ngClass",y(9,Ee,e.submitted&&e.f.password.errors)),a(),s("ngIf",e.submitted&&e.f.password.errors),a(4),s("ngClass",y(11,Ee,e.submitted&&e.f.password_confirmation.errors)),a(),s("ngIf",e.submitted&&e.f.password_confirmation.errors),a(),s("ngIf",e.error),a(2),s("disabled",e.loading),a(),s("ngIf",e.loading),a(),s("ngIf",!e.loading)}}function At(o,n){if(o&1){let e=C();t(0,"div",33)(1,"div",29)(2,"div",34),f(),t(3,"svg",35),d(4,"path",36),r()(),w(),t(5,"div",30)(6,"h3",37),i(7," \xA1Contrase\xF1a restablecida! "),r(),t(8,"div",38)(9,"p"),i(10," Tu contrase\xF1a ha sido restablecida exitosamente. "),r()(),t(11,"div",39)(12,"button",40),x("click",function(){h(e);let m=g();return _(m.navigateToLogin())}),i(13," Iniciar sesi\xF3n "),r()()()()()}}var Z=class o{fb=u(B);route=u(I);router=u(O);authService=u(P);themeService=u(L);resetForm;loading=!1;submitted=!1;error="";resetSuccess=!1;constructor(){this.resetForm=this.fb.group({email:["",[v.required,v.email]],token:["",v.required],password:["",[v.required,v.minLength(8)]],password_confirmation:["",v.required]},{validators:this.mustMatch("password","password_confirmation")})}ngOnInit(){this.route.queryParams.subscribe(n=>{let e=n.token,l=n.email;e&&l?this.resetForm.patchValue({token:e,email:l}):this.error="Enlace de restablecimiento inv\xE1lido. Faltan par\xE1metros necesarios."})}get f(){return this.resetForm.controls}mustMatch(n,e){return l=>{let m=l.controls[n],p=l.controls[e];p.errors&&!p.errors.mustMatch||(m.value!==p.value?p.setErrors({mustMatch:!0}):p.setErrors(null))}}onSubmit(){if(this.submitted=!0,this.error="",this.resetForm.invalid)return;this.loading=!0;let n=this.resetForm.value;this.authService.resetPassword(n).subscribe({next:()=>{this.resetSuccess=!0,this.loading=!1},error:e=>{this.error=e.error?.message||"Error al restablecer la contrase\xF1a.",this.loading=!1}})}navigateToLogin(){this.router.navigate(["/login"])}toggleDarkMode(){this.themeService.toggleDarkMode()}isDarkMode(){return this.themeService.isDarkMode()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-reset-password"]],decls:12,vars:4,consts:[[1,"flex","min-h-screen","items-center","justify-center","bg-gray-50","dark:bg-gray-900","py-12","px-4","sm:px-6","lg:px-8"],[1,"w-full","max-w-md","space-y-8","bg-white","dark:bg-gray-800","backdrop-blur-md","rounded-xl","shadow-xl","p-8",2,"height","520px","max-height","520px"],[1,"flex","justify-between","items-center"],[1,"text-3xl","font-bold","tracking-tight","text-gray-900","dark:text-white"],[1,"p-2","rounded-full","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-gray-600","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-yellow-300","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],[1,"mt-2","text-sm","text-gray-600","dark:text-gray-300"],["class","mt-8 space-y-6",3,"formGroup","ngSubmit",4,"ngIf"],["class","rounded-md bg-green-50 dark:bg-green-900 dark:border-green-800 border border-green-300 p-4",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-yellow-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"],[1,"mt-8","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-4","rounded-md","shadow-sm"],["type","hidden","formControlName","email"],["type","hidden","formControlName","token"],["for","password",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","password","type","password","formControlName","password",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],[4,"ngIf"],["for","password_confirmation",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","password_confirmation","type","password","formControlName","password_confirmation",1,"w-full","rounded-lg","border","border-gray-300","dark:border-gray-600","dark:bg-gray-700","dark:text-white","px-3","py-2","focus:border-orange-500","focus:outline-none","focus:ring-1","focus:ring-orange-500",3,"ngClass"],["class","rounded-md bg-red-50 dark:bg-red-900 dark:border-red-800 border border-red-300 p-4",4,"ngIf"],["type","submit",1,"w-full","rounded-lg","bg-orange-500","py-2","text-center","font-semibold","text-white","hover:bg-orange-600","active:bg-orange-700",3,"disabled"],["class","inline-block h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent",4,"ngIf"],["class","text-sm text-red-600 dark:text-red-400 mt-1",4,"ngIf"],[1,"text-sm","text-red-600","dark:text-red-400","mt-1"],[1,"rounded-md","bg-red-50","dark:bg-red-900","dark:border-red-800","border","border-red-300","p-4"],[1,"flex"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800","dark:text-red-300"],[1,"inline-block","h-4","w-4","animate-spin","rounded-full","border-2","border-white","border-t-transparent"],[1,"rounded-md","bg-green-50","dark:bg-green-900","dark:border-green-800","border","border-green-300","p-4"],[1,"flex-shrink-0"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-green-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-green-800","dark:text-green-300"],[1,"mt-2","text-sm","text-green-700","dark:text-green-400"],[1,"mt-4"],["type","button",1,"rounded-lg","bg-orange-500","py-2","px-4","text-sm","font-medium","text-white","hover:bg-orange-600",3,"click"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),i(4," Restablecer contrase\xF1a "),r(),t(5,"button",4),x("click",function(){return l.toggleDarkMode()}),c(6,It,2,0,"svg",5)(7,Ft,2,0,"svg",6),r()(),t(8,"p",7),i(9," Ingresa tu nueva contrase\xF1a "),r(),c(10,jt,19,13,"form",8)(11,At,14,0,"div",9),r()()),e&2&&(a(6),s("ngIf",!l.isDarkMode()),a(),s("ngIf",l.isDarkMode()),a(3),s("ngIf",!l.resetSuccess),a(),s("ngIf",l.resetSuccess))},dependencies:[E,T,S,j,N,R,V,G,z,D],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-image:url(/assets/images/foto05.jpg);background-size:cover;background-position:center}input[_ngcontent-%COMP%]:focus{border-color:orange;box-shadow:0 0 0 1px orange}button[type=submit][_ngcontent-%COMP%]{transition:all .2s ease;background-color:orange}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#e69500}button[type=submit][_ngcontent-%COMP%]:active{background-color:#cc8400}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ffd280;cursor:not-allowed}"]})};function qt(o,n){o&1&&(t(0,"div",6),d(1,"div",7),t(2,"p",8),i(3,"Verificando tu correo electr\xF3nico..."),r()())}function Ht(o,n){if(o&1){let e=C();t(0,"div",9)(1,"div",10)(2,"div",11),f(),t(3,"svg",12),d(4,"path",13),r()(),w(),t(5,"div",14)(6,"h3",15),i(7," \xA1Correo electr\xF3nico verificado correctamente! "),r(),t(8,"div",16)(9,"p"),i(10," Tu cuenta ha sido verificada. Ahora puedes acceder a todas las funcionalidades de la plataforma. "),r()(),t(11,"div",17)(12,"button",18),x("click",function(){h(e);let m=g();return _(m.navigateToLogin())}),i(13," Iniciar sesi\xF3n "),r()()()()()}}function Ut(o,n){if(o&1){let e=C();t(0,"div",19)(1,"div",10)(2,"div",11),f(),t(3,"svg",20),d(4,"path",21),r()(),w(),t(5,"div",14)(6,"h3",22),i(7," Error al verificar el correo electr\xF3nico "),r(),t(8,"div",23)(9,"p"),i(10),r(),t(11,"p",24),i(12," El enlace puede haber expirado o no ser v\xE1lido. Si el problema persiste, por favor solicita un nuevo enlace de verificaci\xF3n. "),r()(),t(13,"div",17)(14,"button",25),x("click",function(){h(e);let m=g();return _(m.navigateToLogin())}),i(15," Volver al inicio de sesi\xF3n "),r()()()()()}if(o&2){let e=g();a(10),b(e.errorMessage)}}var ee=class o{route=u(I);router=u(O);authService=u(P);verifying=!0;success=!1;errorMessage="No se pudo verificar tu correo electr\xF3nico.";ngOnInit(){this.route.queryParams.subscribe(n=>{let e=n.id,l=n.hash,m=n.expires,p=n.signature;if(!e||!l){this.verifying=!1,this.success=!1,this.errorMessage="Enlace de verificaci\xF3n inv\xE1lido. Faltan par\xE1metros necesarios.";return}m&&p?this.verifyEmailWithFullUrl(e,l,m,p):this.verifyEmail(Number(e),l)})}verifyEmail(n,e){this.authService.verifyEmail(n,e).pipe(ie(()=>this.verifying=!1)).subscribe({next:()=>{this.success=!0,this.authService.isLoggedIn()&&this.authService.loadUserProfile(!0).subscribe()},error:l=>{this.success=!1,this.errorMessage=l.error?.message||"Error al verificar el correo electr\xF3nico."}})}verifyEmailWithFullUrl(n,e,l,m){let p=`${q.apiUrl}/email/verify/${n}/${e}?expires=${l}&signature=${m}`;this.authService.verifyEmailWithFullUrl(p).pipe(ie(()=>this.verifying=!1)).subscribe({next:()=>{this.success=!0,this.authService.isLoggedIn()&&this.authService.loadUserProfile(!0).subscribe()},error:k=>{this.success=!1,this.errorMessage=k.error?.message||"Error al verificar el correo electr\xF3nico.",console.error("Error de verificaci\xF3n:",k)}})}navigateToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-verify-email"]],decls:8,vars:3,consts:[[1,"flex","min-h-screen","items-center","justify-center","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"w-full","max-w-md","space-y-8","bg-white/80","backdrop-blur-md","rounded-xl","shadow-xl","p-8","text-center"],[1,"mt-6","text-center","text-3xl","font-bold","tracking-tight","text-gray-900"],["class","flex flex-col items-center justify-center",4,"ngIf"],["class","rounded-md bg-green-50 p-4",4,"ngIf"],["class","rounded-md bg-red-50 p-4",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-primary-600"],[1,"mt-4","text-lg","text-gray-600"],[1,"rounded-md","bg-green-50","p-4"],[1,"flex"],[1,"flex-shrink-0"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-green-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-green-800"],[1,"mt-2","text-sm","text-green-700"],[1,"mt-4"],["type","button",1,"btn-primary",3,"click"],[1,"rounded-md","bg-red-50","p-4"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-2","text-sm","text-red-700"],[1,"mt-2"],["type","button",1,"btn-secondary",3,"click"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),i(4," Verificaci\xF3n de correo electr\xF3nico "),r()(),c(5,qt,4,0,"div",3)(6,Ht,14,0,"div",4)(7,Ut,16,1,"div",5),r()()),e&2&&(a(5),s("ngIf",l.verifying),a(),s("ngIf",!l.verifying&&l.success),a(),s("ngIf",!l.verifying&&!l.success))},dependencies:[E,S],encapsulation:2})};function Yt(o,n){o&1&&(t(0,"div",5),d(1,"div",6),t(2,"p",7),i(3,"Procesando autenticaci\xF3n con Google..."),r()())}function Wt(o,n){if(o&1){let e=C();t(0,"div",8)(1,"div",9)(2,"div",10),f(),t(3,"svg",11),d(4,"path",12),r()(),w(),t(5,"div",13)(6,"h3",14),i(7,"Error al autenticar con Google"),r(),t(8,"div",15)(9,"p"),i(10),r()(),t(11,"div",16)(12,"button",17),x("click",function(){h(e);let m=g();return _(m.navigateToLogin())}),i(13," Volver al inicio de sesi\xF3n "),r()()()()()}if(o&2){let e=g();a(10),b(e.error)}}var te=class o{route=u(I);router=u(O);authService=u(P);loading=!0;error="";ngOnInit(){this.route.queryParams.subscribe(n=>{let e=n.code,l=n.state||"";if(!e){this.error="No se pudo completar la autenticaci\xF3n con Google. C\xF3digo de autorizaci\xF3n no encontrado.",this.loading=!1;return}this.handleGoogleCallback(e,l)})}handleGoogleCallback(n,e){this.authService.handleGoogleCallback(e,n).subscribe({next:l=>{this.router.navigate(["/dashboard"])},error:l=>{this.error=l.error?.message||"Ocurri\xF3 un error durante la autenticaci\xF3n con Google.",this.loading=!1}})}navigateToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-google-callback"]],decls:7,vars:2,consts:[[1,"flex","min-h-screen","items-center","justify-center","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"w-full","max-w-md","space-y-8","bg-white/80","backdrop-blur-md","rounded-xl","shadow-xl","p-8","text-center"],[1,"mt-6","text-center","text-3xl","font-bold","tracking-tight","text-gray-900"],["class","flex flex-col items-center justify-center",4,"ngIf"],["class","rounded-md bg-red-50 p-4",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-primary-600"],[1,"mt-4","text-lg","text-gray-600"],[1,"rounded-md","bg-red-50","p-4"],[1,"flex"],[1,"flex-shrink-0"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-2","text-sm","text-red-700"],[1,"mt-4"],["type","button",1,"btn-secondary",3,"click"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),i(4," Autenticaci\xF3n con Google "),r()(),c(5,Yt,4,0,"div",3)(6,Wt,14,1,"div",4),r()()),e&2&&(a(5),s("ngIf",l.loading),a(),s("ngIf",!l.loading&&l.error))},dependencies:[E,S],encapsulation:2})};var To=[{path:"login",component:K,title:"Iniciar sesi\xF3n"},{path:"register",component:J,title:"Registrarse"},{path:"forgot-password",component:X,title:"Recuperar contrase\xF1a"},{path:"reset-password",component:Z,title:"Restablecer contrase\xF1a"},{path:"verify-email",component:ee,title:"Verificar correo electr\xF3nico"},{path:"auth/google/callback",component:te,title:"Autenticaci\xF3n con Google"}];export{To as AUTH_ROUTES,X as ForgotPasswordComponent,te as GoogleCallbackComponent,K as LoginComponent,vt as MustMatch,J as RegisterComponent,Z as ResetPasswordComponent,ee as VerifyEmailComponent};
