import{Oc as s,Pc as d,Sc as g,U as c,_ as m,p as n}from"./chunk-ETYZCZA5.js";var u=class o{http=m(d);API_URL=g.apiUrl;constructor(){}getEmprendimientos(e=1,i=15){let r=new s().set("page",e.toString()).set("per_page",i.toString());return this.http.get(`${this.API_URL}/emprendedores`,{params:r}).pipe(n(t=>t.data))}getEmprendimiento(e){return this.http.get(`${this.API_URL}/emprendedores/${e}`).pipe(n(i=>i.data))}getEmprendimientosByAsociacion(e){return this.http.get(`${this.API_URL}/emprendedores/asociacion/${e}`).pipe(n(i=>i.data))}getAsociaciones(e=1,i=15){let r=new s().set("page",e.toString()).set("per_page",i.toString());return this.http.get(`${this.API_URL}/asociaciones`,{params:r}).pipe(n(t=>t.data))}getAsociacion(e){return this.http.get(`${this.API_URL}/asociaciones/${e}`).pipe(n(i=>i.data))}getAsociacionesByMunicipalidad(e){return this.http.get(`${this.API_URL}/asociaciones/municipalidad/${e}`).pipe(n(i=>i.data))}buscarEmprendimientos(e,i=1,r=15){let t=new s().set("page",i.toString()).set("per_page",r.toString());return e.busqueda&&(t=t.set("search",e.busqueda)),e.asociacion&&(t=t.set("asociacion_id",e.asociacion.toString())),e.categoria&&(t=t.set("categoria",e.categoria)),e.tipo_servicio&&(t=t.set("tipo_servicio",e.tipo_servicio)),e.municipalidad&&(t=t.set("municipalidad_id",e.municipalidad.toString())),e.facilidades_discapacidad!==void 0&&(t=t.set("facilidades_discapacidad",e.facilidades_discapacidad.toString())),e.metodos_pago&&e.metodos_pago.length>0&&e.metodos_pago.forEach(a=>{t=t.append("metodos_pago[]",a)}),e.precio_rango?.min&&(t=t.set("precio_min",e.precio_rango.min.toString())),e.precio_rango?.max&&(t=t.set("precio_max",e.precio_rango.max.toString())),this.http.get(`${this.API_URL}/emprendedores`,{params:t}).pipe(n(a=>a.data))}getCategorias(){return this.getEmprendimientos(1,100).pipe(n(e=>{let i=new Set;return e.data.forEach(r=>{r.categoria&&i.add(r.categoria)}),Array.from(i).sort()}))}getTiposServicio(){return this.getEmprendimientos(1,100).pipe(n(e=>{let i=new Set;return e.data.forEach(r=>{r.tipo_servicio&&i.add(r.tipo_servicio)}),Array.from(i).sort()}))}getMetodosPago(){return this.getEmprendimientos(1,100).pipe(n(e=>{let i=new Set;return e.data.forEach(r=>{r.metodos_pago&&Array.isArray(r.metodos_pago)&&r.metodos_pago.forEach(t=>i.add(t))}),Array.from(i).sort()}))}obtenerImagenPrincipal(e){return e.sliders_principales&&e.sliders_principales.length>0&&e.sliders_principales[0].url_completa||"/assets/general/placeholder-business.jpg"}obtenerImagenesSecundarias(e){return e.sliders_secundarios&&e.sliders_secundarios.length>0?e.sliders_secundarios.map(i=>i.url_completa):[]}procesarMetodosPago(e){if(Array.isArray(e))return e;if(typeof e=="string")try{return JSON.parse(e)}catch{return e.split(",").map(i=>i.trim())}return[]}procesarIdiomasHablados(e){if(Array.isArray(e))return e;if(typeof e=="string")try{return JSON.parse(e)}catch{return e.split(",").map(i=>i.trim())}return[]}calcularCalificacionPromedio(e){return Math.round((Math.random()*2+3)*10)/10}formatearPrecioRango(e){if(!e)return null;let i=e.match(/S\/\.\s*(\d+)\s*-\s*S\/\.\s*(\d+)/);return i?{min:parseInt(i[1]),max:parseInt(i[2])}:null}estaAbierto(e){if(!e)return!1;let i=new Date,r=i.getHours(),t=i.getMinutes(),a=e.match(/(\d{1,2}):(\d{2})\s*(?:am|pm)?\s*-\s*(\d{1,2}):(\d{2})\s*(?:am|pm)?/i);if(a){let l=parseInt(a[1]),b=parseInt(a[2]),h=parseInt(a[3]),A=parseInt(a[4]),p=r*60+t,_=l*60+b,f=h*60+A;return p>=_&&p<=f}return!1}static \u0275fac=function(i){return new(i||o)};static \u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})};export{u as a};
